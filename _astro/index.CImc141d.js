import{V as l,a as D,l as h,c as F,b as v}from"./SrujaMonacoEditor.CGKiwx36.js";import{C as tt,N as nt,e as rt,q as ot,o as st,p as at,r as it,g as ct,j as ut,k as lt,n as dt,i as mt,m as ft,d as pt,f as yt,h as gt}from"./SrujaMonacoEditor.CGKiwx36.js";import{c as wt,e as bt,g as At,a as Et,i as xt,b as St}from"./auto.qXY55obW.js";import{a as jt,t as vt,b as _t}from"./errorTracking.Bz67025L.js";import{g as Dt,a as Pt,l as Tt}from"./index.Caq--7mj.js";import"./index._4BMK3ry.js";import"./jsx-runtime.D_zvdyIk.js";import"./lz-string.grvdS_vT.js";import"./value.PC0wJnk-.js";import"./PosthogProvider.DHrDBjp9.js";import"./index.CO7ALg8S.js";/* empty css                       */import"./ThemeToggle.2mboQVcz.js";import"./Logo.BDeSo3E-.js";import"./SrujaLoader.DoHEjicp.js";import"./index.C-nSUQJB.js";import"./SearchBar.BXKz5ROH.js";import"./MantineProvider.DFlHB4BD.js";function g(e){return{ok:!0,value:e}}function u(e){return{ok:!1,error:e}}function se(e){try{return g(e())}catch(t){return u(t)}}async function ae(e){try{const t=await e();return g(t)}catch(t){return u(t)}}function ie(e,t){return e.ok?g(t(e.value)):e}function ce(e,t){return e.ok?e:u(t(e.error))}function ue(e,t){return e.ok?t(e.value):e}function le(e){if(e.ok)return e.value;throw e.error}function de(e,t){return e.ok?e.value:t}function me(e,t){return e.ok?e.value:t(e.error)}const fe="sruja-project",pe="sruja-project",w={MIN:0,MAX:100},L={DEFAULT_WPM:200},ye={DEFAULT_DELAY_MS:50,MAX_RETRIES:150,DEFAULT_TIMEOUT_MS:1e4},ge={ARCHITECTURE:"sruja-architecture-data",UI_SETTINGS:"sruja-ui-settings",GRID_SETTINGS:"sruja-grid-settings",SHARES:"sruja-shares"},he=500,we={DEFAULT_MAX_SIZE:100},P=/^[a-zA-Z0-9:_-]+$/;function b(e){return typeof e=="string"&&e.length>0}function be(e,t="value"){return typeof e=="string"&&e.length>0?g(e):u(new l(`${t} must be a non-empty string`,{field:t,value:e}))}function A(e){return b(e)&&P.test(e)}function Ae(e,t="id"){return b(e)?P.test(e)?g(e):u(new l(`${t} contains invalid characters. Only alphanumeric, colon, underscore, and hyphen are allowed`,{field:t,value:e})):u(new l(`${t} must be a non-empty string`,{field:t,value:e}))}function x(e){return typeof e=="number"&&!Number.isNaN(e)&&Number.isFinite(e)&&e>=w.MIN&&e<=w.MAX}function Ee(e,t="percentage"){return typeof e!="number"||Number.isNaN(e)?u(new l(`${t} must be a number`,{field:t,value:e})):Number.isFinite(e)?e<w.MIN||e>w.MAX?u(new l(`${t} must be between ${w.MIN} and ${w.MAX}, got ${e}`,{field:t,value:e})):g(e):u(new l(`${t} must be a finite number, got ${e===1/0?"Infinity":"-Infinity"}`,{field:t,value:e}))}function xe(e,t="value"){return typeof e!="number"||Number.isNaN(e)?u(new l(`${t} must be a number`,{field:t,value:e})):Number.isFinite(e)?Number.isInteger(e)?e<=0?u(new l(`${t} must be a positive integer (greater than 0), got ${e}`,{field:t,value:e})):g(e):u(new l(`${t} must be an integer, got ${e}`,{field:t,value:e})):u(new l(`${t} must be a finite number, got ${e===1/0?"Infinity":"-Infinity"}`,{field:t,value:e}))}function Se(e){if(typeof e!="object"||e===null)return!1;const t=e;return!(!("specification"in t)||!("elements"in t)||typeof t.specification!="object"||t.specification===null||typeof t.elements!="object"||t.elements===null||"_metadata"in t&&(typeof t._metadata!="object"||t._metadata===null))}function ke(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!("metadata"in t)||!("architecture"in t)||typeof t.metadata!="object"||t.metadata===null)return!1;const n=t.metadata;return!(typeof n.name!="string"||typeof n.version!="string"||typeof t.architecture!="object"||t.architecture===null)}function je(e){if(typeof e!="object"||e===null)return!1;const t=e;return A(t.id)&&b(t.title)}function ve(e){if(typeof e!="object"||e===null)return!1;const t=e;return A(t.id)&&b(t.title)}function _e(e){if(typeof e!="object"||e===null)return!1;const t=e;return A(t.id)&&b(t.title)}function Ce(e){if(typeof e!="object"||e===null)return!1;const t=e;return A(t.id)&&(t.target===void 0||x(t.target))&&(t.availability===void 0||x(t.availability))&&(t.errorBudget===void 0||x(t.errorBudget))}async function De(e){if(!e)return!1;if(D())return console.warn("copyToClipboard: Not available in Node.js environment"),!1;try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(e),!0;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{const n=document.execCommand("copy");return document.body.removeChild(t),n}catch{return document.body.removeChild(t),!1}}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}function Pe(e){const t=[],n=/```mermaid\n([\s\S]*?)```/gi;let r;for(;(r=n.exec(e))!==null;)t.push(r[1].trim());return t}function Te(e,t){const n=[],r=/```(\w+)?\n([\s\S]*?)```/gi;let o;for(;(o=r.exec(e))!==null;){const c=o[1]||null,i=o[2].trim();(!t||c===t)&&n.push({language:c,code:i})}return n}function Re(e){return e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,"").replace(/javascript:/gi,"")}function q(e){return e.replace(/```[\s\S]*?```/g,"").replace(/`[^`]+`/g,"").replace(/[#*_~`()[\]]/g,"").trim().split(/\s+/).filter(n=>n.length>0).length}function Me(e,t=L.DEFAULT_WPM){const n=q(e);return Math.ceil(n/t)}function Ie(e){return e.replace(/\r\n/g,`
`).replace(/\r/g,`
`)}function f(e){return D()?"":getComputedStyle(document.documentElement).getPropertyValue(e).trim()}const Fe={primary:()=>f("--color-primary"),primary50:()=>f("--color-primary-50"),primaryHover:()=>f("--color-primary-hover"),border:()=>f("--color-border"),textPrimary:()=>f("--color-text-primary"),textSecondary:()=>f("--color-text-secondary"),textTertiary:()=>f("--color-text-tertiary"),background:()=>f("--color-background"),surface:()=>f("--color-surface"),success:()=>f("--color-success-500"),error:()=>f("--color-error-500"),info:()=>f("--color-info-500"),neutral500:()=>f("--color-neutral-500")};function $(e){return typeof e=="string"?e:e&&typeof e=="object"&&"txt"in e?e.txt??null:null}function Le(e){return typeof e=="object"&&e!==null&&"txt"in e&&typeof e.txt=="string"}function qe(e,t=""){return $(e)??t}function $e(e){return e==null?"":String(e)}function Ne(e,t=""){return e==null?t:String(e)}function Oe(e,t){const n=new Map,r=t?.maxSize??1/0,o=t?.keyGenerator??((...c)=>JSON.stringify(c));return((...c)=>{const i=o(...c);if(n.has(i)){const m=n.get(i);return n.delete(i),n.set(i,m),m}const d=e(...c);if(n.size>=r){const m=n.keys().next().value;m!==void 0&&n.delete(m)}return n.set(i,d),d})}function We(e){const t=new WeakMap;return(n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r})}function Ge(e,t=!1){if(typeof e!="string")return u(new l("Path must be a string",{field:"path",value:e}));if(e.length===0)return u(new l("Path cannot be empty",{field:"path",value:e}));if(e.includes("\0"))return u(new l("Path cannot contain null bytes",{field:"path",value:e}));if(/[\x00-\x1F\x7F]/.test(e))return u(new l("Path cannot contain control characters",{field:"path",value:e}));if(e.includes(".."))return u(new l('Path traversal detected: path cannot contain ".."',{field:"path",value:e}));if(!t&&(e.startsWith("/")||/^[A-Za-z]:/.test(e)))return u(new l("Absolute paths are not allowed",{field:"path",value:e}));const n=4096;return e.length>n?u(new l(`Path exceeds maximum length of ${n} characters`,{field:"path",value:e})):g(e)}function Be(e){return typeof e!="string"?"":e.trim().replace(/[\\/]+/g,"/").replace(/^\/+|\/+$/g,"")}function Ue(e){return typeof e!="string"?!1:!e.includes("..")&&!e.includes("\0")}async function N(e){await new Promise((t,n)=>{const r=document.createElement("script");r.src=e,r.async=!0,r.onload=()=>t(),r.onerror=()=>{const o=new Error("Failed to load "+e);h.error("Failed to load wasm script",{component:"wasm",action:"load_script",scriptUrl:e,error:o.message}),n(o)},document.head.appendChild(r)})}async function _(e,t){if(window.Go)return;const n=[e,t.replace(/\/?$/,"/")+"wasm_exec.js","/wasm_exec.js","https://cdn.jsdelivr.net/gh/golang/go@go1.25.0/misc/wasm/wasm_exec.js"];let r=!1;for(const o of n)try{if(await N(o),window.Go){r=!0;break}}catch{}if(!r){const o=new Error("Failed to load wasm_exec.js");throw h.error("Failed to load Go wasm runtime",{component:"wasm",action:"load_go_runtime",candidates:n}),o}}async function Qe(e){const t=e?.base||"/",n=t.replace(/\/?$/,"/")+"wasm/wasm_exec.js",r=t.replace(/\/?$/,"/")+"wasm/sruja.wasm";if(!e?.skipGoLoad)await _(n,t);else if(!window.Go)try{await _(n,t)}catch{}const o=window.Go;if(!o){const a=new Error("wasm_exec.js not loaded");throw h.error("Go constructor missing",{component:"wasm",action:"init",errorType:"go_constructor_missing",error:a.message}),a}const c=new o,i=c.importObject||{};if(!i.gojs){const a=i.env||{};i.gojs=Object.keys(a).length?a:i.go||{}}i.gojs&&!i.gojs["runtime.scheduleTimeoutEvent"]&&(i.gojs["runtime.scheduleTimeoutEvent"]=a=>{setTimeout(()=>{try{c._resume&&c._resume()}catch{}},a)});let d=null;const m=[r,t.replace(/\/?$/,"/")+"sruja.wasm","/sruja.wasm",t.replace(/\/?$/,"/")+"viewer/wasm/sruja.wasm","/wasm/sruja.wasm"];let p=null;for(const a of m)try{const s=await fetch(a);if(!s.ok)throw new Error("Failed to fetch "+a);const y=await s.arrayBuffer();d=(await WebAssembly.instantiate(y,i)).instance,p=null;break}catch(s){p=s instanceof Error?s:new Error(String(s));continue}if(!d){const a=p||new Error("Failed to load sruja.wasm");throw h.error("Failed to load sruja.wasm",{component:"wasm",action:"load_wasm",errorType:"wasm_load_failure",candidates:m,retries:m.length,error:a instanceof Error?a.message:String(a)}),a}c.run(d);let E=0;const I=50;for(;E<I&&!window.sruja_json_to_dsl;)await new Promise(s=>setTimeout(s,50)),E++;const j=window.sruja_json_to_dsl;if(!j){const a=Object.keys(window).filter(y=>y.startsWith("sruja_")),s=new Error(`WASM functions not found. Missing: sruja_json_to_dsl. Available: ${a.join(", ")||"none"}`);throw h.error("WASM functions missing",{component:"wasm",action:"init",errorType:"wasm_functions_missing",missing:["sruja_json_to_dsl"],available:a,retries:E,windowKeys:Object.keys(window).filter(y=>y.includes("sruja")||y.includes("wasm")),error:s.message}),s}return{printJsonToDsl:async a=>{try{const s=j(a);if(!s||!s.ok){const y=new Error(s?.error||"print failed");throw h.error("WASM print failed",{component:"wasm",action:"print_json",errorType:"print_failure",errorCode:s?.error,jsonLength:a.length,error:y.message}),y}return s.dsl||""}catch(s){throw h.error("WASM print exception",{component:"wasm",action:"print_json",errorType:"print_exception",error:s instanceof Error?s.message:String(s)}),s}},dslToMarkdown:async a=>{const s=await F(a);if(!s)throw new Error("Failed to convert DSL to Markdown");return s}}}function C(){return{async get(e){return v()?window.localStorage.getItem(e):null},async set(e,t){v()&&window.localStorage.setItem(e,t)}}}function O(){return new Promise(e=>{if(typeof indexedDB>"u")return e(C());const t=indexedDB.open("sruja",1);t.onupgradeneeded=()=>{const n=t.result;n.objectStoreNames.contains("kv")||n.createObjectStore("kv")},t.onsuccess=()=>{const n=t.result;e({async get(r){return new Promise(o=>{const d=n.transaction("kv","readonly").objectStore("kv").get(r);d.onsuccess=()=>{o(d.result||null)},d.onerror=()=>{o(null)}})},async set(r,o){return new Promise(c=>{const m=n.transaction("kv","readwrite").objectStore("kv").put(o,r);m.onsuccess=()=>{c()},m.onerror=()=>{c()}})}})},t.onerror=()=>{e(C())}})}let S=null;async function T(){return S||(S=O()),S}async function Ve(e,t){return(await T()).set(e,t)}async function He(e){return(await T()).get(e)}const R=[{id:"person",title:"Person",summary:"A Person represents a human user of your software system.",description:'A **Person** represents a human user of your software system (e.g., "Customer", "Admin", "Employee"). Persons are typically shown at the top level of your architecture and represent end users, administrators, external stakeholders, or any human actor that interacts with your architecture.',url:"/docs/concepts/person",examples:['person Customer "Bank Customer"','person Admin "System Administrator"'],keyPoints:["Represents human users or stakeholders","Top-level element in architecture diagrams","Can have relationships with systems"]},{id:"system",title:"System",summary:"A System represents a software system, the highest level of abstraction in the C4 model.",description:"A **System** represents a software system, which is the highest level of abstraction in the C4 model. A system delivers value to its users, whether they are human or other systems. Systems represent complete software applications that deliver value to users, can contain containers (Level 2), interact with other systems, and have clear boundaries.",url:"/docs/concepts/system",examples:['system BankingSystem "Internet Banking System"','system WebApp "Web Application"'],keyPoints:["Highest level of abstraction (C4 Level 1)","Delivers value to users","Can contain containers","Interacts with other systems"]},{id:"container",title:"Container",summary:"A Container represents an application or a data store.",description:"A **Container** represents an application or a data store. It is something that needs to be running in order for the overall software system to work. Containers are deployable units such as web applications, mobile applications, desktop applications, microservices, databases, and file systems.",url:"/docs/concepts/container",examples:['container API "REST API"','container WebApp "Web Application"'],keyPoints:["Deployable unit (C4 Level 2)","Part of a system","Can contain components","Interacts with other containers"]},{id:"datastore",title:"Datastore",summary:"A Datastore represents a database or data storage mechanism.",description:"A **Datastore** represents a database or data storage mechanism within a system. Datastores store and retrieve data for containers, including relational databases (PostgreSQL, MySQL), NoSQL databases (MongoDB, DynamoDB), file systems, and object storage.",url:"/docs/concepts/datastore",examples:['datastore DB "PostgreSQL Database"','datastore Cache "Redis Cache"'],keyPoints:["Stores and retrieves data","Used by containers","Part of a system"]},{id:"queue",title:"Queue",summary:"A Queue is an asynchronous messaging mechanism.",description:"A **Queue** is an asynchronous messaging mechanism that allows containers to communicate asynchronously. Queues enable asynchronous communication, decoupling of services, event-driven architectures, and message buffering.",url:"/docs/concepts/queue",examples:['queue EventQueue "Kafka Message Queue"','queue TaskQueue "Background Task Queue"'],keyPoints:["Asynchronous messaging","Decouples services","Enables event-driven architecture"]},{id:"component",title:"Component",summary:"A Component is a logical grouping of functionality within a container.",description:"A **Component** is a logical grouping of functionality within a container (C4 Level 3). Components represent modules within an application, services within a microservice, logical groupings of code, and reusable functionality.",url:"/docs/concepts/component",examples:['component AuthService "Authentication Service"','component PaymentProcessor "Payment Processing Module"'],keyPoints:["Logical grouping (C4 Level 3)","Part of containers","Can interact with other components"]},{id:"requirement",title:"Requirement",summary:"A Requirement represents a functional or non-functional requirement.",description:"A **Requirement** represents a functional or non-functional requirement that the architecture must satisfy. Requirements document functional requirements, non-functional requirements (performance, security, etc.), constraints, and quality attributes.",url:"/docs/concepts/relations",examples:['requirement R1 "High Availability"','requirement R2 "Data Encryption"'],keyPoints:["Functional and non-functional requirements","Constraints and quality attributes","Can be satisfied by systems or containers"]},{id:"adr",title:"ADR (Architecture Decision Record)",summary:"An ADR documents an important architectural decision.",description:"An **ADR** (Architecture Decision Record) documents an important architectural decision made along with its context and consequences. ADRs capture the decision made, context and constraints, consequences (positive and negative), and alternatives considered.",url:"/docs/concepts/adr",examples:['adr ADR001 "Use Microservices Architecture"','adr ADR002 "Database Selection"'],keyPoints:["Documents architectural decisions","Captures context and consequences","Can be related to systems or containers"]},{id:"deployment",title:"Deployment Node",summary:"A Deployment Node represents infrastructure where containers are deployed.",description:"A **Deployment Node** represents the infrastructure where containers are deployed. Deployment nodes represent physical servers, virtual machines, cloud regions, and container orchestration platforms (Kubernetes).",url:"/docs/concepts/deployment",examples:['deployment Production "AWS us-east-1"','deployment Staging "Kubernetes Cluster"'],keyPoints:["Represents infrastructure","Hosts containers","Can be part of deployment diagrams"]}];function M(e){return R.find(t=>t.id===e)}function W(){return R}function G(e){return M(e)?.url??"/docs/concepts"}const k={person:{file:"../../apps/learn/docs/docs/concepts/person.md",url:"/learn/docs/docs/concepts/person"},system:{file:"../../apps/learn/docs/docs/concepts/system.md",url:"/learn/docs/docs/concepts/system"},container:{file:"../../apps/learn/docs/docs/concepts/container.md",url:"/learn/docs/docs/concepts/container"},datastore:{file:"../../apps/learn/docs/docs/concepts/datastore.md",url:"/learn/docs/docs/concepts/datastore"},queue:{file:"../../apps/learn/docs/docs/concepts/queue.md",url:"/learn/docs/docs/concepts/queue"},component:{file:"../../apps/learn/docs/docs/concepts/component.md",url:"/learn/docs/docs/concepts/component"},requirement:{file:"../../apps/learn/docs/docs/concepts/relations.md",url:"/learn/docs/docs/concepts/relations"},adr:{file:"../../apps/learn/docs/docs/concepts/adr.md",url:"/learn/docs/docs/concepts/adr"},deployment:{file:"../../apps/learn/docs/docs/concepts/deployment.md",url:"/learn/docs/docs/concepts/deployment"}};function B(e){const t=/^---\s*\n([\s\S]*?)\n---\s*\n/,n=e.match(t);if(!n)return{frontmatter:{},content:e};const r=n[1],o=e.slice(n[0].length),c={};return r.split(`
`).forEach(i=>{const d=i.indexOf(":");if(d>0){const m=i.slice(0,d).trim();let p=i.slice(d+1).trim();(p.startsWith('"')&&p.endsWith('"')||p.startsWith("'")&&p.endsWith("'"))&&(p=p.slice(1,-1)),c[m]=p}}),{frontmatter:c,content:o.trim()}}async function ze(e){const t=k[e];if(!t)return null;try{const n=await fetch(t.file);if(!n.ok)return null;const r=await n.text(),{frontmatter:o,content:c}=B(r);return{id:e,title:o.title||e,content:c,url:t.url,summary:o.summary}}catch(n){return console.warn(`Failed to load doc for ${e}:`,n),null}}function Xe(){return Object.keys(k).map(e=>({id:e,title:e.charAt(0).toUpperCase()+e.slice(1),content:"",url:k[e].url}))}function Ke(e){return G(e)}function Je(){return W().map(e=>e.id)}function Ye(e){const t=M(e);return t?{id:t.id,title:t.title,content:t.description,url:t.url,summary:t.summary}:null}export{we as CACHE,R as CONCEPT_GLOSSARY,Fe as Colors,tt as ConfigurationError,fe as DEFAULT_PROJECT_ID,pe as DEFAULT_PROJECT_NAME,he as ERROR_STACK_TRUNCATE_LENGTH,nt as NetworkError,w as PERCENTAGE,L as READING_TIME,ye as RETRY,ge as STORAGE_KEYS,rt as SrujaError,l as ValidationError,ue as andThen,wt as capture,ot as convertDslToDot,st as convertDslToJson,F as convertDslToMarkdown,at as convertDslToMermaid,it as convertModelToDsl,De as copyToClipboard,bt as enableAutoTracking,u as err,Te as extractCodeBlocks,Pe as extractMermaidBlocks,$ as extractText,Ie as formatMarkdownForPreview,W as getAllConcepts,Je as getAllDocSectionIds,Xe as getAllDocSections,Dt as getAvailableExamples,ct as getBaseUrl,M as getConceptById,G as getConceptUrl,f as getCssVar,Ye as getDocSection,Ke as getDocUrl,ut as getErrorMessage,lt as getErrorStack,q as getMarkdownWordCount,At as getPosthog,Me as getReadingTime,T as getStore,dt as getWasmApi,Et as identify,xt as initPosthog,mt as initWasm,ft as initWasmAuto,Qe as initWasmViewer,v as isBrowser,ke as isLegacyFormat,pt as isNode,b as isNonEmptyString,St as isReady,Le as isRichText,D as isSSR,Ue as isSafePath,yt as isSrujaError,Se as isSrujaModelFormat,ve as isValidADR,A as isValidElementId,x as isValidPercentage,_e as isValidPolicy,je as isValidRequirement,Ce as isValidSLO,gt as isValidationError,ze as loadDocSection,Pt as loadExampleFile,Tt as loadExamplesManifest,h as logger,ie as map,ce as mapErr,Oe as memoize,g as ok,Be as sanitizeFilePath,Re as sanitizeMarkdown,He as storeGet,Ve as storeSet,$e as toString,Ne as toStringOr,qe as toStringOrFallback,jt as trackError,vt as trackInteraction,_t as trackPerformance,se as tryCatch,ae as tryCatchAsync,le as unwrap,de as unwrapOr,me as unwrapOrElse,Ae as validateElementId,Ge as validateFilePath,be as validateNonEmptyString,Ee as validatePercentage,xe as validatePositiveInteger,We as weakMemoize};
