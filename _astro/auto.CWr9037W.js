import{c as p}from"./posthog.D98OsGe_.js";let g=!1;function h(t){const o=t,e=o.innerText||o.textContent||"";return String(e).trim().slice(0,200)}function m(t){const o={},e=t.dataset||{};for(const u of Object.keys(e))o[`data_${u}`]=e[u];const n=t.tagName.toLowerCase(),i=t.href||void 0,r=t,c=r.role||t.getAttribute("role")||void 0,a=r.name||t.getAttribute("name")||void 0,s=t.id||void 0,d=r.className||"";return{tag:n,id:s,role:c,name:a,href:i,text:h(t),class:typeof d=="string"?d:void 0,...o,path:typeof window<"u"?window.location.pathname:void 0}}function b(t){const o=t.tagName.toLowerCase();if(o==="button"||o==="a"||o==="label"||t.onclick)return!0;const e=t.getAttribute("role");return e==="button"||e==="link"||e==="menuitem"||t instanceof HTMLElement&&window.getComputedStyle(t).cursor==="pointer"}function w(t){const o=t.tagName.toLowerCase();if(o==="select")return!0;if(o==="input"){const e=t.type;return e==="checkbox"||e==="radio"||e==="range"||e==="color"}return!1}function k(t,o){const e=t.target;if(!e)return;const n=e.closest(`[${o}]`)||e;if(n.getAttribute("data-track-ignore")==="true"||!w(n)&&!n.hasAttribute(o))return;const r=n.getAttribute("data-component")||"form",c=n.getAttribute(o)||"change";let a;const s=n.tagName.toLowerCase();if(s==="select")a=n.value;else if(s==="input"){const l=n;l.type==="checkbox"||l.type==="radio"?a=l.checked:a=l.value}const u=n.name||n.getAttribute("name")||void 0;p(`interaction.${r}.${c}`,{...m(n),name:u,value:a})}function y(t,o){const e=t.target;if(!e)return;const n=e.closest(`[${o}]`)||e.closest('button, a, [role="button"], [role="link"], [data-action]')||e;if(!n||n.getAttribute("data-track-ignore")==="true"||!b(n))return;const r=n.getAttribute("data-component")||"ui",c=n.getAttribute(o)||"click";p(`interaction.${r}.${c}`,m(n))}function f(){p("page.view",{path:window.location.pathname,title:document.title})}function A(){f();const t=history.pushState,o=history.replaceState;history.pushState=function(e,n,i){const r=t.call(this,e,n,i);return queueMicrotask(f),r},history.replaceState=function(e,n,i){const r=o.call(this,e,n,i);return queueMicrotask(f),r},window.addEventListener("popstate",()=>f())}function v(t={}){if(typeof window>"u"||g)return;g=!0;const o=t.attribute||"data-track",e=t.clicks!==!1,n=t.pageviews!==!1,i=t.changes!==!1;e&&window.addEventListener("click",r=>y(r,o),{capture:!0}),n&&A(),i&&window.addEventListener("change",r=>k(r,o),{capture:!0})}export{v as e};
