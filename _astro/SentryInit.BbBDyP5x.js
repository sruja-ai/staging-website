import{p as yu,r as ke,g as Mg}from"./index.DM7nOceM.js";import{e as pn}from"./env.DcWn_g7b.js";function Ng(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const x=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,F=globalThis,Ct="10.32.1";function Ft(){return Zr(F),F}function Zr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Ct,t[Ct]=t[Ct]||{}}function _r(e,t,n=F){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[Ct]=r[Ct]||{};return o[e]||(o[e]=t())}const Ga=["debug","info","warn","error","log","assert","trace"],Og="Sentry Logger ",is={};function an(e){if(!("console"in F))return e();const t=F.console,n={},r=Object.keys(is);r.forEach(o=>{const s=is[o];n[o]=t[o],t[o]=s});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function Pg(){Ja().enabled=!0}function Lg(){Ja().enabled=!1}function Zd(){return Ja().enabled}function Dg(...e){Va("log",...e)}function $g(...e){Va("warn",...e)}function Fg(...e){Va("error",...e)}function Va(e,...t){x&&Zd()&&an(()=>{F.console[e](`${Og}[${e}]:`,...t)})}function Ja(){return x?_r("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:Pg,disable:Lg,isEnabled:Zd,log:Dg,warn:$g,error:Fg},ef=50,St="?",Su=/\(error: (.*)\)/,bu=/captureMessage|captureException/;function tf(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{const s=[],i=n.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const u=Su.test(c)?c.replace(Su,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){s.push(l);break}}if(s.length>=ef+o)break}}return Ug(s.slice(o))}}function Bg(e){return Array.isArray(e)?tf(...e):e}function Ug(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(bo(t).function||"")&&t.pop(),t.reverse(),bu.test(bo(t).function||"")&&(t.pop(),bu.test(bo(t).function||"")&&t.pop()),t.slice(0,ef).map(n=>({...n,filename:n.filename||bo(t).filename,function:n.function||St}))}function bo(e){return e[e.length-1]||{}}const Ti="<anonymous>";function Ot(e){try{return!e||typeof e!="function"?Ti:e.name||Ti}catch{return Ti}}function ra(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function nf(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Fo={},Eu={};function cn(e,t){Fo[e]=Fo[e]||[],Fo[e].push(t)}function un(e,t){if(!Eu[e]){Eu[e]=!0;try{t()}catch(n){x&&g.error(`Error while instrumenting ${e}`,n)}}}function Ze(e,t){const n=e&&Fo[e];if(n)for(const r of n)try{r(t)}catch(o){x&&g.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ot(r)}
Error:`,o)}}let Ii=null;function rf(e){const t="error";cn(t,e),un(t,Hg)}function Hg(){Ii=F.onerror,F.onerror=function(e,t,n,r,o){return Ze("error",{column:r,error:o,line:n,msg:e,url:t}),Ii?Ii.apply(this,arguments):!1},F.onerror.__SENTRY_INSTRUMENTED__=!0}let wi=null;function of(e){const t="unhandledrejection";cn(t,e),un(t,Wg)}function Wg(){wi=F.onunhandledrejection,F.onunhandledrejection=function(e){return Ze("unhandledrejection",e),wi?wi.apply(this,arguments):!0},F.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const sf=Object.prototype.toString;function At(e){switch(sf.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Pt(e,Error)}}function yr(e,t){return sf.call(e)===`[object ${t}]`}function af(e){return yr(e,"ErrorEvent")}function vu(e){return yr(e,"DOMError")}function jg(e){return yr(e,"DOMException")}function at(e){return yr(e,"String")}function Fs(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function tn(e){return e===null||Fs(e)||typeof e!="object"&&typeof e!="function"}function yt(e){return yr(e,"Object")}function Bs(e){return typeof Event<"u"&&Pt(e,Event)}function zg(e){return typeof Element<"u"&&Pt(e,Element)}function qg(e){return yr(e,"RegExp")}function $n(e){return!!(e?.then&&typeof e.then=="function")}function Gg(e){return yt(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Pt(e,t){try{return e instanceof t}catch{return!1}}function cf(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function Ka(e){return typeof Request<"u"&&Pt(e,Request)}const Ya=F,Vg=80;function ze(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||Vg;for(;n&&s++<r&&(u=Jg(n,d),!(u==="html"||s>1&&i+o.length*c+u.length>=l));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function Jg(e,t){const n=e,r=[];if(!n?.tagName)return"";if(Ya.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t?.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(o?.length)o.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&at(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const s=["aria-label","type","name","title","alt"];for(const i of s){const a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function Fn(){try{return Ya.document.location.href}catch{return""}}function uf(e){if(!Ya.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Me(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const o=n(r);typeof o=="function"&&lf(o,r);try{e[t]=o}catch{x&&g.log(`Failed to replace method "${t}" in object`,e)}}function Ce(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{x&&g.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function lf(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ce(e,"__sentry_original__",t)}catch{}}function Xa(e){return e.__sentry_original__}function df(e){if(At(e))return{message:e.message,name:e.name,stack:e.stack,...Iu(e)};if(Bs(e)){const t={type:e.type,target:Tu(e.target),currentTarget:Tu(e.currentTarget),...Iu(e)};return typeof CustomEvent<"u"&&Pt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Tu(e){try{return zg(e)?ze(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Iu(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Kg(e){const t=Object.keys(df(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function jr(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ki(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n=`'{snip} ${n}`),s<r&&(n+=" {snip}"),n}function as(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const o=e[r];try{cf(o)?n.push(nf(o)):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Bo(e,t,n=!1){return at(e)?qg(t)?t.test(e):at(t)?n?e===t:e.includes(t):!1:!1}function ct(e,t=[],n=!1){return t.some(r=>Bo(e,r,n))}function Yg(){const e=F;return e.crypto||e.msCrypto}let Ri;function Xg(){return Math.random()*16}function Re(e=Yg()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Ri||(Ri="10000000100040008000"+1e11),Ri.replace(/[018]/g,t=>(t^(Xg()&15)>>t/4).toString(16))}function ff(e){return e.exception?.values?.[0]}function gn(e){const{message:t,event_id:n}=e;if(t)return t;const r=ff(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function oa(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function Lt(e,t){const n=ff(e);if(!n)return;const r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){const s={...o?.data,...t.data};n.mechanism.data=s}}function Qg(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(i=>ki(i,0));const s=Math.min(r-1,o);t.context_line=ki(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(i=>ki(i,0))}function wu(e){if(Zg(e))return!0;try{Ce(e,"__sentry_captured__",!0)}catch{}return!1}function Zg(e){try{return e.__sentry_captured__}catch{}}const pf=1e3;function Bn(){return Date.now()/pf}function e_(){const{performance:e}=F;if(!e?.now||!e.timeOrigin)return Bn;const t=e.timeOrigin;return()=>(t+e.now())/pf}let ku;function me(){return(ku??(ku=e_()))()}let Ci;function t_(){const{performance:e}=F;if(!e?.now)return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=e.timing?.navigationStart,c=typeof i=="number"?Math.abs(i+n-r):t,u=c<t;return s||u?o<=c?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}function Pe(){return Ci||(Ci=t_()),Ci[0]}function n_(e){const t=me(),n={sid:Re(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>o_(n)};return e&&rr(n,e),n}function rr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||me(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Re()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function r_(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),rr(e,n)}function o_(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function eo(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=eo(r[o],t[o],n-1));return r}function bt(){return Re()}function xt(){return Re().substring(16)}const sa="_sentrySpan";function Et(e,t){t?Ce(e,sa,t):delete e[sa]}function or(e){return e[sa]}const s_=100;class lt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:bt(),sampleRand:Math.random()}}clone(){const t=new lt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Et(t,or(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&rr(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof lt?n.getScopeData():yt(n)?t:void 0,{tags:o,attributes:s,extra:i,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...o},this._attributes={...this._attributes,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Et(this,void 0),this._attachments=[],this.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:s_;if(r<=0)return this;const o={timestamp:Bn(),...t,message:t.message?jr(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:or(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=eo(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||Re();if(!this._client)return x&&g.warn("No client configured on scope - will not capture exception!"),r;const o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){const o=r?.event_id||Re();if(!this._client)return x&&g.warn("No client configured on scope - will not capture message!"),o;const s=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:o},this),o}captureEvent(t,n){const r=n?.event_id||Re();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(x&&g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function i_(){return _r("defaultCurrentScope",()=>new lt)}function a_(){return _r("defaultIsolationScope",()=>new lt)}class c_{constructor(t,n){let r;t?r=t:r=new lt;let o;n?o=n:o=new lt,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(o){throw this._popScope(),o}return $n(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function sr(){const e=Ft(),t=Zr(e);return t.stack=t.stack||new c_(i_(),a_())}function u_(e){return sr().withScope(e)}function l_(e,t){const n=sr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Ru(e){return sr().withScope(()=>e(sr().getIsolationScope()))}function d_(){return{withIsolationScope:Ru,withScope:u_,withSetScope:l_,withSetIsolationScope:(e,t)=>Ru(t),getCurrentScope:()=>sr().getScope(),getIsolationScope:()=>sr().getIsolationScope()}}function ln(e){const t=Zr(e);return t.acs?t.acs:d_()}function j(){const e=Ft();return ln(e).getCurrentScope()}function we(){const e=Ft();return ln(e).getIsolationScope()}function Mt(){return _r("globalScope",()=>new lt)}function qe(...e){const t=Ft(),n=ln(t);if(e.length===2){const[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function f_(...e){const t=Ft(),n=ln(t);if(e.length===2){const[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function M(){return j().getClient()}function hf(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,s={trace_id:n,span_id:o||xt()};return r&&(s.parent_span_id=r),s}const ie="sentry.source",Us="sentry.sample_rate",mf="sentry.previous_trace_sample_rate",de="sentry.op",z="sentry.origin",zr="sentry.idle_span_finish_reason",to="sentry.measurement_unit",no="sentry.measurement_value",ia="sentry.custom_span_name",Qa="sentry.profile_id",Sr="sentry.exclusive_time",p_="http.request.method",h_="url.full",m_="sentry.link.type",g_=0,Hs=1,Z=2;function gf(e){if(e<400&&e>=100)return{code:Hs};if(e>=400&&e<500)switch(e){case 401:return{code:Z,message:"unauthenticated"};case 403:return{code:Z,message:"permission_denied"};case 404:return{code:Z,message:"not_found"};case 409:return{code:Z,message:"already_exists"};case 413:return{code:Z,message:"failed_precondition"};case 429:return{code:Z,message:"resource_exhausted"};case 499:return{code:Z,message:"cancelled"};default:return{code:Z,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:Z,message:"unimplemented"};case 503:return{code:Z,message:"unavailable"};case 504:return{code:Z,message:"deadline_exceeded"};default:return{code:Z,message:"internal_error"}}return{code:Z,message:"internal_error"}}function qr(e,t){e.setAttribute("http.response.status_code",t);const n=gf(t);n.message!=="unknown_error"&&e.setStatus(n)}const _f="_sentryScope",yf="_sentryIsolationScope";function __(e){try{const t=F.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function y_(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function S_(e,t,n){e&&(Ce(e,yf,__(n)),Ce(e,_f,t))}function cs(e){const t=e;return{scope:t[_f],isolationScope:y_(t[yf])}}const Za="sentry-",b_=/^sentry-/,E_=8192;function ec(e){const t=v_(e);if(!t)return;const n=Object.entries(t).reduce((r,[o,s])=>{if(o.match(b_)){const i=o.slice(Za.length);r[i]=s}return r},{});if(Object.keys(n).length>0)return n}function Sf(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Za}${r}`]=o),n),{});return T_(t)}function v_(e){if(!(!e||!at(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Cu(n);return Object.entries(r).forEach(([o,s])=>{t[o]=s}),t},{}):Cu(e)}function Cu(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function T_(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=o===0?s:`${t},${s}`;return i.length>E_?(x&&g.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):i},"")}const I_=/^o(\d+)\./,w_=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function k_(e){return e==="http"||e==="https"}function Bt(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${i}`}function bf(e){const t=w_.exec(e);if(!t){an(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,o="",s="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Ef({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Ef(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function R_(e){if(!x)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(g.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?k_(r)?t&&isNaN(parseInt(t,10))?(g.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(g.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function C_(e){return e.match(I_)?.[1]}function vf(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=C_(n)),r}function Tf(e){const t=typeof e=="string"?bf(e):Ef(e);if(!(!t||!R_(t)))return t}function Rn(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const If=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function A_(e){if(!e)return;const t=e.match(If);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function wf(e,t){const n=A_(e),r=ec(t);if(!n?.traceId)return{traceId:bt(),sampleRand:Math.random()};const o=x_(n,r);r&&(r.sample_rand=o.toString());const{traceId:s,parentSpanId:i,parentSampled:a}=n;return{traceId:s,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:o}}function kf(e=bt(),t=xt(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Rf(e=bt(),t=xt(),n){return`00-${e}-${t}-${n?"01":"00"}`}function x_(e,t){const n=Rn(t?.sample_rand);if(n!==void 0)return n;const r=Rn(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function M_(e,t){const n=vf(e);return t&&n&&t!==n?(g.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(g.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const Cf=0,tc=1;let Au=!1;function N_(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a,links:c}=$(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a,links:c}}function Af(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:$(e).parent_span_id,s=cs(e).scope,i=r?s?.getPropagationContext().propagationSpanId||xt():t;return{parent_span_id:o,span_id:i,trace_id:n}}function xf(e){const{traceId:t,spanId:n}=e.spanContext(),r=dn(e);return kf(t,n,r)}function O_(e){const{traceId:t,spanId:n}=e.spanContext(),r=dn(e);return Rf(t,n,r)}function Mf(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:s})=>({span_id:t,trace_id:n,sampled:r===tc,attributes:s,...o}))}function Tn(e){return typeof e=="number"?xu(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?xu(e.getTime()):me()}function xu(e){return e>9999999999?e/1e3:e}function $(e){if(L_(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(P_(e)){const{attributes:r,startTime:o,name:s,endTime:i,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:s,parent_span_id:u,start_timestamp:Tn(o),timestamp:Tn(i)||void 0,status:Nf(a),op:r[de],origin:r[z],links:Mf(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function P_(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function L_(e){return typeof e.getSpanJSON=="function"}function dn(e){const{traceFlags:t}=e.spanContext();return t===tc}function Nf(e){if(!(!e||e.code===g_))return e.code===Hs?"ok":e.message||"internal_error"}const In="_sentryChildSpans",aa="_sentryRootSpan";function Of(e,t){const n=e[aa]||e;Ce(t,aa,n),e[In]?e[In].add(t):Ce(e,In,new Set([t]))}function D_(e,t){e[In]&&e[In].delete(t)}function $r(e){const t=new Set;function n(r){if(!t.has(r)&&dn(r)){t.add(r);const o=r[In]?Array.from(r[In]):[];for(const s of o)n(s)}}return n(e),Array.from(t)}function Se(e){return e[aa]||e}function be(){const e=Ft(),t=ln(e);return t.getActiveSpan?t.getActiveSpan():or(j())}function ca(){Au||(an(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Au=!0)}function $_(e,t){e.updateName(t),e.setAttributes({[ie]:"custom",[ia]:t})}let Mu=!1;function Pf(){if(Mu)return;function e(){const t=be(),n=t&&Se(t);if(n){const r="internal_error";x&&g.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:Z,message:r})}}e.tag="sentry_tracingErrorCallback",Mu=!0,rf(e),of(e)}function et(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||M()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Nu(e){g.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function us(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(B_(n)){if(Bo(e.description,n))return x&&Nu(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Bo(e.description,n.name):!0,o=n.op?e.op&&Bo(e.op,n.op):!0;if(r&&o)return x&&Nu(e),!0}return!1}function F_(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function B_(e){return typeof e=="string"||e instanceof RegExp}const Ws="production",Lf="_frozenDsc";function Uo(e,t){Ce(e,Lf,t)}function Df(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||Ws,release:n.release,public_key:r,trace_id:e,org_id:vf(t)};return t.emit("createDsc",o),o}function nc(e,t){const n=t.getPropagationContext();return n.dsc||Df(n.traceId,e)}function dt(e){const t=M();if(!t)return{};const n=Se(e),r=$(n),o=r.data,s=n.spanContext().traceState,i=s?.get("sentry.sample_rate")??o[Us]??o[mf];function a(h){return(typeof i=="number"||typeof i=="string")&&(h.sample_rate=`${i}`),h}const c=n[Lf];if(c)return a(c);const u=s?.get("sentry.dsc"),d=u&&ec(u);if(d)return a(d);const l=Df(e.spanContext().traceId,t),f=o[ie],p=r.description;return f!=="url"&&p&&(l.transaction=p),et()&&(l.sampled=String(dn(n)),l.sample_rand=s?.get("sentry.sample_rand")??cs(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function U_(e){const t=dt(e);return Sf(t)}class Dt{constructor(t={}){this._traceId=t.traceId||bt(),this._spanId=t.spanId||xt()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Cf}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function Je(e,t=100,n=1/0){try{return ua("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function $f(e,t=3,n=100*1024){const r=Je(e,t);return z_(r)>n?$f(e,t-1,n):r}function ua(e,t,n=1/0,r=1/0,o=q_()){const[s,i]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=H_(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return ua("",p,c-1,r,o)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=df(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=ua(p,h,c-1,r,o),l++}return i(t),d}function H_(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof globalThis<"u"&&t===globalThis)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(cf(t))return nf(t);if(Gg(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Ot(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=W_(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function W_(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function j_(e){return~-encodeURI(e).split(/%..|./).length}function z_(e){return j_(JSON.stringify(e))}function q_(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function pt(e,t=[]){return[e,t]}function G_(e,t){const[n,r]=e;return[n,[...r,t]]}function Cn(e,t){const n=e[1];for(const r of n){const o=r[0].type;if(t(r,o))return!0}return!1}function Ou(e,t){return Cn(e,(n,r)=>t.includes(r))}function ls(e){const t=Zr(F);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function V_(e){const t=Zr(F);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function ds(e){const[t,n]=e;let r=JSON.stringify(t);function o(s){typeof r=="string"?r=typeof s=="string"?r+s:[ls(r),s]:r.push(typeof s=="string"?ls(s):s)}for(const s of n){const[i,a]=s;if(o(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Je(a))}o(c)}}return typeof r=="string"?r:J_(r)}function J_(e){const t=e.reduce((o,s)=>o+s.length,0),n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function K_(e){let t=typeof e=="string"?ls(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(V_(n(i)))}const o=r(),s=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;s.push([i,a?n(a):r()])}return[o,s]}function Y_(e){return[{type:"span"},e]}function X_(e){const t=typeof e.data=="string"?ls(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Q_={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Pu(e){return Q_[e]}function js(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Ff(e,t,n,r){const o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Bt(r)},...o&&{trace:o}}}function Z_(e,t){if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function ey(e,t,n,r){const o=js(n),s={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Bt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return pt(s,[i])}function ty(e,t,n,r){const o=js(n),s=e.type&&e.type!=="replay_event"?e.type:"event";Z_(e,n?.sdk);const i=Ff(e,o,r,t);return delete e.sdkProcessingMetadata,pt(i,[[{type:s},e]])}function ny(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=dt(e[0]),o=t?.getDsn(),s=t?.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&o&&{dsn:Bt(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!us($(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);const l=a?p=>{const h=$(p),m=a(h);return m||(ca(),h)}:$,f=[];for(const p of u){const h=l(p);h&&f.push(Y_(h))}return pt(i,f)}function ry(e){if(!x)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=$(e),{spanId:o}=e.spanContext(),s=dn(e),i=Se(e),a=i===e,c=`[Tracing] Starting ${s?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=$(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}g.log(`${c}
  ${u.join(`
  `)}`)}function oy(e){if(!x)return;const{description:t="< unknown name >",op:n="< unknown op >"}=$(e),{spanId:r}=e.spanContext(),s=Se(e)===e,i=`[Tracing] Finishing "${n}" ${s?"root ":""}span "${t}" with ID ${r}`;g.log(i)}function Bf(e,t,n,r=be()){const o=r&&Se(r);o&&(x&&g.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[no]:t,[to]:n}))}function Lu(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},o=r[to],s=r[no];typeof o=="string"&&typeof s=="number"&&(t[n.name]={value:s,unit:o})}),t}const Du=1e3;class zs{constructor(t={}){this._traceId=t.traceId||bt(),this._spanId=t.spanId||xt(),this._startTime=t.startTimestamp||me(),this._links=t.links,this._attributes={},this.setAttributes({[z]:"manual",[de]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?tc:Cf}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Tn(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ie,"custom"),this}end(t){this._endTime||(this._endTime=Tn(t),oy(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[de],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Nf(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[z],profile_id:this._attributes[Qa],exclusive_time:this._attributes[Sr],measurements:Lu(this._events),is_segment:this._isStandaloneSpan&&Se(this)===this||void 0,segment_id:this._isStandaloneSpan?Se(this).spanContext().spanId:void 0,links:Mf(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){x&&g.log("[Tracing] Adding an event to span:",t);const o=$u(n)?n:r||me(),s=$u(n)?{}:n||{},i={name:t,time:Tn(o),attributes:s};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=M();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Se(this)))return;if(this._isStandaloneSpan){this._sampled?iy(ny([this],t)):(x&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(cs(this).scope||j()).captureEvent(r)}_convertSpanToTransaction(){if(!Fu($(this)))return;this._name||(x&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=cs(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const s=$r(this).filter(d=>d!==this&&!sy(d)).map(d=>$(d)).filter(Fu),i=this._attributes[ie];delete this._attributes[ia],s.forEach(d=>{delete d.data[ia]});const a={contexts:{trace:N_(this)},spans:s.length>Du?s.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Du):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:dt(this)},request:r,...i&&{transaction_info:{source:i}}},c=Lu(this._events);return c&&Object.keys(c).length&&(x&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function $u(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Fu(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function sy(e){return e instanceof zs&&e.isStandaloneSpan()}function iy(e){const t=M();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function qs(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(s){throw t(s),n(),s}return ay(o,t,n,r)}function ay(e,t,n,r){return $n(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function cy(e,t,n){if(!et(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);const s=Rn(o);if(s===void 0)return x&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!s)return x&&g.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,s,r];const i=n<s;return i||x&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[i,s,r]}const fs="__SENTRY_SUPPRESS_TRACING__";function Ut(e,t){const n=ro();if(n.startSpan)return n.startSpan(e,t);const r=oc(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i?.clone();return qe(a,()=>Wf(s)(()=>{const u=j(),d=sc(u,s),f=e.onlyIfParent&&!d?new Dt:rc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return Et(u,f),qs(()=>t(f),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Z,message:"internal_error"})},()=>{f.end()})}))}function kt(e,t){const n=ro();if(n.startSpanManual)return n.startSpanManual(e,t);const r=oc(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i?.clone();return qe(a,()=>Wf(s)(()=>{const u=j(),d=sc(u,s),f=e.onlyIfParent&&!d?new Dt:rc({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return Et(u,f),qs(()=>t(f,()=>f.end()),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Z,message:"internal_error"})})}))}function tt(e){const t=ro();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=oc(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?i=>qe(e.scope,i):o!==void 0?i=>An(o,i):i=>i())(()=>{const i=j(),a=sc(i,o);return e.onlyIfParent&&!a?new Dt:rc({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const uy=(e,t)=>{const n=Ft(),r=ln(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:o,baggage:s}=e,i=M(),a=ec(s);return i&&!M_(i,a?.org_id)?Hf(t):qe(c=>{const u=wf(o,s);return c.setPropagationContext(u),Et(c,void 0),t()})};function An(e,t){const n=ro();return n.withActiveSpan?n.withActiveSpan(e,t):qe(r=>(Et(r,e||void 0),t(r)))}function Uf(e){const t=ro();return t.suppressTracing?t.suppressTracing(e):qe(n=>{n.setSDKProcessingMetadata({[fs]:!0});const r=e();return n.setSDKProcessingMetadata({[fs]:void 0}),r})}function Hf(e){return qe(t=>(t.setPropagationContext({traceId:bt(),sampleRand:Math.random()}),x&&g.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),An(null,e)))}function rc({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!et()){const i=new Dt;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...dt(i)};Uo(i,a)}return i}const o=we();let s;if(e&&!n)s=ly(e,r,t),Of(e,s);else if(e){const i=dt(e),{traceId:a,spanId:c}=e.spanContext(),u=dn(e);s=Bu({traceId:a,parentSpanId:c,...t},r,u),Uo(s,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};s=Bu({traceId:i,parentSpanId:c,...t},r,u),a&&Uo(s,a)}return ry(s),S_(s,r,o),s}function oc(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Tn(e.startTime),delete r.startTime,r}return n}function ro(){const e=Ft();return ln(e)}function Bu(e,t,n){const r=M(),o=r?.getOptions()||{},{name:s=""}=e,i={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r?.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[fs]?[!1]:cy(o,{name:s,parentSampled:a,attributes:c,parentSampleRate:Rn(u.dsc?.sample_rate)},u.sampleRand),p=new zs({...e,attributes:{[ie]:"custom",[Us]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(x&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function ly(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=t.getScopeData().sdkProcessingMetadata[fs]?!1:dn(e),i=s?new zs({...n,parentSpanId:r,traceId:o,sampled:s}):new Dt({traceId:o});Of(e,i);const a=M();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function sc(e,t){if(t)return t;if(t===null)return;const n=or(e);if(!n)return;const r=M();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Se(n):n}function Wf(e){return e!==void 0?t=>An(e,t):t=>t()}const Ho={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},dy="heartbeatFailed",fy="idleTimeout",py="finalTimeout",hy="externalFinish";function jf(e,t={}){const n=new Map;let r=!1,o,s=hy,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Ho.idleTimeout,finalTimeout:u=Ho.finalTimeout,childSpanTimeout:d=Ho.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=M();if(!p||!et()){const b=new Dt,N={sample_rate:"0",sampled:"false",...dt(b)};return Uo(b,N),b}const h=j(),m=be(),_=my(e);_.end=new Proxy(_.end,{apply(b,N,B){if(l&&l(_),N instanceof Dt)return;const[T,...P]=B,A=T||me(),L=Tn(A),D=$r(_).filter(R=>R!==_),ee=$(_);if(!D.length||!f)return C(L),Reflect.apply(b,N,[L,...P]);const Y=p.getOptions().ignoreSpans,ne=D?.reduce((R,V)=>{const ae=$(V);return!ae.timestamp||Y&&us(ae,Y)?R:R?Math.max(R,ae.timestamp):ae.timestamp},void 0),I=ee.start_timestamp,q=Math.min(I?I+u/1e3:1/0,Math.max(I||-1/0,Math.min(L,ne||1/0)));return C(q),Reflect.apply(b,N,[q,...P])}});function y(){o&&(clearTimeout(o),o=void 0)}function E(b){y(),o=setTimeout(()=>{!r&&n.size===0&&i&&(s=fy,_.end(b))},c)}function w(b){o=setTimeout(()=>{!r&&i&&(s=dy,_.end(b))},d)}function v(b){y(),n.set(b,!0);const N=me();w(N+d/1e3)}function S(b){if(n.has(b)&&n.delete(b),n.size===0){const N=me();E(N+c/1e3)}}function C(b){r=!0,n.clear(),a.forEach(D=>D()),Et(h,m);const N=$(_),{start_timestamp:B}=N;if(!B)return;N.data[zr]||_.setAttribute(zr,s);const P=N.status;(!P||P==="unknown")&&_.setStatus({code:Hs}),g.log(`[Tracing] Idle span "${N.op}" finished`);const A=$r(_).filter(D=>D!==_);let L=0;A.forEach(D=>{D.isRecording()&&(D.setStatus({code:Z,message:"cancelled"}),D.end(b),x&&g.log("[Tracing] Cancelling span since span ended early",JSON.stringify(D,void 0,2)));const ee=$(D),{timestamp:Y=0,start_timestamp:ne=0}=ee,I=ne<=b,q=(u+c)/1e3,R=Y-ne<=q;if(x){const V=JSON.stringify(D,void 0,2);I?R||g.log("[Tracing] Discarding span since it finished after idle span final timeout",V):g.log("[Tracing] Discarding span since it happened after idle span was finished",V)}(!R||!I)&&(D_(_,D),L++)}),L>0&&_.setAttribute("sentry.idle_span_discarded_spans",L)}return a.push(p.on("spanStart",b=>{if(r||b===_||$(b).timestamp||b instanceof zs&&b.isStandaloneSpan())return;$r(_).includes(b)&&v(b.spanContext().spanId)})),a.push(p.on("spanEnd",b=>{r||S(b.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",b=>{b===_&&(i=!0,E(),n.size&&w())})),t.disableAutoFinish||E(),setTimeout(()=>{r||(_.setStatus({code:Z,message:"deadline_exceeded"}),s=py,_.end())},u),_}function my(e){const t=tt(e);return Et(j(),t),x&&g.log("[Tracing] Started span is an idle span"),t}const Ai=0,Uu=1,Hu=2;function Gs(e){return new Gr(t=>{t(e)})}function ic(e){return new Gr((t,n)=>{n(e)})}class Gr{constructor(t){this._state=Ai,this._handlers=[],this._runExecutor(t)}then(t,n){return new Gr((r,o)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(i){o(i)}},s=>{if(!n)o(s);else try{r(n(s))}catch(i){o(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Gr((n,r)=>{let o,s;return this.then(i=>{s=!1,o=i,t&&t()},i=>{s=!0,o=i,t&&t()}).then(()=>{if(s){r(o);return}n(o)})})}_executeHandlers(){if(this._state===Ai)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Uu&&n[1](this._value),this._state===Hu&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,i)=>{if(this._state===Ai){if($n(i)){i.then(r,o);return}this._state=s,this._value=i,this._executeHandlers()}},r=s=>{n(Uu,s)},o=s=>{n(Hu,s)};try{t(r,o)}catch(s){o(s)}}}function gy(e,t,n,r=0){try{const o=la(t,n,e,r);return $n(o)?o:Gs(o)}catch(o){return ic(o)}}function la(e,t,n,r){const o=n[r];if(!e||!o)return e;const s=o({...e},t);return x&&s===null&&g.log(`Event processor "${o.id||"?"}" dropped event`),$n(s)?s.then(i=>la(i,t,n,r+1)):la(s,t,n,r+1)}function _y(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;yy(e,t),r&&Ey(e,r),vy(e,n),Sy(e,o),by(e,s)}function ir(e,t){const{extra:n,tags:r,attributes:o,user:s,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:h,span:m}=t;Mr(e,"extra",n),Mr(e,"tags",r),Mr(e,"attributes",o),Mr(e,"user",s),Mr(e,"contexts",i),e.sdkProcessingMetadata=eo(e.sdkProcessingMetadata,c,2),a&&(e.level=a),h&&(e.transactionName=h),m&&(e.span=m),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function Mr(e,t,n){e[t]=eo(e[t],n,1)}function yy(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(s).length&&(e.contexts={...s,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function Sy(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function by(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Ey(e,t){e.contexts={trace:Af(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:dt(t),...e.sdkProcessingMetadata};const n=Se(t),r=$(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function vy(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let hn,Wu,ju,zt;function zf(e){const t=F._sentryDebugIds,n=F._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(zt&&r.length===Wu&&o.length===ju)return zt;Wu=r.length,ju=o.length,zt={},hn||(hn={});const s=(i,a)=>{for(const c of i){const u=a[c],d=hn?.[c];if(d&&zt&&u)zt[d[0]]=u,hn&&(hn[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const h=l[f]?.filename;if(h&&zt&&hn){zt[h]=u,hn[c]=[h,u];break}}}}};return t&&s(r,t),n&&s(o,n),zt}function Ty(e,t){const n=zf(e);if(!n)return[];const r=[];for(const o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function qf(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Re(),timestamp:t.timestamp||Bn()},u=n.integrations||e.integrations.map(_=>_.name);Iy(c,e),Ry(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&wy(c,e.stackParser);const d=Ay(r,n.captureContext);n.mechanism&&Lt(c,n.mechanism);const l=o?o.getEventProcessors():[],f=Mt().getScopeData();if(s){const _=s.getScopeData();ir(f,_)}if(d){const _=d.getScopeData();ir(f,_)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),_y(c,f);const h=[...l,...f.eventProcessors];return gy(h,c,n).then(_=>(_&&ky(_),typeof i=="number"&&i>0?Cy(_,i,a):_))}function Iy(e,t){const{environment:n,release:r,dist:o,maxValueLength:s}=t;e.environment=e.environment||n||Ws,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);const i=e.request;i?.url&&s&&(i.url=jr(i.url,s)),s&&e.exception?.values?.forEach(a=>{a.value&&(a.value=jr(a.value,s))})}function wy(e,t){const n=zf(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function ky(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function Ry(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function Cy(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Je(o.data,t,n)}}))},...e.user&&{user:Je(e.user,t,n)},...e.contexts&&{contexts:Je(e.contexts,t,n)},...e.extra&&{extra:Je(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Je(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Je(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Je(e.contexts.flags,3,n)),r}function Ay(e,t){if(!t)return e;const n=e?e.clone():new lt;return n.update(t),n}function xy(e){if(e)return My(e)?{captureContext:e}:Oy(e)?{captureContext:e}:e}function My(e){return e instanceof lt||typeof e=="function"}const Ny=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Oy(e){return Object.keys(e).some(t=>Ny.includes(t))}function ge(e,t){return j().captureException(e,xy(t))}function Gf(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return j().captureMessage(e,n,r)}function br(e,t){return j().captureEvent(e,t)}function ac(e,t){we().setContext(e,t)}function Py(e){we().setExtras(e)}function Ly(e,t){we().setExtra(e,t)}function Dy(e){we().setTags(e)}function $y(e,t){we().setTag(e,t)}function Fy(e){we().setUser(e)}function Vf(){return we().lastEventId()}async function By(e){const t=M();return t?t.flush(e):(x&&g.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Uy(e){const t=M();return t?t.close(e):(x&&g.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Hy(){return!!M()}function Jf(){const e=M();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function Kf(e){we().addEventProcessor(e)}function da(e){const t=we(),n=j(),{userAgent:r}=F.navigator||{},o=n_({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),s=t.getSession();return s?.status==="ok"&&rr(s,{status:"exited"}),cc(),t.setSession(o),o}function cc(){const e=we(),n=j().getSession()||e.getSession();n&&r_(n),Yf(),e.setSession()}function Yf(){const e=we(),t=M(),n=e.getSession();n&&t&&t.captureSession(n)}function fa(e=!1){if(e){cc();return}Yf()}const Wy="7";function Xf(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function jy(e){return`${Xf(e)}${e.projectId}/envelope/`}function zy(e,t){const n={sentry_version:Wy};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function Qf(e,t,n){return t||`${jy(e)}?${zy(e,n)}`}function qy(e,t){const n=Tf(e);if(!n)return"";const r=`${Xf(n)}embed/error-page/`;let o=`dsn=${Bt(n)}`;for(const s in t)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const i=t.user;if(!i)continue;i.name&&(o+=`&name=${encodeURIComponent(i.name)}`),i.email&&(o+=`&email=${encodeURIComponent(i.email)}`)}else o+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${o}`}const zu=[];function Gy(e){const t={};return e.forEach(n=>{const{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function Vy(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return Gy(r)}function Jy(e,t){const n={};return t.forEach(r=>{r&&Zf(e,r,n)}),n}function qu(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Zf(e,t,n){if(n[t.name]){x&&g.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!zu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),zu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,s)=>r(o,s,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),o=Object.assign((s,i)=>r(s,i,e),{id:t.name});e.addEventProcessor(o)}x&&g.log(`Integration installed: ${t.name}`)}function pa(e){const t=M();if(!t){x&&g.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Ky(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function Yy(e,t){const{value:n,unit:r}=Ky(e)?e:{value:e,unit:void 0},o=Xy(n),s=r&&typeof r=="string"?{unit:r}:{};if(o)return{...o,...s};if(!t)return;let i="";try{i=JSON.stringify(n)??""}catch{}return{value:i,type:"string",...s}}function Gu(e,t=!1){const n={};for(const[r,o]of Object.entries(e)){const s=Yy(o,t);s&&(n[r]=s)}return n}function Xy(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function ep(e,t){return t?qe(t,()=>{const n=be(),r=n?Af(n):hf(t);return[n?dt(n):nc(e,t),r]}):[void 0,void 0]}const Qy={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function Zy(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function eS(e,t,n,r){const o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Bt(r)),pt(o,[Zy(e)])}const tS=100;function gt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function nS(e,t){const n=lc(),r=tp(e);r===void 0?n.set(e,[t]):r.length>=tS?(uc(e,r),n.set(e,[t])):n.set(e,[...r,t])}function ps(e,t=j(),n=nS){const r=t?.getClient()??M();if(!r){x&&g.warn("No client available to capture log.");return}const{release:o,environment:s,enableLogs:i=!1,beforeSendLog:a}=r.getOptions();if(!i){x&&g.warn("logging option not enabled, log will not be captured.");return}const[,c]=ep(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=rS(t);gt(u,"user.id",d,!1),gt(u,"user.email",l,!1),gt(u,"user.name",f,!1),gt(u,"sentry.release",o),gt(u,"sentry.environment",s);const{name:h,version:m}=r.getSdkMetadata()?.sdk??{};gt(u,"sentry.sdk.name",h),gt(u,"sentry.sdk.version",m);const _=r.getIntegrationByName("Replay"),y=_?.getReplayId(!0);gt(u,"sentry.replay_id",y),y&&_?.getRecordingMode()==="buffer"&&gt(u,"sentry._internal.replay_is_buffering",!0);const E=e.message;if(Fs(E)){const{__sentry_template_string__:P,__sentry_template_values__:A=[]}=E;A?.length&&(u["sentry.message.template"]=P),A.forEach((L,D)=>{u[`sentry.message.parameter.${D}`]=L})}const w=or(t);gt(u,"sentry.trace.parent_span_id",w?.spanContext().spanId);const v={...e,attributes:u};r.emit("beforeCaptureLog",v);const S=a?an(()=>a(v)):v;if(!S){r.recordDroppedEvent("before_send","log_item",1),x&&g.warn("beforeSendLog returned null, log will not be captured.");return}const{level:C,message:b,attributes:N={},severityNumber:B}=S,T={timestamp:me(),level:C,body:b,trace_id:c?.trace_id,severity_number:B??Qy[C],attributes:{...Gu(p),...Gu(N,!0)}};n(r,T),r.emit("afterCaptureLog",S)}function uc(e,t){const n=t??tp(e)??[];if(n.length===0)return;const r=e.getOptions(),o=eS(n,r._metadata,r.tunnel,e.getDsn());lc().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function tp(e){return lc().get(e)}function rS(e){const t=Mt().getScopeData();return ir(t,we().getScopeData()),ir(t,e.getScopeData()),t}function lc(){return _r("clientToLogBufferMap",()=>new WeakMap)}function oS(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function sS(e,t,n,r){const o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Bt(r)),pt(o,[oS(e)])}const iS=1e3;function aS(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function Tt(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function cS(e,t){const n=fc(),r=np(e);r===void 0?n.set(e,[t]):r.length>=iS?(dc(e,r),n.set(e,[t])):n.set(e,[...r,t])}function uS(e,t,n){const{release:r,environment:o}=t.getOptions(),s={...e.attributes},{user:{id:i,email:a,username:c}}=fS(n);Tt(s,"user.id",i,!1),Tt(s,"user.email",a,!1),Tt(s,"user.name",c,!1),Tt(s,"sentry.release",r),Tt(s,"sentry.environment",o);const{name:u,version:d}=t.getSdkMetadata()?.sdk??{};Tt(s,"sentry.sdk.name",u),Tt(s,"sentry.sdk.version",d);const l=t.getIntegrationByName("Replay"),f=l?.getReplayId(!0);return Tt(s,"sentry.replay_id",f),f&&l?.getRecordingMode()==="buffer"&&Tt(s,"sentry._internal.replay_is_buffering",!0),{...e,attributes:s}}function lS(e,t,n){const r={};for(const c in e.attributes)e.attributes[c]!==void 0&&(r[c]=aS(e.attributes[c]));const[,o]=ep(t,n),s=or(n),i=s?s.spanContext().traceId:o?.trace_id,a=s?s.spanContext().spanId:void 0;return{timestamp:me(),trace_id:i??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:r}}function dS(e,t){const n=t?.scope??j(),r=t?.captureSerializedMetric??cS,o=n?.getClient()??M();if(!o){x&&g.warn("No client available to capture metric.");return}const{_experiments:s,enableMetrics:i,beforeSendMetric:a}=o.getOptions();if(!(i??s?.enableMetrics??!0)){x&&g.warn("metrics option not enabled, metric will not be captured.");return}const u=uS(e,o,n);o.emit("processMetric",u);const d=a||s?.beforeSendMetric,l=d?d(u):u;if(!l){x&&g.log("`beforeSendMetric` returned `null`, will not send metric.");return}const f=lS(l,o,n);x&&g.log("[Metric]",f),r(o,f),o.emit("afterCaptureMetric",l)}function dc(e,t){const n=t??np(e)??[];if(n.length===0)return;const r=e.getOptions(),o=sS(n,r._metadata,r.tunnel,e.getDsn());fc().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function np(e){return fc().get(e)}function fS(e){const t=Mt().getScopeData();return ir(t,we().getScopeData()),ir(t,e.getScopeData()),t}function fc(){return _r("clientToMetricBufferMap",()=>new WeakMap)}const pc=Symbol.for("SentryBufferFullError");function hc(e=100){const t=new Set;function n(){return t.size<e}function r(i){t.delete(i)}function o(i){if(!n())return ic(pc);const a=i();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function s(i){if(!t.size)return Gs(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!i)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:s}}const pS=60*1e3;function rp(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?pS:r-t}function hS(e,t){return e[t]||e.all||0}function op(e,t,n=Date.now()){return hS(e,t)>n}function sp(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n?.["x-sentry-rate-limits"],i=n?.["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else i?o.all=r+rp(i,r):t===429&&(o.all=r+60*1e3);return o}const ip=64;function ap(e,t,n=hc(e.bufferSize||ip)){let r={};const o=i=>n.drain(i);function s(i){const a=[];if(Cn(i,(l,f)=>{const p=Pu(f);op(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=pt(i[0],a),u=l=>{Cn(c,(f,p)=>{e.recordDroppedEvent(l,Pu(p))})},d=()=>t({body:ds(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&x&&g.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=sp(r,l),l),l=>{throw u("network_error"),x&&g.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===pc)return x&&g.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:s,flush:o}}function mS(e,t,n){const r=[{type:"client_report"},{timestamp:Bn(),discarded_events:e}];return pt(t?{dsn:t}:{},[r])}function cp(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function gS(e){const{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:s,data:i,op:a}=e.contexts?.trace??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:s,profile_id:i?.[Qa],exclusive_time:i?.[Sr],measurements:e.measurements,is_segment:!0}}function _S(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Qa]:e.profile_id},...e.exclusive_time&&{[Sr]:e.exclusive_time}}}},measurements:e.measurements}}const Vu="Not capturing exception because it's already been captured.",Ju="Discarded session because of missing or non-string release",up=Symbol.for("SentryInternalError"),lp=Symbol.for("SentryDoNotSendEventError"),yS=5e3;function Wo(e){return{message:e,[up]:!0}}function xi(e){return{message:e,[lp]:!0}}function Ku(e){return!!e&&typeof e=="object"&&up in e}function Yu(e){return!!e&&typeof e=="object"&&lp in e}function Xu(e,t,n,r,o){let s=0,i,a=!1;e.on(n,()=>{s=0,clearTimeout(i),a=!1}),e.on(t,c=>{s+=r(c),s>=8e5?o(e):a||(a=!0,i=setTimeout(()=>{o(e)},yS))}),e.on("flush",()=>{o(e)})}class SS{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=hc(t.transportOptions?.bufferSize??ip),t.dsn?this._dsn=Tf(t.dsn):x&&g.warn("No DSN provided, client will not send events."),this._dsn){const r=Qf(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Xu(this,"afterCaptureLog","flushLogs",TS,uc),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Xu(this,"afterCaptureMetric","flushMetrics",vS,dc)}captureException(t,n,r){const o=Re();if(wu(t))return x&&g.log(Vu),o;const s={event_id:o,...n};return this._process(()=>this.eventFromException(t,s).then(i=>this._captureEvent(i,s,r)).then(i=>i),"error"),s.event_id}captureMessage(t,n,r,o){const s={event_id:Re(),...r},i=Fs(t)?t:String(t),a=tn(t),c=a?this.eventFromMessage(i,n,s):this.eventFromException(t,s);return this._process(()=>c.then(u=>this._captureEvent(u,s,o)),a?"unknown":"error"),s.event_id}captureEvent(t,n,r){const o=Re();if(n?.originalException&&wu(n.originalException))return x&&g.log(Vu),o;const s={event_id:o,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=Qu(t.type);return this._process(()=>this._captureEvent(t,s,a||r,c),u),s.event_id}captureSession(t){this.sendSession(t),rr(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Zf(this,t,this._integrations),n||qu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=ty(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=G_(r,X_(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){const{release:n,environment:r=Ws}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){x&&g.warn(Ju);return}s.release=s.release||n,s.environment=s.environment||r,t.attrs=s}else{if(!t.release&&!n){x&&g.warn(Ju);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const o=ey(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const o=`${t}:${n}`;x&&g.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,o=(...s)=>n(...s);return r.add(o),()=>{r.delete(o)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return x&&g.error("Error while sending envelope:",n),{}}return x&&g.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Jy(this,t),qu(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1;const s=n.exception?.values;if(s){o=!0,r=!1;for(const c of s)if(c.mechanism?.handled===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(rr(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){const s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i?.length&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),qf(s,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:hf(r),...a.contexts};const c=nc(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=j(),o=we()){return x&&ha(t)&&g.log(`Captured error event \`${cp(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(s=>s.event_id,s=>{x&&(Yu(s)?g.log(s.message):Ku(s)?g.warn(s.message):g.warn(s))})}_processEvent(t,n,r,o){const s=this.getOptions(),{sampleRate:i}=s,a=dp(t),c=ha(t),d=`before send for type \`${t.type||"error"}\``,l=typeof i>"u"?void 0:Rn(i);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),ic(xi(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const f=Qu(t.type);return this._prepareEvent(t,n,r,o).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),xi("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=ES(this,s,p,n);return bS(m,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw xi(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||o.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const _=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,y=p.spans?p.spans.length:0,E=_-y;E>0&&this.recordDroppedEvent("before_send","span",E)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const _="custom";p.transaction_info={...m,source:_}}return this.sendEvent(p,n),p}).then(null,p=>{throw Yu(p)||Ku(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Wo(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===pc&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[o,s]=n.split(":");return{reason:o,category:s,quantity:r}})}_flushOutcomes(){x&&g.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){x&&g.log("No outcomes to send");return}if(!this._dsn){x&&g.log("No dsn provided, will not send outcomes");return}x&&g.log("Sending outcomes:",t);const n=mS(t,this._options.tunnel&&Bt(this._dsn));this.sendEnvelope(n)}}function Qu(e){return e==="replay_event"?"replay":e||"error"}function bS(e,t){const n=`${t} must return \`null\` or a valid event.`;if($n(e))return e.then(r=>{if(!yt(r)&&r!==null)throw Wo(n);return r},r=>{throw Wo(`${t} rejected with ${r}`)});if(!yt(e)&&e!==null)throw Wo(n);return e}function ES(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(ha(c)&&o)return o(c,r);if(dp(c)){if(i||a){const u=gS(c);if(a?.length&&us(u,a))return null;if(i){const d=i(u);d?c=eo(n,_S(d)):ca()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a?.length&&us(p,a)){F_(l,p);continue}if(i){const h=i(p);h?d.push(h):(ca(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(s){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return s(c,r)}}return c}function ha(e){return e.type===void 0}function dp(e){return e.type==="transaction"}function vS(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+fp(e.attributes)}function TS(e){let t=0;return e.message&&(t+=e.message.length*2),t+fp(e.attributes)}function fp(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Zu(n[0]):tn(n)?t+=Zu(n):t+=100}),t}function Zu(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function IS(e,t){t.debug===!0&&(x?g.enable():an(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),j().update(t.initialScope);const r=new e(t);return pp(r),r.init(),r}function pp(e){j().setClient(e)}const Mi=100,Ni=5e3,wS=36e5;function kS(e){function t(...n){x&&g.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const o=n.createStore(n);let s=Ni,i;function a(l,f,p){return Ou(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await o.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(s),s=Math.min(s*2,wS))}async function d(l,f=!1){if(!f&&Ou(l,["replay_event","replay_recording"]))return await o.push(l),c(Mi),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const p=await r.send(l);let h=Mi;if(p){if(p.headers?.["retry-after"])h=rp(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])h=6e4;else if((p.statusCode||0)>=400)return p}return c(h),s=Ni,p}catch(p){if(await a(l,p,s))return f?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(s=Ni,c(Mi)),r.flush(l))}}}const jo="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function hp(e,t){let n;return Cn(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function RS(e,t){return n=>{const r=e(n);return{...r,send:async o=>{const s=hp(o,["event","transaction","profile","replay_event"]);return s&&(s.release=t),r.send(o)}}}}function CS(e,t){return pt(t?{...e[0],dsn:t}:e[0],e[1])}function AS(e,t){return n=>{const r=e(n),o=new Map,s=t||(u=>{const d=u.getEvent();return d?.extra?.[jo]&&Array.isArray(d.extra[jo])?d.extra[jo]:[]});function i(u,d){const l=d?`${u}:${d}`:u;let f=o.get(l);if(!f){const p=bf(u);if(!p)return;const h=Qf(p,n.tunnel);f=d?RS(e,d)({...n,url:h}):e({...n,url:h}),o.set(l,f)}return[u,f]}async function a(u){function d(h){const m=h?.length?h:["event"];return hp(u,m)}const l=s({envelope:u,getEvent:d}).map(h=>typeof h=="string"?i(h,void 0):i(h.dsn,h.release)).filter(h=>!!h),f=l.length?l:[["",r]];return(await Promise.all(f.map(([h,m])=>m.send(CS(u,h)))))[0]}async function c(u){const d=[...o.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const xS="thismessage:/";function mc(e){return"isRelative"in e}function gc(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?xS:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function MS(e){if(mc(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function wn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function mp(e){return e.split(/[?#]/,1)[0]}function gp(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return OS(e,n)||NS(e,r)}function NS(e,t){return t?el(e)===el(t):!1}function OS(e,t){const n=gc(e);return!n||mc(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function el(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function _p(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const PS=_p;function LS(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function yp(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:Ct})),version:Ct}),e._metadata=o}function _c(e={}){const t=e.client||M();if(!Jf()||!t)return{};const n=Ft(),r=ln(n);if(r.getTraceData)return r.getTraceData(e);const o=e.scope||j(),s=e.span||be(),i=s?xf(s):DS(o),a=s?dt(s):nc(t,o),c=Sf(a);if(!If.test(i))return g.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":i,baggage:c};return e.propagateTraceparent&&(d.traceparent=s?O_(s):$S(o)),d}function DS(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return kf(t,r,n)}function $S(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Rf(t,r,n)}function FS(e,t,n){let r,o,s;const i=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),s!==void 0&&clearTimeout(s),o=s=void 0}function d(){return o!==void 0||s!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),i&&s===void 0&&(s=a(c,i)),r}return l.cancel=u,l.flush=d,l}const BS=100;function ft(e,t){const n=M(),r=we();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=BS}=n.getOptions();if(s<=0)return;const a={timestamp:Bn(),...e},c=o?an(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,s))}let tl;const US="FunctionToString",nl=new WeakMap,HS=(()=>({name:US,setupOnce(){tl=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Xa(this),n=nl.has(M())&&t!==void 0?t:this;return tl.apply(n,e)}}catch{}},setup(e){nl.set(e,!0)}})),Sp=HS,WS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],jS="EventFilters",bp=(e={})=>{let t;return{name:jS,setup(n){const r=n.getOptions();t=rl(e,r)},processEvent(n,r,o){if(!t){const s=o.getOptions();t=rl(e,s)}return zS(n,t)?null:n}}},Ep=((e={})=>({...bp(e),name:"InboundFilters"}));function rl(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:WS],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function zS(e,t){if(e.type){if(e.type==="transaction"&&GS(e,t.ignoreTransactions))return x&&g.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${gn(e)}`),!0}else{if(qS(e,t.ignoreErrors))return x&&g.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${gn(e)}`),!0;if(YS(e))return x&&g.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${gn(e)}`),!0;if(VS(e,t.denyUrls))return x&&g.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${gn(e)}.
Url: ${hs(e)}`),!0;if(!JS(e,t.allowUrls))return x&&g.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${gn(e)}.
Url: ${hs(e)}`),!0}return!1}function qS(e,t){return t?.length?cp(e).some(n=>ct(n,t)):!1}function GS(e,t){if(!t?.length)return!1;const n=e.transaction;return n?ct(n,t):!1}function VS(e,t){if(!t?.length)return!1;const n=hs(e);return n?ct(n,t):!1}function JS(e,t){if(!t?.length)return!0;const n=hs(e);return n?ct(n,t):!0}function KS(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function hs(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?KS(n):null}catch{return x&&g.error(`Cannot extract url for event ${gn(e)}`),null}}function YS(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function XS(e,t,n,r,o,s){if(!o.exception?.values||!s||!Pt(s.originalException,Error))return;const i=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;i&&(o.exception.values=ma(e,t,r,s.originalException,n,o.exception.values,i,0))}function ma(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(Pt(r[o],Error)){ol(i,a);const u=e(t,r[o]),d=c.length;sl(u,o,d,a),c=ma(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Pt(u,Error)){ol(i,a);const l=e(t,u),f=c.length;sl(l,`errors[${d}]`,f,a),c=ma(e,t,n,u,o,[l,...c],l,f)}}),c}function ol(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function sl(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const vp=new Map,il=new Set;function QS(e){if(F._sentryModuleMetadata)for(const t of Object.keys(F._sentryModuleMetadata)){const n=F._sentryModuleMetadata[t];if(il.has(t))continue;il.add(t);const r=e(t);for(const o of r.reverse())if(o.filename){vp.set(o.filename,n);break}}}function ZS(e,t){return QS(e),vp.get(t)}function Tp(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;const o=ZS(e,r.filename);o&&(r.module_metadata=o)})})}function Ip(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}const eb=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Cn(t,(n,r)=>{if(r==="event"){const o=Array.isArray(n)?n[1]:void 0;o&&(Ip(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;Tp(n,t)})}});function yc(e){const t="console";cn(t,e),un(t,tb)}function tb(){"console"in F&&Ga.forEach(function(e){e in F.console&&Me(F.console,e,function(t){return is[e]=t,function(...n){Ze("console",{args:n,level:e}),is[e]?.apply(F.console,n)}})})}function ms(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const nb="CaptureConsole",rb=((e={})=>{const t=e.levels||Ga,n=e.handled??!0;return{name:nb,setup(r){"console"in F&&yc(({args:o,level:s})=>{M()!==r||!t.includes(s)||sb(o,s,n)})}}}),ob=rb;function sb(e,t,n){const r=ms(t),o=new Error,s={level:ms(t),extra:{arguments:e}};qe(i=>{if(i.addEventProcessor(u=>(u.logger="console",Lt(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){const u=`Assertion failed: ${as(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),i.captureMessage(u,r,{captureContext:s,syntheticException:o})}return}const a=e.find(u=>u instanceof Error);if(a){ge(a,s);return}const c=as(e," ");i.captureMessage(c,r,{captureContext:s,syntheticException:o})})}const ib="Dedupe",ab=(()=>{let e;return{name:ib,processEvent(t){if(t.type)return t;try{if(cb(t,e))return x&&g.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),wp=ab;function cb(e,t){return t?!!(ub(e,t)||lb(e,t)):!1}function ub(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Rp(e,t)||!kp(e,t))}function lb(e,t){const n=al(t),r=al(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Rp(e,t)||!kp(e,t))}function kp(e,t){let n=ra(e),r=ra(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){const s=r[o],i=n[o];if(s.filename!==i.filename||s.lineno!==i.lineno||s.colno!==i.colno||s.function!==i.function)return!1}return!0}function Rp(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function al(e){return e.exception?.values?.[0]}const db="ExtraErrorData",fb=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:db,processEvent(r,o,s){const{maxValueLength:i}=s.getOptions();return hb(r,o,t,n,i)}}}),pb=fb;function hb(e,t={},n,r,o){if(!t.originalException||!At(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=Cp(t.originalException,r,o);if(i){const a={...e.contexts},c=Je(i,n);return yt(c)&&(Ce(c,"__sentry_skip_normalization__",!0),a[s]=c),{...e,contexts:a}}return e}function Cp(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const s of Object.keys(e)){if(r.indexOf(s)!==-1)continue;const i=e[s];o[s]=At(i)||typeof i=="string"?n?jr(`${i}`,n):`${i}`:i}if(t&&e.cause!==void 0)if(At(e.cause)){const s=e.cause.name||e.cause.constructor.name;o.cause={[s]:Cp(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){const s=e.toJSON();for(const i of Object.keys(s)){const a=s[i];o[i]=At(a)?a.toString():a}}return o}catch(r){x&&g.error("Unable to extract extra data from the Error object:",r)}return null}function mb(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const gb=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function _b(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=gb.exec(t);return n?n.slice(1):[]}function cl(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=mb(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function ul(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function yb(e,t){e=cl(e).slice(1),t=cl(t).slice(1);const n=ul(e.split("/")),r=ul(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){s=a;break}let i=[];for(let a=s;a<n.length;a++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}function Sb(e,t){return _b(e)[2]||""}const bb="RewriteFrames",Eb=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in F&&!!F.window,o=e.iteratee||vb({isBrowser:r,root:t,prefix:n});function s(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:bb,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=s(c)),c}}};function vb({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(o||s){const i=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?yb(t,i):Sb(i);r.filename=`${n}${a}`}return r}}const Tb=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Ib=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],wb={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Ap=["select","insert","upsert","update","delete"];function Vs(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Js(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function kb(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Rb(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&wb[n]||"filter",`${o}(${e}, ${r.join(".")})`}function ll(e,t=!1){return new Proxy(e,{apply(n,r,o){return Ut({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[z]:"auto.db.supabase",[de]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},s=>Reflect.apply(n,r,o).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(s.setStatus({code:Z}),ge(i.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):s.setStatus({code:Hs}),s.end(),i)).catch(i=>{throw s.setStatus({code:Z}),s.end(),ge(i,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),i}).then(...o))}})}function Cb(e){const t=e.auth;if(!(!t||Js(e.auth))){for(const n of Tb){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=ll(r))}for(const n of Ib){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=ll(r,!0))}Vs(e.auth)}}function Ab(e){Js(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const o=Reflect.apply(t,n,r),s=o.constructor;return Mb(s),o}}),Vs(e.prototype.from))}function xb(e){Js(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){const o=Ap,s=n,i=kb(s.method,s.headers);if(!o.includes(i)||!s?.url?.pathname||typeof s.url.pathname!="string")return Reflect.apply(t,n,r);const a=s.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[p,h]of s.url.searchParams.entries())u.push(Rb(p,h));const d=Object.create(null);if(yt(s.body))for(const[p,h]of Object.entries(s.body))d[p]=h;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":s.schema,"db.url":s.url.origin,"db.sdk":s.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[z]:"auto.db.supabase",[de]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),Ut({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(h=>{if(p&&(h&&typeof h=="object"&&"status"in h&&qr(p,h.status||500),p.end()),h.error){const y=new Error(h.error.message);h.error.code&&(y.code=h.error.code),h.error.details&&(y.details=h.error.details);const E={};u.length&&(E.query=u),Object.keys(d).length&&(E.body=d),ge(y,w=>(w.addEventProcessor(v=>(Lt(v,{handled:!1,type:"auto.db.supabase.postgres"}),v)),w.setContext("supabase",E),w))}const m={type:"supabase",category:`db.${i}`,message:l},_={};return u.length&&(_.query=u),Object.keys(d).length&&(_.body=d),Object.keys(_).length&&(m.data=_),ft(m),h},h=>{throw p&&(qr(p,500),p.end()),h}).then(...r))}}),Vs(e.prototype.then))}function Mb(e){for(const t of Ap)Js(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){const s=Reflect.apply(n,r,o),i=s.constructor;return x&&g.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),xb(i),s}}),Vs(e.prototype[t]))}const xp=e=>{if(!e){x&&g.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;Ab(t),Cb(e)},Nb="Supabase",Ob=(e=>({setupOnce(){xp(e)},name:Nb})),Pb=e=>Ob(e.supabaseClient),Lb=10,Db="ZodErrors";function $b(e){return At(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function Fb(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Bb(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function Ub(e){const t=new Set;for(const r of e.issues){const o=Bb(r.path);o.length>0&&t.add(o)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${jr(n.join(", "),100)}`}function Hb(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!$b(r.originalException)||r.originalException.issues.length===0)return n;try{const s=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Fb);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:s})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:Ub(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":s.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}const Wb=((e={})=>{const t=e.limit??Lb;return{name:Db,processEvent(n,r){return Hb(t,e.saveZodIssuesAsAttachment,n,r)}}}),jb=Wb,zb=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{Cn(n,(r,o)=>{if(o==="event"){const s=Array.isArray(r)?r[1]:void 0;s&&(Ip(s),r[1]=s)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;Tp(r,n)})},processEvent(t){const n=qb(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](s=>!s.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function qb(e){const t=ra(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(dl)).map(r=>r.slice(dl.length)):[])}const dl="_sentryBundlerPluginAppKey:",Gb=100,Vb=10,Eo="flag.evaluation.";function Er(e){const n=j().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function xn(e,t,n=Gb){const r=j().getScopeData().contexts;r.flags||(r.flags={values:[]});const o=r.flags.values;Jb(o,e,t,n)}function Jb(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){x&&g.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const o=e.findIndex(s=>s.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function Mn(e,t,n=Vb){if(typeof t!="boolean")return;const r=be();if(!r)return;const o=$(r).data;if(`${Eo}${e}`in o){r.setAttribute(`${Eo}${e}`,t);return}Object.keys(o).filter(i=>i.startsWith(Eo)).length<n&&r.setAttribute(`${Eo}${e}`,t)}const Kb=()=>({name:"FeatureFlags",processEvent(e,t,n){return Er(e)},addFeatureFlag(e,t){xn(e,t),Mn(e,t)}}),Yb=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Me(t,"isOn",fl),typeof t.getFeatureValue=="function"&&Me(t,"getFeatureValue",fl)},processEvent(t,n,r){return Er(t)}});function fl(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(xn(n,r),Mn(n,r)),r}}function Xb(e,t,n,r,o){if(!e.fetchData)return;const{method:s,url:i}=e.fetchData,a=et()&&t(i);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(eE(h,e),Qb(h,e,o),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!be(),l=a&&d?tt(nE(i,s,c)):new Dt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h=e.args[1]||{},m=Zb(p,h,et()&&d?l:void 0,u);m&&(e.args[1]=h,h.headers=m)}const f=M();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function Qb(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function Zb(e,t,n,r){const o=_c({span:n,propagateTraceparent:r}),s=o["sentry-trace"],i=o.baggage,a=o.traceparent;if(!s)return;const c=t.headers||(Ka(e)?e.headers:void 0);if(c)if(tE(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",s),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),i){const d=u.get("baggage");d?vo(d)||u.set("baggage",`${d},${i}`):u.set("baggage",i)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",s]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&vo(l[1]));return i&&!d&&u.push(["baggage",i]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(m=>vo(m)):vo(l));i&&!p&&f.push(i);const h={...c,"sentry-trace":u??s,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...o}}function eE(e,t){if(t.response){qr(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:Z,message:"internal_error"});e.end()}function vo(e){return e.split(",").some(t=>t.trim().startsWith(Za))}function tE(e){return typeof Headers<"u"&&Pt(e,Headers)}function nE(e,t,n){const r=gc(e);return{name:r?`${t} ${MS(r)}`:t,attributes:rE(e,r,t,n)}}function rE(e,t,n,r){const o={url:e,type:"fetch","http.method":n,[z]:r,[de]:"http.client"};return t&&(mc(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function Mp(e,t={},n=j()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||M();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function vr(e,t,n,r,o){ps({level:e,message:t,attributes:n,severityNumber:o},r)}function oE(e,t,{scope:n}={}){vr("trace",e,t,n)}function sE(e,t,{scope:n}={}){vr("debug",e,t,n)}function iE(e,t,{scope:n}={}){vr("info",e,t,n)}function aE(e,t,{scope:n}={}){vr("warn",e,t,n)}function cE(e,t,{scope:n}={}){vr("error",e,t,n)}function uE(e,t,{scope:n}={}){vr("fatal",e,t,n)}const lE=Object.freeze(Object.defineProperty({__proto__:null,debug:sE,error:cE,fatal:uE,fmt:PS,info:iE,trace:oE,warn:aE},Symbol.toStringTag,{value:"Module"}));function ga(e,t,n){return"util"in F&&typeof F.util.format=="function"?F.util.format(...e):dE(e,t,n)}function dE(e,t,n){return e.map(r=>tn(r)?String(r):JSON.stringify(Je(r,t,n))).join(" ")}function fE(e){return/%[sdifocO]/.test(e)}function pE(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,s)=>{n[`sentry.message.parameter.${s}`]=o}),n}const hE="ConsoleLogs",pl={[z]:"auto.log.console"},mE=((e={})=>{const t=e.levels||Ga;return{name:hE,setup(n){const{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:s=1e3}=n.getOptions();if(!r){x&&g.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}yc(({args:i,level:a})=>{if(M()!==n||!t.includes(a))return;const c=i[0],u=i.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${ga(u,o,s)}`:"Assertion failed";ps({level:"error",message:p,attributes:pl})}return}const d=a==="log",l=i.length>1&&typeof i[0]=="string"&&!fE(i[0]),f={...pl,...l?pE(c,u):{}};ps({level:d?"info":a,message:ga(i,o,s),severityNumber:d?10:void 0,attributes:f})})}}}),gE=mE;function Sc(e,t,n,r){dS({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function _E(e,t=1,n){Sc("counter",e,t,n)}function yE(e,t,n){Sc("gauge",e,t,n)}function SE(e,t,n){Sc("distribution",e,t,n)}const bE=Object.freeze(Object.defineProperty({__proto__:null,count:_E,distribution:SE,gauge:yE},Symbol.toStringTag,{value:"Module"})),EE=["trace","debug","info","warn","error","fatal"];function vE(e={}){const t=new Set(e.levels??EE),n=e.client;return{log(r){const{type:o,level:s,message:i,args:a,tag:c,date:u,...d}=r,l=n||M();if(!l)return;const f=wE(o,s);if(!t.has(f))return;const{normalizeDepth:p=3,normalizeMaxBreadth:h=1e3}=l.getOptions(),m=[];i&&m.push(i),a&&a.length>0&&m.push(ga(a,p,h));const _=m.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),s!=null&&typeof s=="number"&&(d["consola.level"]=s),ps({level:f,message:_,attributes:d})}}}const TE={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},IE={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function wE(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=TE[e];if(n)return n}if(typeof t=="number"){const n=IE[t];if(n)return n}return"info"}const kE="gen_ai.prompt",Ks="gen_ai.system",je="gen_ai.request.model",bc="gen_ai.request.stream",Ys="gen_ai.request.temperature",Ec="gen_ai.request.max_tokens",Xs="gen_ai.request.frequency_penalty",vc="gen_ai.request.presence_penalty",Qs="gen_ai.request.top_p",Np="gen_ai.request.top_k",RE="gen_ai.request.encoding_format",CE="gen_ai.request.dimensions",fn="gen_ai.response.finish_reasons",Ht="gen_ai.response.model",Tr="gen_ai.response.id",AE="gen_ai.response.stop_reason",Nn="gen_ai.usage.input_tokens",On="gen_ai.usage.output_tokens",Pn="gen_ai.usage.total_tokens",nn="gen_ai.operation.name",rn="gen_ai.request.messages",nt="gen_ai.response.text",Zs="gen_ai.request.available_tools",ei="gen_ai.response.streaming",vt="gen_ai.response.tool_calls",Op="gen_ai.agent.name",xE="gen_ai.pipeline.name",ME="gen_ai.usage.cache_creation_input_tokens",NE="gen_ai.usage.cache_read_input_tokens",OE="gen_ai.invoke_agent",PE="openai.response.id",Pp="openai.response.model",LE="openai.response.timestamp",DE="openai.usage.completion_tokens",$E="openai.usage.prompt_tokens",Oi={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},hl="anthropic.response.timestamp",Lp=2e4,gs=e=>new TextEncoder().encode(e).length,_s=e=>gs(JSON.stringify(e));function Tc(e,t){if(gs(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){const s=Math.floor((n+r)/2),i=e.slice(0,s);gs(i)<=t?(o=i,n=s+1):r=s-1}return o}function FE(e){return typeof e=="string"?e:"text"in e?e.text:""}function ml(e,t){return typeof e=="string"?t:{...e,text:t}}function BE(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function UE(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function Fr(e){return!e||typeof e!="object"?!1:HE(e)||Dp(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function HE(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&Fr(e.source)}function Dp(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function $p(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function WE(e,t){const n={...e,content:""},r=_s(n),o=t-r;if(o<=0)return[];const s=Tc(e.content,o);return[{...e,content:s}]}function jE(e,t){const{parts:n}=e,r=n.map(a=>ml(a,"")),o=_s({...e,parts:r});let s=t-o;if(s<=0)return[];const i=[];for(const a of n){const c=FE(a),u=gs(c);if(u<=s)i.push(a),s-=u;else if(i.length===0){const d=Tc(c,s);d&&i.push(ml(a,d));break}else break}return i.length<=0?[]:[{...e,parts:i}]}function zE(e,t){return!e||typeof e!="object"?[]:BE(e)?WE(e,t):$p(e)?jE(e,t):[]}const gl="[Filtered]",qE=["image_url","data","content","b64_json","result","uri"];function zo(e){const t={...e};Fr(t.source)&&(t.source=zo(t.source)),Dp(e)&&(t.inlineData={...e.inlineData,data:gl});for(const n of qE)typeof t[n]=="string"&&(t[n]=gl);return t}function _a(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(UE(n)?r={...n,content:_a(n.content)}:"content"in n&&Fr(n.content)&&(r={...n,content:zo(n.content)}),$p(n)&&(r={...r??n,parts:_a(n.parts)}),Fr(r)?r=zo(r):Fr(n)&&(r=zo(n))),r??n})}function GE(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=_a(e);if(_s(n)<=t)return n;const o=n.map(_s);let s=0,i=n.length;for(let a=n.length-1;a>=0;a--){const c=o[a];if(c&&s+c>t)break;c&&(s+=c),i=a}if(i===n.length){const a=n[n.length-1];return zE(a,t)}return n.slice(i)}function ti(e){return GE(e,Lp)}function VE(e){return Tc(e,Lp)}function oo(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function ys(e){return`gen_ai.${oo(e)}`}function Fp(e,t){return e?`${e}.${t}`:t}function Ic(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Nn]:t}),n!==void 0&&e.setAttributes({[On]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){const s=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[Pn]:s})}}function Ss(e){if(typeof e=="string")return VE(e);if(Array.isArray(e)){const t=ti(e);return JSON.stringify(t)}return JSON.stringify(e)}const JE=["responses.create","chat.completions.create","embeddings.create"],KE=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],YE=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...KE];function wc(e){return e.includes("chat.completions")?Oi.CHAT:e.includes("responses")?Oi.RESPONSES:e.includes("embeddings")?Oi.EMBEDDINGS:e.split(".").pop()||"unknown"}function _l(e){return`gen_ai.${wc(e)}`}function XE(e){return JE.includes(e)}function QE(e,t){return e?`${e}.${t}`:t}function ZE(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function ev(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function tv(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function nv(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function rv(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function ov(e,t,n){if(kc(e,t.id,t.model,t.created),t.usage&&ni(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[fn]:JSON.stringify(r)}),n){const o=t.choices.map(s=>s.message?.tool_calls).filter(s=>Array.isArray(s)&&s.length>0).flat();o.length>0&&e.setAttributes({[vt]:JSON.stringify(o)})}}}function sv(e,t,n){if(kc(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[fn]:JSON.stringify([t.status])}),t.usage&&ni(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const o=r.output.filter(s=>typeof s=="object"&&s!==null&&s.type==="function_call");o.length>0&&e.setAttributes({[vt]:JSON.stringify(o)})}}}function iv(e,t){e.setAttributes({[Pp]:t.model,[Ht]:t.model}),t.usage&&ni(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function ni(e,t,n,r){t!==void 0&&e.setAttributes({[$E]:t,[Nn]:t}),n!==void 0&&e.setAttributes({[DE]:n,[On]:n}),r!==void 0&&e.setAttributes({[Pn]:r})}function kc(e,t,n,r){e.setAttributes({[PE]:t,[Tr]:t}),e.setAttributes({[Pp]:n,[Ht]:n}),e.setAttributes({[LE]:new Date(r*1e3).toISOString()})}function av(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function cv(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&av(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function uv(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:Z,message:"internal_error"}),ge(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const o=e;if(!YE.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){const{response:s}=o;t.responseId=s.id??t.responseId,t.responseModel=s.model??t.responseModel,t.responseTimestamp=s.created_at??t.responseTimestamp,s.usage&&(t.promptTokens=s.usage.input_tokens,t.completionTokens=s.usage.output_tokens,t.totalTokens=s.usage.total_tokens),s.status&&t.finishReasons.push(s.status),n&&s.output_text&&t.responseTexts.push(s.output_text)}}async function*lv(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const o of e)rv(o)?cv(o,r,n):nv(o)&&uv(o,r,n,t),yield o}finally{kc(t,r.responseId,r.responseModel,r.responseTimestamp),ni(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[ei]:!0}),r.finishReasons.length&&t.setAttributes({[fn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[nt]:r.responseTexts.join("")});const s=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];s.length>0&&t.setAttributes({[vt]:JSON.stringify(s)}),t.end()}}function dv(e,t){const n={[Ks]:"openai",[nn]:wc(t),[z]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0],o=Array.isArray(r.tools)?r.tools:[],i=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...i];a.length>0&&(n[Zs]=JSON.stringify(a))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0];n[je]=r.model??"unknown","temperature"in r&&(n[Ys]=r.temperature),"top_p"in r&&(n[Qs]=r.top_p),"frequency_penalty"in r&&(n[Xs]=r.frequency_penalty),"presence_penalty"in r&&(n[vc]=r.presence_penalty),"stream"in r&&(n[bc]=r.stream),"encoding_format"in r&&(n[RE]=r.encoding_format),"dimensions"in r&&(n[CE]=r.dimensions)}else n[je]="unknown";return n}function fv(e,t,n){if(!t||typeof t!="object")return;const r=t;if(ZE(r)){if(ov(e,r,n),n&&r.choices?.length){const o=r.choices.map(s=>s.message?.content||"");e.setAttributes({[nt]:JSON.stringify(o)})}}else ev(r)?(sv(e,r,n),n&&r.output_text&&e.setAttributes({[nt]:r.output_text})):tv(r)&&iv(e,r)}function yl(e,t){if("messages"in t){const n=Ss(t.messages);e.setAttributes({[rn]:n})}if("input"in t){const n=Ss(t.input);e.setAttributes({[rn]:n})}}function pv(e,t,n,r){return async function(...s){const i=dv(s,t),a=i[je]||"unknown",c=wc(t),u=s[0];return u&&typeof u=="object"&&u.stream===!0?kt({name:`${c} ${a} stream-response`,op:_l(t),attributes:i},async l=>{try{r.recordInputs&&u&&yl(l,u);const f=await e.apply(n,s);return lv(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:Z,message:"internal_error"}),ge(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):Ut({name:`${c} ${a}`,op:_l(t),attributes:i},async l=>{try{r.recordInputs&&u&&yl(l,u);const f=await e.apply(n,s);return fv(l,f,r.recordOutputs),f}catch(f){throw ge(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function Bp(e,t="",n){return new Proxy(e,{get(r,o){const s=r[o],i=QE(t,String(o));return typeof s=="function"&&XE(i)?pv(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?Bp(s,i,n):s}})}function hv(e,t){const n=!!M()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Bp(e,"",r)}function mv(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:Z,message:e.error?.type??"internal_error"}),ge(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function gv(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function _v(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function yv(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function Sv(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function Up(e,t,n,r){!(e&&typeof e=="object")||mv(e,r)||(gv(e,t),_v(e,t),yv(e,t,n),Sv(e,t))}function bv(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[Tr]:e.responseId}),e.responseModel&&t.setAttributes({[Ht]:e.responseModel}),Ic(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[ei]:!0}),e.finishReasons.length>0&&t.setAttributes({[fn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[nt]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[vt]:JSON.stringify(e.toolCalls)}),t.end())}async function*Ev(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const o of e)Up(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[Tr]:r.responseId}),r.responseModel&&t.setAttributes({[Ht]:r.responseModel}),Ic(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[ei]:!0}),r.finishReasons.length>0&&t.setAttributes({[fn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[nt]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[vt]:JSON.stringify(r.toolCalls)}),t.end()}}function vv(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{Up(o,r,n,t)}),e.on("message",()=>{bv(r,t,n)}),e.on("error",o=>{ge(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:Z,message:"stream_error"}),t.end())}),e}const Tv=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Iv(e){return Tv.includes(e)}function wv(e,t){t.error&&(e.setStatus({code:Z,message:t.error.type||"internal_error"}),ge(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function kv(e){const{system:t,messages:n}=e,r=typeof t=="string"?[{role:"system",content:e.system}]:[],o=Array.isArray(n)?n:n!=null?[n]:[];return[...r,...o]}function Rv(e,t){const n={[Ks]:"anthropic",[nn]:oo(t),[z]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Zs]=JSON.stringify(r.tools)),n[je]=r.model??"unknown","temperature"in r&&(n[Ys]=r.temperature),"top_p"in r&&(n[Qs]=r.top_p),"stream"in r&&(n[bc]=r.stream),"top_k"in r&&(n[Np]=r.top_k),"frequency_penalty"in r&&(n[Xs]=r.frequency_penalty),"max_tokens"in r&&(n[Ec]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[je]=e[0]:n[je]="unknown";return n}function ya(e,t){const n=kv(t);if(n.length){const r=Ss(n);e.setAttributes({[rn]:r})}if("input"in t){const r=Ss(t.input);e.setAttributes({[rn]:r})}"prompt"in t&&e.setAttributes({[kE]:JSON.stringify(t.prompt)})}function Cv(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[nt]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[vt]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[nt]:t.completion}),"input_tokens"in t&&e.setAttributes({[nt]:JSON.stringify(t.input_tokens)})}function Av(e,t){"id"in t&&"model"in t&&(e.setAttributes({[Tr]:t.id,[Ht]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[hl]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[hl]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Ic(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function xv(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){wv(e,t);return}n&&Cv(e,t),Av(e,t)}}function Sl(e,t,n){throw ge(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:Z,message:"internal_error"}),t.end()),e}function Mv(e,t,n,r,o,s,i,a,c,u,d){const l=o[je]??"unknown",f={name:`${s} ${l} stream-response`,op:ys(i),attributes:o};return u&&!d?kt(f,async p=>{try{c.recordInputs&&a&&ya(p,a);const h=await e.apply(n,r);return Ev(h,p,c.recordOutputs??!1)}catch(h){return Sl(h,p,i)}}):kt(f,p=>{try{c.recordInputs&&a&&ya(p,a);const h=t.apply(n,r);return vv(h,p,c.recordOutputs??!1)}catch(h){return Sl(h,p,i)}})}function Nv(e,t,n,r){return new Proxy(e,{apply(o,s,i){const a=Rv(i,t),c=a[je]??"unknown",u=oo(t),d=typeof i[0]=="object"?i[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?Mv(e,o,n,i,a,u,t,d,r,l,f):Ut({name:`${u} ${c}`,op:ys(t),attributes:a},p=>(r.recordInputs&&d&&ya(p,d),qs(()=>o.apply(n,i),h=>{ge(h,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},h=>xv(p,h,r.recordOutputs))))}})}function Hp(e,t="",n){return new Proxy(e,{get(r,o){const s=r[o],i=Fp(t,String(o));return typeof s=="function"&&Iv(i)?Nv(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?Hp(s,i,n):s}})}function Ov(e,t){const n=!!M()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Hp(e,"",r)}const bl=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Pv="google_genai",Wp="chats.create",Lv="chat";function Dv(e,t){const n=e?.promptFeedback;if(n?.blockReason){const r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:Z,message:`Content blocked: ${r}`}),ge(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function $v(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function Fv(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(const o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function Bv(e,t,n,r){!e||Dv(e,r)||($v(e,t),Fv(e,t,n))}async function*Uv(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const o of e)Bv(o,r,n,t),yield o}finally{const o={[ei]:!0};r.responseId&&(o[Tr]=r.responseId),r.responseModel&&(o[Ht]=r.responseModel),r.promptTokens!==void 0&&(o[Nn]=r.promptTokens),r.completionTokens!==void 0&&(o[On]=r.completionTokens),r.totalTokens!==void 0&&(o[Pn]=r.totalTokens),r.finishReasons.length&&(o[fn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[nt]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[vt]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Hv(e){if(bl.includes(e))return!0;const t=e.split(".").pop();return bl.includes(t)}function Wv(e){return e.includes("Stream")}function Pr(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>Pr(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function El(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function jv(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Ys]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Qs]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Np]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Ec]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Xs]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[vc]=e.presencePenalty),t}function zv(e,t,n){const r={[Ks]:Pv,[nn]:oo(e),[z]:"auto.ai.google_genai"};if(t){if(r[je]=El(t,n),"config"in t&&typeof t.config=="object"&&t.config){const o=t.config;if(Object.assign(r,jv(o)),"tools"in o&&Array.isArray(o.tools)){const s=o.tools.flatMap(i=>i.functionDeclarations);r[Zs]=JSON.stringify(s)}}}else r[je]=El({},n);return r}function vl(e,t){const n=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...Pr(t.config.systemInstruction,"system")),"history"in t&&n.push(...Pr(t.history,"user")),"contents"in t&&n.push(...Pr(t.contents,"user")),"message"in t&&n.push(...Pr(t.message,"user")),n.length&&e.setAttributes({[rn]:JSON.stringify(ti(n))})}function qv(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Ht,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Nn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[On]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Pn]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(s=>typeof s.text=="string"?s.text:"").filter(s=>s.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[nt]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[vt]:JSON.stringify(r)})}}}function Tl(e,t,n,r){const o=t===Wp;return new Proxy(e,{apply(s,i,a){const c=a[0],u=zv(t,c,n),d=u[je]??"unknown",l=oo(t);return Wv(t)?kt({name:`${l} ${d} stream-response`,op:ys(t),attributes:u},async f=>{try{r.recordInputs&&c&&vl(f,c);const p=await s.apply(n,a);return Uv(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:Z,message:"internal_error"}),ge(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):Ut({name:o?`${l} ${d} create`:`${l} ${d}`,op:ys(t),attributes:u},f=>(r.recordInputs&&c&&vl(f,c),qs(()=>s.apply(n,a),p=>{ge(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{o||qv(f,p,r.recordOutputs)})))}})}function Sa(e,t="",n){return new Proxy(e,{get:(r,o,s)=>{const i=Reflect.get(r,o,s),a=Fp(t,String(o));if(typeof i=="function"&&Hv(a)){if(a===Wp){const c=Tl(i,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?Sa(l,Lv,n):l}}return Tl(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?Sa(i,a,n):i}})}function Gv(e,t){const n=!!M()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Sa(e,"",r)}const Lr="auto.ai.langchain",Vv={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},wt=(e,t,n)=>{n!=null&&(e[t]=n)},Ve=(e,t,n)=>{const r=Number(n);Number.isNaN(r)||(e[t]=r)};function We(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Nr(e){const t=e.toLowerCase();return Vv[t]??t}function Il(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function wl(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Rc(e){return e.map(t=>{const n=t._getType;if(typeof n=="function"){const o=n.call(t);return{role:Nr(o),content:We(t.content)}}const r=t.constructor?.name;if(r)return{role:Nr(Il(r)),content:We(t.content)};if(t.type){const o=String(t.type).toLowerCase();return{role:Nr(o),content:We(t.content)}}if(t.role)return{role:Nr(String(t.role)),content:We(t.content)};if(t.lc===1&&t.kwargs){const o=t.id,s=Array.isArray(o)&&o.length>0?o[o.length-1]:"",i=typeof s=="string"?Il(s):"user";return{role:Nr(i),content:We(t.kwargs?.content)}}return{role:"user",content:We(t.content)}})}function Jv(e,t,n){const r={},o="kwargs"in e?e.kwargs:void 0,s=t?.temperature??n?.ls_temperature??o?.temperature;Ve(r,Ys,s);const i=t?.max_tokens??n?.ls_max_tokens??o?.max_tokens;Ve(r,Ec,i);const a=t?.top_p??o?.top_p;Ve(r,Qs,a);const c=t?.frequency_penalty;Ve(r,Xs,c);const u=t?.presence_penalty;return Ve(r,vc,u),t&&"stream"in t&&wt(r,bc,!!t.stream),r}function jp(e,t,n,r,o,s){return{[Ks]:We(e??"langchain"),[nn]:n,[je]:We(t),[z]:Lr,...Jv(r,o,s)}}function Kv(e,t,n,r,o){const s=o?.ls_provider,i=r?.model??o?.ls_model_name??"unknown",a=jp(s,i,"pipeline",e,r,o);if(n&&Array.isArray(t)&&t.length>0){const c=t.map(u=>({role:"user",content:u}));wt(a,rn,We(c))}return a}function Yv(e,t,n,r,o){const s=o?.ls_provider??e.id?.[2],i=r?.model??o?.ls_model_name??"unknown",a=jp(s,i,"chat",e,r,o);if(n&&Array.isArray(t)&&t.length>0){const c=Rc(t.flat()),u=ti(c);wt(a,rn,We(u))}return a}function Xv(e,t){const n=[],r=e.flat();for(const o of r){const s=o.message?.content;if(Array.isArray(s))for(const i of s){const a=i;a.type==="tool_use"&&n.push(a)}}n.length>0&&wt(t,vt,We(n))}function Qv(e,t){if(!e)return;const n=e.tokenUsage,r=e.usage;if(n)Ve(t,Nn,n.promptTokens),Ve(t,On,n.completionTokens),Ve(t,Pn,n.totalTokens);else if(r){Ve(t,Nn,r.input_tokens),Ve(t,On,r.output_tokens);const o=Number(r.input_tokens),s=Number(r.output_tokens),i=(Number.isNaN(o)?0:o)+(Number.isNaN(s)?0:s);i>0&&Ve(t,Pn,i),r.cache_creation_input_tokens!==void 0&&Ve(t,ME,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&Ve(t,NE,r.cache_read_input_tokens)}}function Zv(e,t){if(!e)return;const n={};if(Array.isArray(e.generations)){const u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&wt(n,fn,We(u)),Xv(e.generations,n),t){const d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&wt(n,nt,We(d))}}Qv(e.llmOutput,n);const r=e.llmOutput,s=e.generations?.[0]?.[0]?.message,i=r?.model_name??r?.model??s?.response_metadata?.model_name;i&&wt(n,Ht,i);const a=r?.id??s?.id;a&&wt(n,Tr,a);const c=r?.stop_reason??s?.response_metadata?.finish_reason;return c&&wt(n,AE,We(c)),n}function eT(e={}){const t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,o=i=>{const a=r.get(i);a?.isRecording()&&(a.end(),r.delete(i))},s={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(i,a,c,u,d,l,f,p){const h=wl(l),m=Kv(i,a,t,h,f),_=m[je],y=m[nn];kt({name:`${y} ${_}`,op:"gen_ai.pipeline",attributes:{...m,[de]:"gen_ai.pipeline"}},E=>(r.set(c,E),E))},handleChatModelStart(i,a,c,u,d,l,f,p){const h=wl(l),m=Yv(i,a,t,h,f),_=m[je],y=m[nn];kt({name:`${y} ${_}`,op:"gen_ai.chat",attributes:{...m,[de]:"gen_ai.chat"}},E=>(r.set(c,E),E))},handleLLMEnd(i,a,c,u,d){const l=r.get(a);if(l?.isRecording()){const f=Zv(i,n);f&&l.setAttributes(f),o(a)}},handleLLMError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Z,message:"llm_error"}),o(a)),ge(i,{mechanism:{handled:!1,type:`${Lr}.llm_error_handler`}})},handleChainStart(i,a,c,u){const d=i.name||"unknown_chain",l={[z]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),kt({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[de]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(i,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(i)}),o(a))},handleChainError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Z,message:"chain_error"}),o(a)),ge(i,{mechanism:{handled:!1,type:`${Lr}.chain_error_handler`}})},handleToolStart(i,a,c,u){const d=i.name||"unknown_tool",l={[z]:Lr,"gen_ai.tool.name":d};t&&(l["gen_ai.tool.input"]=a),kt({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[de]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(i,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(i)}),o(a))},handleToolError(i,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:Z,message:"tool_error"}),o(a)),ge(i,{mechanism:{handled:!1,type:`${Lr}.tool_error_handler`}})},copy(){return s},toJSON(){return{lc:1,type:"not_implemented",id:s.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:s.lc_id}}};return s}const zp="auto.ai.langgraph";function tT(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function nT(e){const t=e;let n=0,r=0,o=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const s=t.usage_metadata;return typeof s.input_tokens=="number"&&(n=s.input_tokens),typeof s.output_tokens=="number"&&(r=s.output_tokens),typeof s.total_tokens=="number"&&(o=s.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:o}}if(t.response_metadata&&typeof t.response_metadata=="object"){const s=t.response_metadata;if(s.tokenUsage&&typeof s.tokenUsage=="object"){const i=s.tokenUsage;typeof i.promptTokens=="number"&&(n=i.promptTokens),typeof i.completionTokens=="number"&&(r=i.completionTokens),typeof i.totalTokens=="number"&&(o=i.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:o}}function rT(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(Ht,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(fn,[r.finish_reason])}}function oT(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;const t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function sT(e,t,n){const o=n?.messages;if(!o||!Array.isArray(o))return;const s=t?.length??0,i=o.length>s?o.slice(s):[];if(i.length===0)return;const a=tT(i);a&&e.setAttribute(vt,JSON.stringify(a));const c=Rc(i);e.setAttribute(nt,JSON.stringify(c));let u=0,d=0,l=0;for(const f of i){const p=nT(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,rT(e,f)}u>0&&e.setAttribute(Nn,u),d>0&&e.setAttribute(On,d),l>0&&e.setAttribute(Pn,l)}function iT(e,t){return new Proxy(e,{apply(n,r,o){return Ut({op:"gen_ai.create_agent",name:"create_agent",attributes:{[z]:zp,[de]:"gen_ai.create_agent",[nn]:"create_agent"}},s=>{try{const i=Reflect.apply(n,r,o),a=o.length>0?o[0]:{};a?.name&&typeof a.name=="string"&&(s.setAttribute(Op,a.name),s.updateName(`create_agent ${a.name}`));const c=i.invoke;return c&&typeof c=="function"&&(i.invoke=aT(c.bind(i),i,a,t)),i}catch(i){throw s.setStatus({code:Z,message:"internal_error"}),ge(i,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),i}})}})}function aT(e,t,n,r){return new Proxy(e,{apply(o,s,i){return Ut({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[z]:zp,[de]:OE,[nn]:"invoke_agent"}},async a=>{try{const c=n?.name;c&&typeof c=="string"&&(a.setAttribute(xE,c),a.setAttribute(Op,c),a.updateName(`invoke_agent ${c}`));const u=oT(t);u&&a.setAttribute(Zs,JSON.stringify(u));const d=r.recordInputs,l=r.recordOutputs,f=i.length>0?i[0].messages??[]:[];if(f&&d){const h=Rc(f),m=ti(h);a.setAttribute(rn,JSON.stringify(m))}const p=await Reflect.apply(o,s,i);return l&&sT(a,f??null,p),p}catch(c){throw a.setStatus({code:Z,message:"internal_error"}),ge(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function cT(e,t){const n=t||{};return e.compile=iT(e.compile.bind(e),n),e}function qp(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const ar=F;function uT(){return"history"in ar&&!!ar.history}function lT(){if(!("fetch"in ar))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function ba(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Gp(){if(typeof EdgeRuntime=="string")return!0;if(!lT())return!1;if(ba(ar.fetch))return!0;let e=!1;const t=ar.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=ba(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){x&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function dT(){return"ReportingObserver"in ar}function Cc(e,t){const n="fetch";cn(n,e),un(n,()=>Vp(void 0,t))}function fT(e){const t="fetch-body-resolved";cn(t,e),un(t,()=>Vp(hT))}function Vp(e,t=!1){t&&!Gp()||Me(F,"fetch",function(n){return function(...r){const o=new Error,{method:s,url:i}=mT(r),a={args:r,fetchData:{method:s,url:i},startTimestamp:me()*1e3,virtualError:o,headers:gT(r)};return e||Ze("fetch",{...a}),n.apply(F,r).then(async c=>(e?e(c):Ze("fetch",{...a,endTimestamp:me()*1e3,response:c}),c),c=>{if(Ze("fetch",{...a,endTimestamp:me()*1e3,error:c}),At(c)&&c.stack===void 0&&(c.stack=o.stack,Ce(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function pT(e,t){if(e?.body){const n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let s=!0;for(;s;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),s=!1)}catch{s=!1}finally{clearTimeout(i)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function hT(e){let t;try{t=e.clone()}catch{return}pT(t,()=>{Ze("fetch-body-resolved",{endTimestamp:me()*1e3,response:e})})}function qo(e,t){return!!e&&typeof e=="object"&&!!e[t]}function kl(e){return typeof e=="string"?e:e?qo(e,"url")?e.url:e.toString?e.toString():"":""}function mT(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:kl(n),method:qo(r,"method")?String(r.method).toUpperCase():Ka(n)&&qo(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:kl(t),method:qo(t,"method")?String(t.method).toUpperCase():"GET"}}function gT(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Ka(t))return new Headers(t.headers)}catch{}}function _T(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function yT(){return"npm"}function ST(){return!_T()&&Object.prototype.toString.call(typeof yu<"u"?yu:0)==="[object process]"}function bs(){return typeof window<"u"&&(!ST()||bT())}function bT(){return F.process?.type==="renderer"}const it=F,ue=it.document,Dr=it.navigator,Jp="Report a Bug",ET="Cancel",vT="Send Bug Report",TT="Confirm",IT="Report a Bug",wT="your.email@example.org",kT="Email",RT="What's the bug? What did you expect?",CT="Description",AT="Your Name",xT="Name",MT="Thank you for your report!",NT="(required)",OT="Add a screenshot",PT="Remove screenshot",LT="Highlight",DT="Hide",$T="Remove",FT="widget",BT="api",UT=5e3,Kp=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=M();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&j().setTags(e.tags);const r=Mp({source:BT,url:Fn(),...e},t);return new Promise((o,s)=>{const i=setTimeout(()=>s("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?s("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):s("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Go=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function HT(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Dr.userAgent)||/Macintosh/i.test(Dr.userAgent)&&Dr.maxTouchPoints&&Dr.maxTouchPoints>1||!isSecureContext)}function To(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function WT(e){const t=ue.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Ye(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const Wn=20,jT="http://www.w3.org/2000/svg";function zT(){const e=a=>it.document.createElementNS(jT,a),t=Ye(e("svg"),{width:`${Wn}`,height:`${Wn}`,viewBox:`0 0 ${Wn} ${Wn}`,fill:"var(--actor-color, var(--foreground))"}),n=Ye(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ye(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=Ye(e("clipPath"),{id:"clip0_57_80"}),i=Ye(e("rect"),{width:`${Wn}`,height:`${Wn}`,fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),t}function qT({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=ue.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||Jp,o.appendChild(zT()),e){const i=ue.createElement("span");i.appendChild(ue.createTextNode(e)),o.appendChild(i)}const s=WT(r);return{el:o,appendToDom(){n.appendChild(s),n.appendChild(o)},removeFromDom(){o.remove(),s.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const Yp="rgba(88, 74, 192, 1)",GT={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Yp,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Rl={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Yp,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Cl(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function VT({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=ue.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Cl(e==="dark"?{...Rl,...t}:{...GT,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Cl({...Rl,...t})}
  }
}`:""}
}
`,r&&o.setAttribute("nonce",r),o}const Xp=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:s=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:_="system",themeLight:y={},themeDark:E={},addScreenshotButtonLabel:w=OT,cancelButtonLabel:v=ET,confirmButtonLabel:S=TT,emailLabel:C=kT,emailPlaceholder:b=wT,formTitle:N=IT,isRequiredLabel:B=NT,messageLabel:T=CT,messagePlaceholder:P=RT,nameLabel:A=xT,namePlaceholder:L=AT,removeScreenshotButtonLabel:D=PT,submitButtonLabel:ee=vT,successMessageText:Y=MT,triggerLabel:ne=Jp,triggerAriaLabel:I="",highlightToolText:q=LT,hideToolText:R=DT,removeHighlightText:V=$T,onFormOpen:ae,onFormClose:re,onSubmitSuccess:Te,onSubmitError:Le,onFormSubmitted:Wt}={})=>{const De={id:o,autoInject:s,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:_,themeDark:E,themeLight:y,triggerLabel:ne,triggerAriaLabel:I,cancelButtonLabel:v,submitButtonLabel:ee,confirmButtonLabel:S,formTitle:N,emailLabel:C,emailPlaceholder:b,messageLabel:T,messagePlaceholder:P,nameLabel:A,namePlaceholder:L,successMessageText:Y,isRequiredLabel:B,addScreenshotButtonLabel:w,removeScreenshotButtonLabel:D,highlightToolText:q,hideToolText:R,removeHighlightText:V,onFormClose:re,onFormOpen:ae,onSubmitError:Le,onSubmitSuccess:Te,onFormSubmitted:Wt};let Ue=null,ht=[];const jt=ce=>{if(!Ue){const _e=ue.createElement("div");_e.id=String(ce.id),ue.body.appendChild(_e),Ue=_e.attachShadow({mode:"open"}),Ue.appendChild(VT(ce))}return Ue},Cr=async ce=>{const _e=ce.enableScreenshot&&HT();let Xe,Ae;try{Xe=(t?t():await e("feedbackModalIntegration",m))(),pa(Xe)}catch{throw Go&&g.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const mt=_e?n?n():await e("feedbackScreenshotIntegration",m):void 0;mt&&(Ae=mt(),pa(Ae))}catch{Go&&g.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const Ne=Xe.createDialog({options:{...ce,onFormClose:()=>{Ne?.close(),ce.onFormClose?.()},onFormSubmitted:()=>{Ne?.close(),ce.onFormSubmitted?.()}},screenshotIntegration:Ae,sendFeedback:Kp,shadow:jt(ce)});return Ne},So=(ce,_e={})=>{const Xe=To(De,_e),Ae=typeof ce=="string"?ue.querySelector(ce):typeof ce.addEventListener=="function"?ce:null;if(!Ae)throw Go&&g.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ne=null;const mt=async()=>{Ne||(Ne=await Cr({...Xe,onFormSubmitted:()=>{Ne?.removeFromDom(),Xe.onFormSubmitted?.()}})),Ne.appendToDom(),Ne.open()};Ae.addEventListener("click",mt);const X=()=>{ht=ht.filter(Ge=>Ge!==X),Ne?.removeFromDom(),Ne=null,Ae.removeEventListener("click",mt)};return ht.push(X),X},Ar=(ce={})=>{const _e=To(De,ce),Xe=jt(_e),Ae=qT({triggerLabel:_e.triggerLabel,triggerAriaLabel:_e.triggerAriaLabel,shadow:Xe,styleNonce:h});return So(Ae.el,{..._e,onFormOpen(){Ae.hide()},onFormClose(){Ae.show()},onFormSubmitted(){Ae.show()}}),Ae};return{name:"Feedback",setupOnce(){!bs()||!De.autoInject||(ue.readyState==="loading"?ue.addEventListener("DOMContentLoaded",()=>Ar().appendToDom()):Ar().appendToDom())},attachTo:So,createWidget(ce={}){const _e=Ar(To(De,ce));return _e.appendToDom(),_e},async createForm(ce={}){return Cr(To(De,ce))},remove(){Ue&&(Ue.parentElement?.remove(),Ue=null),ht.forEach(ce=>ce()),ht=[]}}});function JT(){return M()?.getIntegrationByName("Feedback")}var ri,fe,Qp,_n,Al,Zp,Ea,Vr={},Ac=[],KT=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,xc=Array.isArray;function Jt(e,t){for(var n in t)e[n]=t[n];return e}function eh(e){var t=e.parentNode;t&&t.removeChild(e)}function K(e,t,n){var r,o,s,i={};for(s in t)s=="key"?r=t[s]:s=="ref"?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?ri.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)i[s]===void 0&&(i[s]=e.defaultProps[s]);return Vo(e,i,r,o,null)}function Vo(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Qp,__i:-1,__u:0};return o==null&&fe.vnode!=null&&fe.vnode(s),s}function so(e){return e.children}function Jo(e,t){this.props=e,this.context=t}function cr(e,t){if(t==null)return e.__?cr(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?cr(e):null}function YT(e,t,n){var r,o=e.__v,s=o.__e,i=e.__P;if(i)return(r=Jt({},o)).__v=o.__v+1,fe.vnode&&fe.vnode(r),Mc(i,r,o,e.__n,i.ownerSVGElement!==void 0,32&o.__u?[s]:null,t,s??cr(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&th(r),r}function th(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return th(e)}}function xl(e){(!e.__d&&(e.__d=!0)&&_n.push(e)&&!Es.__r++||Al!==fe.debounceRendering)&&((Al=fe.debounceRendering)||Zp)(Es)}function Es(){var e,t,n,r=[],o=[];for(_n.sort(Ea);e=_n.shift();)e.__d&&(n=_n.length,t=YT(e,r,o)||t,n===0||_n.length>n?(va(r,t,o),o.length=r.length=0,t=void 0,_n.sort(Ea)):t&&fe.__c&&fe.__c(t,Ac));t&&va(r,t,o),Es.__r=0}function nh(e,t,n,r,o,s,i,a,c,u,d){var l,f,p,h,m,_=r&&r.__k||Ac,y=t.length;for(n.__d=c,XT(n,t,_),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Vr:_[p.__i]||Vr,p.__i=l,Mc(e,p,f,o,s,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Nc(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=rh(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function XT(e,t,n){var r,o,s,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Vo(null,o,null,null,o):xc(o)?Vo(so,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Vo(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=QT(o,n,i=r+l,d),o.__i=a,s=null,a!==-1&&(d--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(o.__u|=65536))):(s=n[r])&&s.key==null&&s.__e&&(s.__e==e.__d&&(e.__d=cr(s)),Ta(s,s,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(s=n[r])!=null&&(131072&s.__u)==0&&(s.__e==e.__d&&(e.__d=cr(s)),Ta(s,s))}function rh(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=rh(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function QT(e,t,n,r){var o=e.key,s=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&s===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&o==c.key&&s===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&s===c.type)return a;a++}}return-1}function Ml(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||KT.test(t)?n:n+"px"}function Io(e,t,n,r,o){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ml(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ml(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?Ol:Nl,s)):e.removeEventListener(t,s?Ol:Nl,s);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Nl(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(fe.event?fe.event(e):e)}}function Ol(e){if(this.l)return this.l[e.type+!0](fe.event?fe.event(e):e)}function Mc(e,t,n,r,o,s,i,a,c,u){var d,l,f,p,h,m,_,y,E,w,v,S,C,b,N,B=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(d=fe.__b)&&d(t);e:if(typeof B=="function")try{if(y=t.props,E=(d=B.contextType)&&r[d.__c],w=d?E?E.props.value:d.__:r,n.__c?_=(l=t.__c=n.__c).__=l.__E:("prototype"in B&&B.prototype.render?t.__c=l=new B(y,w):(t.__c=l=new Jo(y,w),l.constructor=B,l.render=e0),E&&E.sub(l),l.props=y,l.state||(l.state={}),l.context=w,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),B.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Jt({},l.__s)),Jt(l.__s,B.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)B.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(B.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,w),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,w)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(T){T&&(T.__=t)}),v=0;v<l._sb.length;v++)l.__h.push(l._sb[v]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,w),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=w,l.props=y,l.__P=e,l.__e=!1,S=fe.__r,C=0,"prototype"in B&&B.prototype.render){for(l.state=l.__s,l.__d=!1,S&&S(t),d=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,S&&S(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++C<25);l.state=l.__s,l.getChildContext!=null&&(r=Jt(Jt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),nh(e,xc(N=d!=null&&d.type===so&&d.key==null?d.props.children:d)?N:[N],t,n,r,o,s,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),_&&(l.__E=l.__=null)}catch(T){t.__v=null,c||s!=null?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),fe.__e(T,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=ZT(n.__e,t,n,r,o,s,i,c,u);(d=fe.diffed)&&d(t)}function va(e,t,n){for(var r=0;r<n.length;r++)Nc(n[r],n[++r],n[++r]);fe.__c&&fe.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){fe.__e(s,o.__v)}})}function ZT(e,t,n,r,o,s,i,a,c){var u,d,l,f,p,h,m,_=n.props,y=t.props,E=t.type;if(E==="svg"&&(o=!0),s!=null){for(u=0;u<s.length;u++)if((p=s[u])&&"setAttribute"in p==!!E&&(E?p.localName===E:p.nodeType===3)){e=p,s[u]=null;break}}if(e==null){if(E===null)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",E):document.createElement(E,y.is&&y),s=null,a=!1}if(E===null)_===y||a&&e.data===y||(e.data=y);else{if(s=s&&ri.call(e.childNodes),_=n.props||Vr,!a&&s!=null)for(_={},u=0;u<e.attributes.length;u++)_[(p=e.attributes[u]).name]=p.value;for(u in _)p=_[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||Io(e,u,null,p,o));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||_[u]===p||Io(e,u,p,_[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),nh(e,xc(f)?f:[f],t,n,r,o&&E!=="foreignObject",s,i,s?s[0]:n.__k&&cr(n,0),a,c),s!=null)for(u=s.length;u--;)s[u]!=null&&eh(s[u]);a||(u="value",h!==void 0&&(h!==e[u]||E==="progress"&&!h||E==="option"&&h!==_[u])&&Io(e,u,h,_[u],!1),u="checked",m!==void 0&&m!==e[u]&&Io(e,u,m,_[u],!1))}return e}function Nc(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){fe.__e(r,n)}}function Ta(e,t,n){var r,o;if(fe.unmount&&fe.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Nc(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){fe.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ta(r[o],t,n||typeof e.type!="function");n||e.__e==null||eh(e.__e),e.__=e.__e=e.__d=void 0}function e0(e,t,n){return this.constructor(e,n)}function t0(e,t,n){var r,o,s,i;fe.__&&fe.__(e,t),o=(r=!1)?null:t.__k,s=[],i=[],Mc(t,e=t.__k=K(so,null,[e]),o||Vr,Vr,t.ownerSVGElement!==void 0,o?null:t.firstChild?ri.call(t.childNodes):null,s,o?o.__e:t.firstChild,r,i),e.__d=void 0,va(s,e,i)}ri=Ac.slice,fe={__e:function(e,t,n,r){for(var o,s,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),i=o.__d),i)return o.__E=o}catch(a){e=a}throw e}},Qp=0,Jo.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Jt({},this.state),typeof e=="function"&&(e=e(Jt({},n),this.props)),e&&Jt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),xl(this))},Jo.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xl(this))},Jo.prototype.render=so,_n=[],Zp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ea=function(e,t){return e.__v.__b-t.__v.__b},Es.__r=0;var $t,le,Pi,Pl,ur=0,oh=[],Ko=[],ye=fe,Ll=ye.__b,Dl=ye.__r,$l=ye.diffed,Fl=ye.__c,Bl=ye.unmount,Ul=ye.__;function Un(e,t){ye.__h&&ye.__h(le,e,ur||t),ur=0;var n=le.__H||(le.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ko}),n.__[e]}function Sn(e){return ur=1,sh(ah,e)}function sh(e,t,n){var r=Un($t++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ah(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=le,!le.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!s||s.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!s||s.call(this,a,c,u))};le.u=!0;var s=le.shouldComponentUpdate,i=le.componentWillUpdate;le.componentWillUpdate=function(a,c,u){if(this.__e){var d=s;s=void 0,o(a,c,u),s=d}i&&i.call(this,a,c,u)},le.shouldComponentUpdate=o}return r.__N||r.__}function n0(e,t){var n=Un($t++,3);!ye.__s&&Oc(n.__H,t)&&(n.__=e,n.i=t,le.__H.__h.push(n))}function ih(e,t){var n=Un($t++,4);!ye.__s&&Oc(n.__H,t)&&(n.__=e,n.i=t,le.__h.push(n))}function r0(e){return ur=5,io(function(){return{current:e}},[])}function o0(e,t,n){ur=6,ih(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function io(e,t){var n=Un($t++,7);return Oc(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Zn(e,t){return ur=8,io(function(){return e},t)}function s0(e){var t=le.context[e.__c],n=Un($t++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(le)),t.props.value):e.__}function i0(e,t){ye.useDebugValue&&ye.useDebugValue(t?t(e):e)}function a0(e){var t=Un($t++,10),n=Sn();return t.__=e,le.componentDidCatch||(le.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function c0(){var e=Un($t++,11);if(!e.__){for(var t=le.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function u0(){for(var e;e=oh.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Yo),e.__H.__h.forEach(Ia),e.__H.__h=[]}catch(t){e.__H.__h=[],ye.__e(t,e.__v)}}ye.__b=function(e){le=null,Ll&&Ll(e)},ye.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ul&&Ul(e,t)},ye.__r=function(e){Dl&&Dl(e),$t=0;var t=(le=e.__c).__H;t&&(Pi===le?(t.__h=[],le.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ko,n.__N=n.i=void 0})):(t.__h.forEach(Yo),t.__h.forEach(Ia),t.__h=[],$t=0)),Pi=le},ye.diffed=function(e){$l&&$l(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(oh.push(t)!==1&&Pl===ye.requestAnimationFrame||((Pl=ye.requestAnimationFrame)||l0)(u0)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ko&&(n.__=n.__V),n.i=void 0,n.__V=Ko})),Pi=le=null},ye.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Yo),n.__h=n.__h.filter(function(r){return!r.__||Ia(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],ye.__e(r,n.__v)}}),Fl&&Fl(e,t)},ye.unmount=function(e){Bl&&Bl(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Yo(r)}catch(o){t=o}}),n.__H=void 0,t&&ye.__e(t,n.__v))};var Hl=typeof requestAnimationFrame=="function";function l0(e){var t,n=function(){clearTimeout(r),Hl&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Hl&&(t=requestAnimationFrame(n))}function Yo(e){var t=le,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),le=t}function Ia(e){var t=le;e.__c=e.__(),le=t}function Oc(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ah(e,t){return typeof t=="function"?t(e):t}const d0=Object.defineProperty({__proto__:null,useCallback:Zn,useContext:s0,useDebugValue:i0,useEffect:n0,useErrorBoundary:a0,useId:c0,useImperativeHandle:o0,useLayoutEffect:ih,useMemo:io,useReducer:sh,useRef:r0,useState:Sn},Symbol.toStringTag,{value:"Module"}),f0="http://www.w3.org/2000/svg";function p0(){const e=r=>ue.createElementNS(f0,r),t=Ye(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Ye(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function h0({options:e}){const t=io(()=>({__html:p0().outerHTML}),[]);return K("h2",{class:"dialog__header"},K("span",{class:"dialog__title"},e.formTitle),e.showBranding?K("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function m0(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function Li(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function g0({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:_,isNameRequired:y,messageLabel:E,messagePlaceholder:w,nameLabel:v,namePlaceholder:S,submitButtonLabel:C,isRequiredLabel:b}=e,[N,B]=Sn(!1),[T,P]=Sn(null),[A,L]=Sn(!1),D=u?.input,[ee,Y]=Sn(null),ne=Zn(R=>{Y(R),L(!1)},[]),I=Zn(R=>{const V=m0(R,{emailLabel:h,isEmailRequired:_,isNameRequired:y,messageLabel:E,nameLabel:v});return V.length>0?P(`Please enter in the following required fields: ${V.join(", ")}`):P(null),V.length===0},[h,_,y,E,v]),q=Zn(async R=>{B(!0);try{if(R.preventDefault(),!(R.target instanceof HTMLFormElement))return;const V=new FormData(R.target),ae=await(u&&A?u.value():void 0),re={name:Li(V,"name"),email:Li(V,"email"),message:Li(V,"message"),attachments:ae?[ae]:void 0};if(!I(re))return;try{const Te=await o({name:re.name,email:re.email,message:re.message,source:FT,tags:d},{attachments:re.attachments});s(re,Te)}catch(Te){Go&&g.error(Te),P(Te),i(Te)}}finally{B(!1)}},[u&&A,s,i]);return K("form",{class:"form",onSubmit:q},D&&A?K(D,{onError:ne}):null,K("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:N},K("div",{class:"form__top"},T?K("div",{class:"form__error-container"},T):null,c?K("label",{for:"name",class:"form__label"},K(Di,{label:v,isRequiredLabel:b,isRequired:y}),K("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:S,required:y,type:"text"})):K("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?K("label",{for:"email",class:"form__label"},K(Di,{label:h,isRequiredLabel:b,isRequired:_}),K("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:_,type:"email"})):K("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),K("label",{for:"message",class:"form__label"},K(Di,{label:E,isRequiredLabel:b,isRequired:!0}),K("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:w,required:!0,rows:5})),D?K("label",{for:"screenshot",class:"form__label"},K("button",{class:"btn btn--default",disabled:N,type:"button",onClick:()=>{Y(null),L(R=>!R)}},A?f:l),ee?K("div",{class:"form__error-container"},ee.message):null):null),K("div",{class:"btn-group"},K("button",{class:"btn btn--primary",disabled:N,type:"submit"},C),K("button",{class:"btn btn--default",disabled:N,type:"button",onClick:r},p))))}function Di({label:e,isRequired:t,isRequiredLabel:n}){return K("span",{class:"form__label__text"},e,t&&K("span",{class:"form__label__text--required"},n))}const wo=16,Wl=17,_0="http://www.w3.org/2000/svg";function y0(){const e=c=>it.document.createElementNS(_0,c),t=Ye(e("svg"),{width:`${wo}`,height:`${Wl}`,viewBox:`0 0 ${wo} ${Wl}`,fill:"inherit"}),n=Ye(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ye(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Ye(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=Ye(e("clipPath"),{id:"clip0_57_156"}),a=Ye(e("rect"),{width:`${wo}`,height:`${wo}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),t}function S0({open:e,onFormSubmitted:t,...n}){const r=n.options,o=io(()=>({__html:y0().outerHTML}),[]),[s,i]=Sn(null),a=Zn(()=>{s&&(clearTimeout(s),i(null)),t()},[s]),c=Zn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},UT))},[t]);return K(so,null,s?K("div",{class:"success__position",onClick:a},K("div",{class:"success__content"},r.successMessageText,K("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):K("dialog",{class:"dialog",onClick:r.onFormClose,open:e},K("div",{class:"dialog__position"},K("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},K(h0,{options:r}),K(g0,{...n,onSubmitSuccess:c})))))}const b0=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,E0=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,v0=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,T0=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,I0=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function w0(e){const t=ue.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${b0}
${E0}
${v0}
${T0}
${I0}
`,e&&t.setAttribute("nonce",e),t}function k0(){const e=j().getUser(),t=we().getUser(),n=Mt().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const R0=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,s=e.useSentryUser,i=k0(),a=ue.createElement("div"),c=w0(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),ue.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),M()?.emit("openFeedbackWidget"),u=ue.body.style.overflow,ue.body.style.overflow="hidden"},close(){f(!1),ue.body.style.overflow=u}},l=t?.createInput({h:K,hooks:d0,dialog:d,options:e}),f=p=>{t0(K(S0,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(s&&i?.[s.name]||""),defaultEmail:String(s&&i?.[s.email]||""),onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,m)=>{f(!1),e.onSubmitSuccess?.(h,m)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function C0({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function A0(e){const t=ue.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function x0({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function M0({hooks:e}){function t(){const[n,r]=e.useState(it.devicePixelRatio??1);return e.useEffect(()=>{const o=()=>{r(it.devicePixelRatio)},s=matchMedia(`(resolution: ${it.devicePixelRatio}dppx)`);return s.addEventListener("change",o),()=>{s.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:s,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await Dr.mediaDevices.getDisplayMedia({video:{width:it.innerWidth*a,height:it.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=ue.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),s()})().catch(i)},[])}}function N0(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function qt(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function $i(e,t){qt(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function Fi(e,t,n){qt(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(s=>{N0(s,o,t)})})}function O0({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){const s=M0({hooks:t}),i=x0({h:e}),a=C0({h:e}),c={__html:A0(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),_=t.useRef(null),y=t.useRef(null),E=t.useRef(null),w=t.useRef(null),[v,S]=t.useState(1),C=t.useMemo(()=>{const A=ue.getElementById(o.id);if(!A)return"white";const L=getComputedStyle(A);return L.getPropertyValue("--button-primary-background")||L.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{const A=()=>{const L=_.current;L&&(qt(l.canvas,{alpha:!1},D=>{const ee=Math.min(L.clientWidth/D.width,L.clientHeight/D.height);S(ee)}),(L.clientHeight===0||L.clientWidth===0)&&setTimeout(A,0))};return A(),it.addEventListener("resize",A),()=>{it.removeEventListener("resize",A)}},[l]);const b=t.useCallback((A,L)=>{qt(A,{alpha:!0},(D,ee)=>{ee.scale(L,L),D.width=l.canvas.width,D.height=l.canvas.height})},[l]);t.useEffect(()=>{b(y.current,l.dpi),$i(y.current,l.canvas)},[l]),t.useEffect(()=>{b(E.current,l.dpi),qt(E.current,{alpha:!0},(A,L)=>{L.clearRect(0,0,A.width,A.height)}),Fi(E.current,C,h)},[h,C]),t.useEffect(()=>{b(n,l.dpi),$i(n,l.canvas),qt(ue.createElement("canvas"),{alpha:!0},(A,L)=>{L.scale(l.dpi,l.dpi),A.width=l.canvas.width,A.height=l.canvas.height,Fi(A,C,h),$i(n,A)})},[h,l,C]);const N=A=>{if(!f||!w.current)return;const L=w.current.getBoundingClientRect(),D={type:f,x:A.offsetX/v,y:A.offsetY/v},ee=(I,q)=>{const R=(q.clientX-L.x)/v,V=(q.clientY-L.y)/v;return{type:I.type,x:Math.min(I.x,R),y:Math.min(I.y,V),w:Math.abs(R-I.x),h:Math.abs(V-I.y)}},Y=I=>{qt(E.current,{alpha:!0},(q,R)=>{R.clearRect(0,0,q.width,q.height)}),Fi(E.current,C,[...h,ee(D,I)])},ne=I=>{const q=ee(D,I);q.w*v>=1&&q.h*v>=1&&m(R=>[...R,q]),ue.removeEventListener("mousemove",Y),ue.removeEventListener("mouseup",ne)};ue.addEventListener("mousemove",Y),ue.addEventListener("mouseup",ne)},B=t.useCallback(A=>L=>{L.preventDefault(),L.stopPropagation(),m(D=>{const ee=[...D];return ee.splice(A,1),ee})},[]),T={width:`${l.canvas.width*v}px`,height:`${l.canvas.height*v}px`},P=A=>{A.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:_},e("canvas",{ref:y,id:"background",style:T}),e("canvas",{ref:E,id:"foreground",style:T}),e("div",{ref:w,onMouseDown:N,style:T},h.map((A,L)=>e("div",{key:L,class:"editor__rect",style:{top:`${A.y*v}px`,left:`${A.x*v}px`,width:`${A.w*v}px`,height:`${A.h*v}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:B(L),onMouseDown:P,onMouseUp:P,type:"button"},e(a,null))))))),e(i,{options:o,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return s({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,_)=>{qt(ue.createElement("canvas"),{alpha:!1},(y,E)=>{E.scale(_,_),y.width=m.videoWidth,y.height=m.videoHeight,E.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:_})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const P0=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=ue.createElement("canvas");return{input:O0({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{const s=await new Promise(i=>{o.toBlob(i,"image/png")});if(s)return{data:new Uint8Array(await s.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),O=F;let wa=0;function ch(){return wa>0}function L0(){wa++,setTimeout(()=>{wa--})}function lr(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{const o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(Xa(e))return e}catch{return e}const r=function(...o){try{const s=o.map(i=>lr(i,t));return e.apply(this,s)}catch(s){throw L0(),qe(i=>{i.addEventProcessor(a=>(t.mechanism&&(oa(a,void 0),Lt(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),ge(s)}),s}};try{for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}lf(r,e),Ce(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Pc(){const e=Fn(),{referrer:t}=O.document||{},{userAgent:n}=O.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const D0={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},jl=O;async function uh(e,t){const n=D0[e],r=jl.Sentry=jl.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;const s=$0(n),i=O.document.createElement("script");i.src=s,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=O.document.currentScript,u=O.document.body||O.document.head||c?.parentElement;if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function $0(e){const n=M()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${Ct}/${e}.min.js`,n).toString()}const F0=Xp({lazyLoadIntegration:uh}),zl=Xp({getModalIntegration:()=>R0,getScreenshotIntegration:()=>P0});function oi(e,t){const n=Lc(e,t),r={type:j0(t),value:z0(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function B0(e,t,n,r){const s=M()?.getOptions().normalizeDepth,i=V0(t),a={__serialized__:$f(t,s)};if(i)return{exception:{values:[oi(e,i)]},extra:a};const c={exception:{values:[{type:Bs(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:q0(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Lc(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Bi(e,t){return{exception:{values:[oi(e,t)]}}}function Lc(e,t){const n=t.stacktrace||t.stack||"",r=H0(t),o=W0(t);try{return e(n,r,o)}catch{}return[]}const U0=/Minified React error #\d+;/i;function H0(e){return e&&U0.test(e.message)?1:0}function W0(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function lh(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function j0(e){const t=e?.name;return!t&&lh(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function z0(e){const t=e?.message;return lh(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function dh(e,t,n,r){const o=n?.syntheticException||void 0,s=si(e,t,o,r);return Lt(s),s.level="error",n?.event_id&&(s.event_id=n.event_id),Gs(s)}function fh(e,t,n="info",r,o){const s=r?.syntheticException||void 0,i=ka(e,t,s,o);return i.level=n,r?.event_id&&(i.event_id=r.event_id),Gs(i)}function si(e,t,n,r,o){let s;if(af(t)&&t.error)return Bi(e,t.error);if(vu(t)||jg(t)){const i=t;if("stack"in t)s=Bi(e,t);else{const a=i.name||(vu(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;s=ka(e,c,n,r),oa(s,c)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":`${i.code}`}),s}return At(t)?Bi(e,t):yt(t)||Bs(t)?(s=B0(e,t,n,o),Lt(s,{synthetic:!0}),s):(s=ka(e,t,n,r),oa(s,`${t}`),Lt(s,{synthetic:!0}),s)}function ka(e,t,n,r){const o={};if(r&&n){const s=Lc(e,n);s.length&&(o.exception={values:[{value:t,stacktrace:{frames:s}}]}),Lt(o,{synthetic:!0})}if(Fs(t)){const{__sentry_template_string__:s,__sentry_template_values__:i}=t;return o.logentry={message:s,params:i},o}return o.message=t,o}function q0(e,{isUnhandledRejection:t}){const n=Kg(e),r=t?"promise rejection":"exception";return af(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Bs(e)?`Event \`${G0(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function G0(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function V0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class ph extends SS{constructor(t){const n=J0(t),r=O.SENTRY_SDK_SOURCE||yT();yp(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:o,sendClientReports:s,enableLogs:i,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;O.document&&(s||i||u)&&O.document.addEventListener("visibilitychange",()=>{O.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),i&&uc(this),u&&dc(this))}),o&&this.on("beforeSendSession",LS)}eventFromException(t,n){return dh(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return fh(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}}function J0(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:O.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Ln=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,G=F,K0=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",ao=(e,t,n,r)=>{let o,s;return i=>{t.value>=0&&(i||r)&&(s=t.value-(o??0),(s||o===void 0)&&(o=t.value,t.delta=s,t.rating=K0(t.value,n),e(t)))}},co=(e=!0)=>{const t=G.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ir=()=>co()?.activationStart??0;function kn(e,t,n){G.document&&G.addEventListener(e,t,n)}function Dc(e,t,n){G.document&&G.removeEventListener(e,t,n)}let er=-1;const hh=new Set,Y0=()=>G.document?.visibilityState==="hidden"&&!G.document?.prerendering?0:1/0,Xo=e=>{if(X0(e)&&er>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of hh)t();isFinite(er)||(er=e.type==="visibilitychange"?e.timeStamp:0,Dc("prerenderingchange",Xo,!0))}},uo=()=>{if(G.document&&er<0){const e=Ir();er=(G.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??Y0(),kn("visibilitychange",Xo,!0),kn("pagehide",Xo,!0),kn("prerenderingchange",Xo,!0)}return{get firstHiddenTime(){return er},onHidden(e){hh.add(e)}}};function X0(e){return e.type==="pagehide"||G.document?.visibilityState==="hidden"}const Q0=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,lo=(e,t=-1)=>{const n=co();let r="navigate";return n&&(G.document?.prerendering||Ir()>0?r="prerender":G.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:Q0(),navigationType:r}},Ui=new WeakMap;function $c(e,t){return Ui.get(e)||Ui.set(e,new t),Ui.get(e)}class vs{constructor(){vs.prototype.__init.call(this),vs.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const wr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},Fc=e=>{let t=!1;return()=>{t||(e(),t=!0)}},ii=e=>{G.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Z0=[1800,3e3],eI=(e,t={})=>{ii(()=>{const n=uo(),r=lo("FCP");let o;const i=wr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Ir(),0),r.entries.push(c),o(!0)))});i&&(o=ao(e,r,Z0,t.reportAllChanges))})},tI=[.1,.25],nI=(e,t={})=>{eI(Fc(()=>{const n=lo("CLS",0);let r;const o=uo(),s=$c(t,vs),i=c=>{for(const u of c)s._processEntry(u);s._sessionValue>n.value&&(n.value=s._sessionValue,n.entries=s._sessionEntries,r())},a=wr("layout-shift",i);a&&(r=ao(e,n,tI,t.reportAllChanges),o.onHidden(()=>{i(a.takeRecords()),r(!0)}),G?.setTimeout?.(r))}))};let mh=0,Hi=1/0,ko=0;const rI=e=>{e.forEach(t=>{t.interactionId&&(Hi=Math.min(Hi,t.interactionId),ko=Math.max(ko,t.interactionId),mh=ko?(ko-Hi)/7+1:0)})};let Ra;const gh=()=>Ra?mh:performance.interactionCount||0,oI=()=>{"interactionCount"in performance||Ra||(Ra=wr("event",rI,{type:"event",buffered:!0,durationThreshold:0}))},Wi=10;let _h=0;const sI=()=>gh()-_h;class Ts{constructor(){Ts.prototype.__init.call(this),Ts.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){_h=gh(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(sI()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Wi||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,s)=>s._latency-o._latency),this._longestInteractionList.length>Wi){const o=this._longestInteractionList.splice(Wi);for(const s of o)this._longestInteractionMap.delete(s.id)}this._onAfterProcessingINPCandidate?.(r)}}}const yh=e=>{const t=n=>{(n.type==="pagehide"||G.document?.visibilityState==="hidden")&&e(n)};kn("visibilitychange",t,!0),kn("pagehide",t,!0)},Sh=e=>{const t=G.requestIdleCallback||G.setTimeout;G.document?.visibilityState==="hidden"?e():(e=Fc(e),kn("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),Dc("visibilitychange",e,{capture:!0})}),yh(e))},iI=[200,500],aI=40,cI=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=uo();ii(()=>{oI();const r=lo("INP");let o;const s=$c(t,Ts),i=c=>{Sh(()=>{for(const d of c)s._processEntry(d);const u=s._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,o())})},a=wr("event",i,{durationThreshold:t.durationThreshold??aI});o=ao(e,r,iI,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{i(a.takeRecords()),o(!0)}))})};class uI{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const lI=[2500,4e3],dI=(e,t={})=>{ii(()=>{const n=uo(),r=lo("LCP");let o;const s=$c(t,uI),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)s._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-Ir(),0),r.entries=[u],o())},a=wr("largest-contentful-paint",i);if(a){o=ao(e,r,lI,t.reportAllChanges);const c=Fc(()=>{i(a.takeRecords()),a.disconnect(),o(!0)}),u=d=>{d.isTrusted&&(Sh(c),Dc(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])kn(d,u,{capture:!0})}})},fI=[800,1800],Ca=e=>{G.document?.prerendering?ii(()=>Ca(e)):G.document?.readyState!=="complete"?addEventListener("load",()=>Ca(e),!0):setTimeout(e)},pI=(e,t={})=>{const n=lo("TTFB"),r=ao(e,n,fI,t.reportAllChanges);Ca(()=>{const o=co();o&&(n.value=Math.max(o.responseStart-Ir(),0),n.entries=[o],r(!0))})},Br={},Is={};let bh,Eh,vh,Th;function Bc(e,t=!1){return ai("cls",e,mI,bh,t)}function Uc(e,t=!1){return ai("lcp",e,gI,Eh,t)}function hI(e){return ai("ttfb",e,_I,vh)}function Ih(e){return ai("inp",e,yI,Th)}function Dn(e,t){return wh(e,t),Is[e]||(SI(e),Is[e]=!0),kh(e,t)}function fo(e,t){const n=Br[e];if(n?.length)for(const r of n)try{r(t)}catch(o){Ln&&g.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ot(r)}
Error:`,o)}}function mI(){return nI(e=>{fo("cls",{metric:e}),bh=e},{reportAllChanges:!0})}function gI(){return dI(e=>{fo("lcp",{metric:e}),Eh=e},{reportAllChanges:!0})}function _I(){return pI(e=>{fo("ttfb",{metric:e}),vh=e})}function yI(){return cI(e=>{fo("inp",{metric:e}),Th=e})}function ai(e,t,n,r,o=!1){wh(e,t);let s;return Is[e]||(s=n(),Is[e]=!0),r&&t({metric:r}),kh(e,t,o?s:void 0)}function SI(e){const t={};e==="event"&&(t.durationThreshold=0),wr(e,n=>{fo(e,{entries:n})},t)}function wh(e,t){Br[e]=Br[e]||[],Br[e].push(t)}function kh(e,t,n){return()=>{n&&n();const r=Br[e];if(!r)return;const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function bI(e){return"duration"in e}function ji(e){return typeof e=="number"&&isFinite(e)}function on(e,t,n,{...r}){const o=$(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),An(e,()=>{const s=tt({startTime:t,...r});return s&&s.end(n),s})}function Hc(e){const t=M();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:s}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=j(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":G.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return tt({name:n,attributes:m,startTime:s,experimental:{standalone:!0}})}function po(){return G.addEventListener&&G.performance}function ve(e){return e/1e3}function EI(e){let t="unknown",n="unknown",r="";for(const o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function Rh(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Ch(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}yh(()=>{o("pagehide")});const s=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),s(),i())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i()})}function vI(e){let t=0,n;if(!Rh("layout-shift"))return;const r=Bc(({metric:o})=>{const s=o.entries[o.entries.length-1];s&&(t=o.value,n=s)},!0);Ch(e,(o,s)=>{TI(t,n,s,o),r()})}function TI(e,t,n,r){Ln&&g.log(`Sending CLS span (${e})`);const o=t?ve((Pe()||0)+t.startTime):me(),s=j().getScopeData().transactionName,i=t?ze(t.sources[0]?.node):"Layout shift",a={[z]:"auto.http.browser.cls",[de]:"ui.webvital.cls",[Sr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=ze(u.node)});const c=Hc({name:i,transaction:s,attributes:a,startTime:o});c&&(c.addEvent("cls",{[to]:"",[no]:e}),c.end(o))}function II(e){let t=0,n;if(!Rh("largest-contentful-paint"))return;const r=Uc(({metric:o})=>{const s=o.entries[o.entries.length-1];s&&(t=o.value,n=s)},!0);Ch(e,(o,s)=>{wI(t,n,s,o),r()})}function wI(e,t,n,r){Ln&&g.log(`Sending LCP span (${e})`);const o=ve((Pe()||0)+(t?.startTime||0)),s=j().getScopeData().transactionName,i=t?ze(t.element):"Largest contentful paint",a={[z]:"auto.http.browser.lcp",[de]:"ui.webvital.lcp",[Sr]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=ze(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=Hc({name:i,transaction:s,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[to]:"millisecond",[no]:e}),c.end(o))}function Qe(e){return e&&((Pe()||performance.timeOrigin)+e)/1e3}function Ah(e){const t={};if(e.nextHopProtocol!=null){const{name:n,version:r}=EI(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Pe()||po()?.timeOrigin?kI({...t,"http.request.redirect_start":Qe(e.redirectStart),"http.request.redirect_end":Qe(e.redirectEnd),"http.request.worker_start":Qe(e.workerStart),"http.request.fetch_start":Qe(e.fetchStart),"http.request.domain_lookup_start":Qe(e.domainLookupStart),"http.request.domain_lookup_end":Qe(e.domainLookupEnd),"http.request.connect_start":Qe(e.connectStart),"http.request.secure_connection_start":Qe(e.secureConnectionStart),"http.request.connection_end":Qe(e.connectEnd),"http.request.request_start":Qe(e.requestStart),"http.request.response_start":Qe(e.responseStart),"http.request.response_end":Qe(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function kI(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const RI=2147483647;let ql=0,st={},He,ws;function CI({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=po();if(r&&Pe()){r.mark&&G.performance.mark("sentry-tracing-init");const o=t?II(n):OI(),s=PI(),i=e?vI(n):NI();return()=>{o?.(),s(),i?.()}}return()=>{}}function AI(){Dn("longtask",({entries:e})=>{const t=be();if(!t)return;const{op:n,start_timestamp:r}=$(t);for(const o of e){const s=ve(Pe()+o.startTime),i=ve(o.duration);n==="navigation"&&r&&s<r||on(t,s,s+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[z]:"auto.ui.browser.metrics"}})}})}function xI(){new PerformanceObserver(t=>{const n=be();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const o=ve(Pe()+r.startTime),{start_timestamp:s,op:i}=$(n);if(i==="navigation"&&s&&o<s)continue;const a=ve(r.duration),c={[z]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),on(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function MI(){Dn("event",({entries:e})=>{const t=be();if(t){for(const n of e)if(n.name==="click"){const r=ve(Pe()+n.startTime),o=ve(n.duration),s={name:ze(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[z]:"auto.ui.browser.metrics"}},i=uf(n.target);i&&(s.attributes["ui.component_name"]=i),on(t,r,r+o,s)}}})}function NI(){return Bc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.cls={value:e.value,unit:""},ws=t)},!0)}function OI(){return Uc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.lcp={value:e.value,unit:"millisecond"},He=t)},!0)}function PI(){return hI(({metric:e})=>{e.entries[e.entries.length-1]&&(st.ttfb={value:e.value,unit:"millisecond"})})}function LI(e,t){const n=po(),r=Pe();if(!n?.getEntries||!r)return;const o=ve(r),s=n.getEntries(),{op:i,start_timestamp:a}=$(e);s.slice(ql).forEach(c=>{const u=ve(c.startTime),d=ve(Math.max(0,c.duration));if(!(i==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{BI(e,c,o);break}case"mark":case"paint":case"measure":{$I(e,c,u,d,o,t.ignorePerformanceApiSpans);const l=uo(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(st.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(st.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{WI(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),ql=Math.max(s.length-1,0),jI(e),i==="pageload"&&(GI(st),t.recordClsOnPageloadSpan||delete st.cls,t.recordLcpOnPageloadSpan||delete st.lcp,Object.entries(st).forEach(([c,u])=>{Bf(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Ir()),zI(e,t)),He=void 0,ws=void 0,st={}}function DI(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function $I(e,t,n,r,o,s){if(DI(t)||["mark","measure"].includes(t.entryType)&&ct(t.name,s))return;const i=co(!1),a=ve(i?i.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[z]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),FI(l,t),c<=d&&on(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function FI(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,o]of Object.entries(n))if(o&&tn(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(tn(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function BI(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Ro(e,t,r,n)}),Ro(e,t,"secureConnection",n,"TLS/SSL"),Ro(e,t,"fetch",n,"cache"),Ro(e,t,"domainLookup",n,"DNS"),HI(e,t,n)}function Ro(e,t,n,r,o=n){const s=UI(n),i=t[s],a=t[`${n}Start`];!a||!i||on(e,r+ve(a),r+ve(i),{op:`browser.${o}`,name:t.name,attributes:{[z]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function UI(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function HI(e,t,n){const r=n+ve(t.requestStart),o=n+ve(t.responseEnd),s=n+ve(t.responseStart);t.responseEnd&&(on(e,r,o,{op:"browser.request",name:t.name,attributes:{[z]:"auto.ui.browser.metrics"}}),on(e,s,o,{op:"browser.response",name:t.name,attributes:{[z]:"auto.ui.browser.metrics"}}))}function WI(e,t,n,r,o,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i?.includes(a))return;const c={[z]:"auto.resource.browser.metrics"},u=wn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(G.location.origin),qI(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...Ah(t)},l=s+r,f=l+o;on(e,l,f,{name:n.replace(G.location.origin,""),op:a,attributes:d})}function jI(e){const t=G.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),ji(n.rtt)&&(st["connection.rtt"]={value:n.rtt,unit:"millisecond"})),ji(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),ji(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function zI(e,t){He&&t.recordLcpOnPageloadSpan&&(He.element&&e.setAttribute("lcp.element",ze(He.element)),He.id&&e.setAttribute("lcp.id",He.id),He.url&&e.setAttribute("lcp.url",He.url.trim().slice(0,200)),He.loadTime!=null&&e.setAttribute("lcp.loadTime",He.loadTime),He.renderTime!=null&&e.setAttribute("lcp.renderTime",He.renderTime),e.setAttribute("lcp.size",He.size)),ws?.sources&&t.recordClsOnPageloadSpan&&ws.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,ze(n.node)))}function qI(e,t,n){n.forEach(([r,o])=>{const s=e[r];s!=null&&(typeof s=="number"&&s<RI||typeof s=="string")&&(t[o]=s)})}function GI(e){const t=co(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function VI(){return po()&&Pe()?Dn("element",JI):()=>{}}const JI=({entries:e})=>{const t=be(),n=t?Se(t):void 0,r=n?$(n).description:j().getScopeData().transactionName;e.forEach(o=>{const s=o;if(!s.identifier)return;const i=s.name,a=s.renderTime,c=s.loadTime,[u,d]=c?[ve(c),"load-time"]:a?[ve(a),"render-time"]:[me(),"entry-emission"],l=i==="image-paint"?ve(Math.max(0,(a??0)-(c??0))):0,f={[z]:"auto.ui.browser.elementtiming",[de]:"ui.elementtiming",[ie]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":s.id,"element.type":s.element?.tagName?.toLowerCase()||"unknown","element.size":s.naturalWidth&&s.naturalHeight?`${s.naturalWidth}x${s.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":s.url||void 0,"element.identifier":s.identifier,"element.paint_type":i};Ut({name:`element[${s.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})},KI=1e3;let Gl,Aa,xa;function xh(e){cn("dom",e),un("dom",YI)}function YI(){if(!G.document)return;const e=Ze.bind(null,"dom"),t=Vl(e,!0);G.document.addEventListener("click",t,!1),G.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const o=G[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(Me(o,"addEventListener",function(s){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[i]=u[i]||{refCount:0};if(!d.handler){const l=Vl(e);d.handler=l,s.call(this,i,l,c)}d.refCount++}catch{}return s.call(this,i,a,c)}}),Me(o,"removeEventListener",function(s){return function(i,a,c){if(i==="click"||i=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[i];d&&(d.refCount--,d.refCount<=0&&(s.call(this,i,d.handler,c),d.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,a,c)}}))})}function XI(e){if(e.type!==Aa)return!1;try{if(!e.target||e.target._sentryId!==xa)return!1}catch{}return!0}function QI(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Vl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=ZI(n);if(QI(n.type,r))return;Ce(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ce(r,"_sentryId",Re());const o=n.type==="keypress"?"input":n.type;XI(n)||(e({event:n,name:o,global:t}),Aa=n.type,xa=r?r._sentryId:void 0),clearTimeout(Gl),Gl=G.setTimeout(()=>{xa=void 0,Aa=void 0},KI)}}function ZI(e){try{return e.target}catch{return null}}let Co;function ci(e){const t="history";cn(t,e),un(t,ew)}function ew(){if(G.addEventListener("popstate",()=>{const t=G.location.href,n=Co;if(Co=t,n===t)return;Ze("history",{from:n,to:t})}),!uT())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const o=Co,s=tw(String(r));if(Co=s,o===s)return t.apply(this,n);Ze("history",{from:o,to:s})}return t.apply(this,n)}}Me(G.history,"pushState",e),Me(G.history,"replaceState",e)}function tw(e){try{return new URL(e,G.location.origin).toString()}catch{return e}}const Qo={};function Wc(e){const t=Qo[e];if(t)return t;let n=G[e];if(ba(n))return Qo[e]=n.bind(G);const r=G.document;if(r&&typeof r.createElement=="function")try{const o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);const s=o.contentWindow;s?.[e]&&(n=s[e]),r.head.removeChild(o)}catch(o){Ln&&g.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(Qo[e]=n.bind(G))}function nw(e){Qo[e]=void 0}function ho(...e){return Wc("setTimeout")(...e)}const Rt="__sentry_xhr_v3__";function jc(e){cn("xhr",e),un("xhr",rw)}function rw(){if(!G.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const o=new Error,s=me()*1e3,i=at(r[0])?r[0].toUpperCase():void 0,a=ow(r[1]);if(!i||!a)return t.apply(n,r);n[Rt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[Rt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:me()*1e3,startTimestamp:s,xhr:n,virtualError:o};Ze("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[Rt];return h&&at(f)&&at(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const o=n[Rt];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);const s={startTimestamp:me()*1e3,xhr:n};return Ze("xhr",s),t.apply(n,r)}})}function ow(e){if(at(e))return e;try{return e.toString()}catch{}}const sw=Symbol.for("sentry__originalRequestBody");function Mh(e){return new URLSearchParams(e).toString()}function ks(e,t=g){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Mh(e)];if(!e)return[void 0]}catch(n){return Ln&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ln&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function zc(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][sw];return n!==void 0?n:void 0}}function Nh(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Ln&&g.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[o,s]=r.split(": ");return s&&(n[o.toLowerCase()]=s),n},{}):{}}const zi=[],Zo=new Map,jn=new Map,iw=60;function aw(){if(po()&&Pe()){const t=cw();return()=>{t()}}return()=>{}}const Ma={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function cw(){return Ih(uw)}const uw=({metric:e})=>{if(e.value==null)return;const t=ve(e.value);if(t>iw)return;const n=e.entries.find(h=>h.duration===e.value&&Ma[h.name]);if(!n)return;const{interactionId:r}=n,o=Ma[n.name],s=ve(Pe()+n.startTime),i=be(),a=i?Se(i):void 0,c=r!=null?Zo.get(r):void 0,u=c?.span||a,d=u?$(u).description:j().getScopeData().transactionName,l=c?.elementName||ze(n.target),f={[z]:"auto.http.browser.inp",[de]:`ui.interaction.${o}`,[Sr]:n.duration},p=Hc({name:l,transaction:d,attributes:f,startTime:s});p&&(p.addEvent("inp",{[to]:"millisecond",[no]:e.value}),p.end(s+t))};function lw(){const e=Object.keys(Ma);bs()&&e.forEach(o=>{G.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){const s=o.target;if(!s)return;const i=ze(s),a=Math.round(o.timeStamp);if(jn.set(a,i),jn.size>50){const c=jn.keys().next().value;c!==void 0&&jn.delete(c)}}function n(o){const s=Math.round(o.startTime);let i=jn.get(s);if(!i)for(let a=-5;a<=5;a++){const c=jn.get(s+a);if(c){i=c;break}}return i||"<unknown>"}const r=({entries:o})=>{const s=be(),i=s&&Se(s);o.forEach(a=>{if(!bI(a))return;const c=a.interactionId;if(c==null||Zo.has(c))return;const u=a.target?ze(a.target):n(a);if(zi.length>10){const d=zi.shift();Zo.delete(d)}zi.push(c),Zo.set(c,{span:i,elementName:u})})};Dn("event",r),Dn("first-input",r)}const dw=40;function qc(e,t=Wc("fetch")){let n=0,r=0;async function o(s){const i=s.body.length;n+=i,r++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw nw("fetch"),c}finally{n-=i,r--}}return ap(e,o,hc(e.bufferSize||dw))}const k=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function fw(){const e=M();if(!e){k&&g.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){k&&g.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function pw(){const e=M();if(!e){k&&g.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){k&&g.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const hw={startProfiler:fw,stopProfiler:pw},mw=10,gw=20,_w=30,yw=40,Sw=50;function dr(e,t,n,r){const o={filename:e,function:t==="<anonymous>"?St:t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}const bw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Ew=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,vw=/\((\S*)(?::(\d+))(?::(\d+))\)/,Tw=/at (.+?) ?\(data:(.+?),/,Iw=e=>{const t=e.match(Tw);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=bw.exec(e);if(n){const[,o,s,i]=n;return dr(o,St,+s,+i)}const r=Ew.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=vw.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[s,i]=$h(r[1]||St,r[2]);return dr(i,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Oh=[_w,Iw],ww=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,kw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Rw=e=>{const t=ww.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=kw.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],o=t[1]||St;return[o,r]=$h(o,r),dr(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Ph=[Sw,Rw],Cw=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Aw=e=>{const t=Cw.exec(e);return t?dr(t[2],t[1]||St,+t[3],t[4]?+t[4]:void 0):void 0},xw=[yw,Aw],Mw=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Nw=e=>{const t=Mw.exec(e);return t?dr(t[2],t[3]||St,+t[1]):void 0},Ow=[mw,Nw],Pw=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Lw=e=>{const t=Pw.exec(e);return t?dr(t[5],t[3]||t[4]||St,+t[1],+t[2]):void 0},Dw=[gw,Lw],Lh=[Oh,Ph],Dh=tf(...Lh),$h=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:St,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function $w(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Bt(r)}},s=Fw(e);return pt(o,[s])}function Fw(e){return[{type:"user_report"},e]}const Ao=1024,Bw="Breadcrumbs",Uw=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Bw,setup(n){t.console&&yc(jw(n)),t.dom&&xh(Ww(n,t.dom)),t.xhr&&jc(zw(n)),t.fetch&&Cc(qw(n)),t.history&&ci(Gw(n)),t.sentry&&n.on("beforeSendEvent",Hw(n))}}}),Fh=Uw;function Hw(e){return function(n){M()===e&&ft({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:gn(n)},{event:n})}}function Ww(e,t){return function(r){if(M()!==e)return;let o,s,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Ao&&(k&&g.warn(`\`dom.maxStringLength\` cannot exceed ${Ao}, but a value of ${a} was configured. Sentry will use ${Ao} instead.`),a=Ao),typeof i=="string"&&(i=[i]);try{const u=r.event,d=Vw(u)?u.target:u;o=ze(d,{keyAttrs:i,maxStringLength:a}),s=uf(d)}catch{o="<unknown>"}if(o.length===0)return;const c={category:`ui.${r.name}`,message:o};s&&(c.data={"ui.component_name":s}),ft(c,{event:r.event,name:r.name,global:r.global})}}function jw(e){return function(n){if(M()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:ms(n.level),message:as(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${as(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ft(r,{input:n.args,level:n.level})}}function zw(e){return function(n){if(M()!==e)return;const{startTimestamp:r,endTimestamp:o}=n,s=n.xhr[Rt];if(!r||!o||!s)return;const{method:i,url:a,status_code:c,body:u}=s,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f={category:"xhr",data:d,type:"http",level:qp(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),ft(f,l)}}function qw(e){return function(n){if(M()!==e)return;const{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:s,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),ft(a,i)}else{const s=n.response,i={...n.fetchData,status_code:s?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s?.status;const a={input:n.args,response:s,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:i,type:"http",level:qp(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),ft(c,a)}}}function Gw(e){return function(n){if(M()!==e)return;let r=n.from,o=n.to;const s=wn(O.location.href);let i=r?wn(r):void 0;const a=wn(o);i?.path||(i=s),s.protocol===a.protocol&&s.host===a.host&&(o=a.relative),s.protocol===i.protocol&&s.host===i.host&&(r=i.relative),ft({category:"navigation",data:{from:r,to:o}})}}function Vw(e){return!!e&&!!e.target}const Jw=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Kw="BrowserApiErrors",Yw=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Kw,setupOnce(){t.setTimeout&&Me(O,"setTimeout",Jl),t.setInterval&&Me(O,"setInterval",Jl),t.requestAnimationFrame&&Me(O,"requestAnimationFrame",Xw),t.XMLHttpRequest&&"XMLHttpRequest"in O&&Me(XMLHttpRequest.prototype,"send",Qw);const n=t.eventTarget;n&&(Array.isArray(n)?n:Jw).forEach(o=>Zw(o,t))}}}),Bh=Yw;function Jl(e){return function(...t){const n=t[0];return t[0]=lr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Ot(e)}`}}),e.apply(this,t)}}function Xw(e){return function(t){return e.apply(this,[lr(t,{mechanism:{data:{handler:Ot(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Qw(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&Me(n,o,function(s){const i={mechanism:{data:{handler:Ot(s)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=Xa(s);return a&&(i.mechanism.data.handler=Ot(a)),lr(s,i)})}),e.apply(this,t)}}function Zw(e,t){const r=O[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Me(r,"addEventListener",function(o){return function(s,i,a){try{ek(i)&&(i.handleEvent=lr(i.handleEvent,{mechanism:{data:{handler:Ot(i),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&tk(this,s,i),o.apply(this,[s,lr(i,{mechanism:{data:{handler:Ot(i),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),Me(r,"removeEventListener",function(o){return function(s,i,a){try{const c=i.__sentry_wrapped__;c&&o.call(this,s,c,a)}catch{}return o.call(this,s,i,a)}}))}function ek(e){return typeof e.handleEvent=="function"}function tk(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const Uh=()=>({name:"BrowserSession",setupOnce(){if(typeof O.document>"u"){k&&g.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}da({ignoreDuration:!0}),fa(),ci(({from:e,to:t})=>{e!==void 0&&e!==t&&(da({ignoreDuration:!0}),fa())})}}),nk="GlobalHandlers",rk=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:nk,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(ok(n),Kl("onerror")),t.onunhandledrejection&&(sk(n),Kl("onunhandledrejection"))}}}),Hh=rk;function ok(e){rf(t=>{const{stackParser:n,attachStacktrace:r}=zh();if(M()!==e||ch())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=ik(si(n,c||o,void 0,r,!1),s,i,a);u.level="error",br(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function sk(e){of(t=>{const{stackParser:n,attachStacktrace:r}=zh();if(M()!==e||ch())return;const o=Wh(t),s=tn(o)?jh(o):si(n,o,void 0,r,!0);s.level="error",br(s,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Wh(e){if(tn(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function jh(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function ik(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=ak(t)??Fn();return c.length===0&&c.push({colno:u,filename:l,function:St,in_app:!0,lineno:d}),e}function Kl(e){k&&g.log(`Global Handler attached: ${e}`)}function zh(){return M()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function ak(e){if(!(!at(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e}}const qh=()=>({name:"HttpContext",preprocessEvent(e){if(!O.navigator&&!O.location&&!O.document)return;const t=Pc(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),ck="cause",uk=5,lk="LinkedErrors",dk=((e={})=>{const t=e.limit||uk,n=e.key||ck;return{name:lk,preprocessEvent(r,o,s){const i=s.getOptions();XS(oi,i.stackParser,n,t,r,o)}}}),Gh=dk,fk="SpotlightBrowser",pk=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:fk,setup:()=>{k&&g.log("Using Sidecar URL",t)},processEvent:n=>gk(n)?null:n,afterAllSetup:n=>{hk(n,t)}}});function hk(e,t){const n=Wc("fetch");let r=0;e.on("beforeEnvelope",o=>{if(r>3){g.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:ds(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(s=>{s.status>=200&&s.status<400&&(r=0)},s=>{r++,g.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",s)})})}const mk=pk;function gk(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function _k(){return yk()?(k&&an(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function yk(){if(typeof O.window>"u")return!1;const e=O;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=Fn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(O===O.top&&r.some(s=>n.startsWith(`${s}://`)))}function Vh(e){return[Ep(),Sp(),Bh(),Fh(),Hh(),Gh(),wp(),qh(),Uh()]}function Sk(e={}){const t=!e.skipBrowserExtensionCheck&&_k();let n=e.defaultIntegrations==null?Vh():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:Bg(e.stackParser||Dh),integrations:Vy({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||qc};return IS(ph,r)}function bk(){}function Ek(e){e()}function Na(e={}){const t=O.document,n=t?.head||t?.body;if(!n){k&&g.error("[showReportDialog] Global document not defined");return}const r=j(),s=M()?.getDsn();if(!s){k&&g.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Vf()},a=O.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=qy(s,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{O.removeEventListener("message",d)}};O.addEventListener("message",d)}n.appendChild(a)}const vk=F,Tk="ReportingObserver",Yl=new WeakMap,Ik=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Yl.has(M()))for(const o of r)qe(s=>{s.setExtra("url",o.url);const i=`ReportingObserver [${o.type}]`;let a="No details available";if(o.body){const c={};for(const u in o.body)c[u]=o.body[u];if(s.setExtra("body",c),o.type==="crash"){const u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Gf(`${i}: ${a}`)})}return{name:Tk,setupOnce(){if(!dT())return;new vk.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Yl.set(r,!0)}}}),wk=Ik,kk="HttpClient",Rk=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:kk,setup(n){Dk(n,t),$k(n,t)}}}),Ck=Rk;function Ak(e,t,n,r,o){if(Kh(e,n.status,n.url)){const s=Fk(t,r);let i,a,c,u;Xh()&&([i,c]=Xl("Cookie",s),[a,u]=Xl("Set-Cookie",n));const d=Yh({url:s.url,method:s.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});br(d)}}function Xl(e,t){const n=Nk(t.headers);let r;try{const o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=Jh(o))}catch{}return[n,r]}function xk(e,t,n,r,o){if(Kh(e,t.status,t.responseURL)){let s,i,a;if(Xh()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=Jh(u))}catch{}try{a=Ok(t)}catch{}s=r}const c=Yh({url:t.responseURL,method:n,status:t.status,requestHeaders:s,responseHeaders:a,responseCookies:i,error:o,type:"xhr"});br(c)}}function Mk(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Jh(e){return e.split("; ").reduce((t,n)=>{const[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function Nk(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function Ok(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[o,s]=r.split(": ");return o&&s&&(n[o]=s),n},{}):{}}function Pk(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function Lk(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function Dk(e,t){Gp()&&Cc(n=>{if(M()!==e)return;const{response:r,args:o,error:s,virtualError:i}=n,[a,c]=o;r&&Ak(t,a,r,c,s||i)},!1)}function $k(e,t){"XMLHttpRequest"in F&&jc(n=>{if(M()!==e)return;const{error:r,virtualError:o}=n,s=n.xhr,i=s[Rt];if(!i)return;const{method:a,request_headers:c}=i;try{xk(t,s,a,c,r||o)}catch(u){k&&g.warn("Error while extracting response event form XHR response",u)}})}function Kh(e,t,n){return Lk(e.failedRequestStatusCodes,t)&&Pk(e.failedRequestTargets,n)&&!gp(n,M())}function Yh(e){const t=M(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,s={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Mk(e.responseHeaders)}}};return Lt(s,{type:`auto.http.client.${e.type}`,handled:!1}),s}function Fk(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Xh(){const e=M();return e?!!e.getOptions().sendDefaultPii:!1}const qi=F,Bk=7,Uk="ContextLines",Hk=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:Bk;return{name:Uk,processEvent(n){return jk(n,t)}}}),Wk=Hk;function jk(e,t){const n=qi.document,r=qi.location&&mp(qi.location.href);if(!n||!r)return e;const o=e.exception?.values;if(!o?.length)return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split(`
`),"</html>"];return o.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>zk(u,i,r,t)))}),e}function zk(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Qg(t,e,r),e}const qk="GraphQLClient",Gk=(e=>({name:qk,setup(t){Vk(t,e),Jk(t,e)}}));function Vk(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const s=$(n).data||{};if(!(s[de]==="http.client"))return;const c=s[h_]||s["http.url"],u=s[p_]||s["http.method"];if(!at(c)||!at(u))return;const{endpoints:d}=t,l=ct(c,d),f=Zh(r);if(l&&f){const p=em(f);if(p){const h=Qh(p);n.updateName(`${u} ${c} (${h})`),ui(p)&&n.setAttribute("graphql.document",p.query),li(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function Jk(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:o,type:s,data:i}=n;if(s==="http"&&(o==="fetch"||o==="xhr")){const d=i?.url,{endpoints:l}=t,f=ct(d,l),p=Zh(r);if(f&&i&&p){const h=em(p);if(!i.graphql&&h){const m=Qh(h);i["graphql.operation"]=m,ui(h)&&(i["graphql.document"]=h.query),li(h)&&(i["graphql.persisted_query.hash.sha256"]=h.extensions.persistedQuery.sha256Hash,i["graphql.persisted_query.version"]=h.extensions.persistedQuery.version)}}}})}function Qh(e){if(li(e))return`persisted ${e.operationName}`;if(ui(e)){const{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=Kk(t);return r?`${o} ${r}`:`${o}`}return"unknown"}function Zh(e){const t="xhr"in e;let n;if(t){const r=e.xhr[Rt];n=r&&ks(r.body)[0]}else{const r=zc(e.input);n=ks(r)[0]}return n}function Kk(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function es(e){return typeof e=="object"&&e!==null}function ui(e){return es(e)&&typeof e.query=="string"}function li(e){return es(e)&&typeof e.operationName=="string"&&es(e.extensions)&&es(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function em(e){try{const t=JSON.parse(e);return ui(t)||li(t)?t:void 0}catch{return}}const Yk=Gk,he=F,Gc="sentryReplaySession",Xk="replay_event",Vc="Unable to send Replay",Qk=3e5,Zk=9e5,eR=5e3,tR=5500,nR=6e4,rR=5e3,oR=3,Ql=15e4,xo=5e3,sR=3e3,iR=300,Jc=2e7,aR=4999,cR=5e4,Zl=36e5;var uR=Object.defineProperty,lR=(e,t,n)=>t in e?uR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ed=(e,t,n)=>lR(e,typeof t!="symbol"?t+"":t,n),Ie=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ie||{});function dR(e){return e.nodeType===e.ELEMENT_NODE}function Ur(e){return e?.host?.shadowRoot===e}function Hr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function fR(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function pR(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Rs(e){try{const t=e.rules||e.cssRules;return t?fR(Array.from(t,tm).join("")):null}catch{return null}}function hR(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],s=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${s?" !important":""};`}return`${e.selectorText} { ${t} }`}function tm(e){let t;if(gR(e))try{t=Rs(e.styleSheet)||pR(e)}catch{}else if(_R(e)){let n=e.cssText;const r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=hR(e)),r&&(n=mR(n)),r||o)return n}return t||e.cssText}function mR(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function gR(e){return"styleSheet"in e}function _R(e){return"selectorText"in e}let nm=class{constructor(){ed(this,"idNodeMap",new Map),ed(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function yR(){return new nm}function di({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Jr({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function fr(e){return e.toLowerCase()}function Oa(e){return e.toUpperCase()}const td="__rrweb_original__";function SR(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){const s=t.getImageData,i=td in s?s[td]:s;if(new Uint32Array(i.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function Kc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?fr(t):null}function Cs(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function rm(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const nd={};function om(e){const t=nd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch{}return nd[e]=r.bind(window)}function Pa(...e){return om("setTimeout")(...e)}function sm(...e){return om("clearTimeout")(...e)}function im(e){try{return e.contentDocument}catch{}}let bR=1;const ER=new RegExp("[^a-z0-9-_:]"),Kr=-2;function Yc(){return bR++}function vR(e){if(e instanceof HTMLFormElement)return"form";const t=fr(e.tagName);return ER.test(t)?"div":t}function TR(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let zn,rd;const IR=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,wR=/^(?:[a-z+]+:)?\/\//i,kR=/^www\..*/i,RR=/^(data:)([^,]*),(.*)/i;function CR(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),r=[];for(let o of n){if(o=o.trim(),!o)continue;const s=o.indexOf(":");if(s===-1){r.push(o);continue}const i=o.slice(0,s).trim();t.has(i)||r.push(o)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function As(e,t){return(e||"").replace(IR,(n,r,o,s,i,a)=>{const c=o||i||a,u=r||s||"";if(!c)return n;if(wR.test(c)||kR.test(c))return`url(${u}${c}${u})`;if(RR.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${TR(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const AR=/^[^ \t\n\r\u000c]+/,xR=/^[, \t\n\r\u000c]+/;function MR(e,t){if(t.trim()==="")return t;let n=0;function r(s){let i;const a=s.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const o=[];for(;r(xR),!(n>=t.length);){let s=r(AR);if(s.slice(-1)===",")s=Jn(e,s.substring(0,s.length-1)),o.push(s);else{let i="";s=Jn(e,s);let a=!1;for(;;){const c=t.charAt(n);if(c===""){o.push((s+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((s+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return o.join(", ")}const od=new WeakMap;function Jn(e,t){return!t||t.trim()===""?t:fi(e,t)}function NR(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function fi(e,t){let n=od.get(e);if(n||(n=e.createElement("a"),od.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function am(e,t,n,r,o,s,i){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Jn(e,r);if(n==="xlink:href"&&r[0]!=="#")return Jn(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Jn(e,r);if(n==="srcset")return MR(e,r);if(n==="style"){let a=As(r,fi(e));return i&&i.size>0&&(a=CR(a,i)),a}else if(t==="object"&&n==="data")return Jn(e,r);return typeof s=="function"?s(n,r,o):r}function cm(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function OR(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){const s=e.classList[o];if(t.test(s))return!0}if(n)return e.matches(n)}catch{}return!1}function PR(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function bn(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:bn(e.parentNode,t,n,r+1)}function Kn(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(PR(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function pr(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(s){if(c=bn(i,Kn(r,o)),c<0)return!0;a=bn(i,Kn(t,n),c>=0?c:1/0)}else{if(a=bn(i,Kn(t,n)),a<0)return!1;c=bn(i,Kn(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!s}catch{}return!!s}function LR(e,t,n){const r=e.contentWindow;if(!r)return;let o=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=Pa(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{sm(a),o=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return Pa(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function DR(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;const s=Pa(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{sm(s),r=!0,t()})}function $R(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:_,dataURLOptions:y={},inlineImages:E,recordCanvas:w,keepIframeSrcFn:v,newlyAddedElement:S=!1,ignoreCSSAttributes:C}=t,b=FR(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Ie.Document,childNodes:[],compatMode:e.compatMode}:{type:Ie.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ie.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:b};case e.ELEMENT_NODE:return UR(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:_,dataURLOptions:y,inlineImages:E,recordCanvas:w,keepIframeSrcFn:v,newlyAddedElement:S,rootId:b,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:C});case e.TEXT_NODE:return BR(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:_,rootId:b});case e.CDATA_SECTION_NODE:return{type:Ie.CDATA,textContent:"",rootId:b};case e.COMMENT_NODE:return{type:Ie.Comment,textContent:e.textContent||"",rootId:b};default:return!1}}function FR(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function BR(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=Rs(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=As(f,fi(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const _=pr(e,r,s,o,i,n);if(!p&&!h&&!m&&f&&_&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||_)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=di({type:null,tagName:l,maskInputOptions:c});f=Jr({isMasked:pr(e,r,s,o,i,y),element:e,value:f,maskInputFn:u})}return{type:Ie.Text,textContent:f||"",isStyle:p,rootId:d}}function UR(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:_,unmaskTextClass:y,maskTextSelector:E,unmaskTextSelector:w,ignoreCSSAttributes:v}=t,S=OR(e,r,o,s),C=vR(e);let b={};const N=e.attributes.length;for(let T=0;T<N;T++){const P=e.attributes[T];P.name&&!cm(C,P.name,P.value)&&(b[P.name]=am(n,C,fr(P.name),P.value,e,c,v))}if(C==="link"&&i){const T=Array.from(n.styleSheets).find(A=>A.href===e.href);let P=null;T&&(P=Rs(T)),P&&(b.rel=null,b.href=null,b.crossorigin=null,b._cssText=As(P,T.href))}if(C==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const T=Rs(e.sheet);T&&(b._cssText=As(T,fi(n)))}if(C==="input"||C==="textarea"||C==="select"||C==="option"){const T=e,P=Kc(T),A=Cs(T,Oa(C),P),L=T.checked;if(P!=="submit"&&P!=="button"&&A){const D=pr(T,_,E,y,w,di({type:P,tagName:Oa(C),maskInputOptions:a}));b.value=Jr({isMasked:D,element:T,value:A,maskInputFn:u})}L&&(b.checked=L)}if(C==="option"&&(e.selected&&!a.select?b.selected=!0:delete b.selected),C==="canvas"&&f){if(e.__context==="2d")SR(e)||(b.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const T=e.toDataURL(d.type,d.quality),P=n.createElement("canvas");P.width=e.width,P.height=e.height;const A=P.toDataURL(d.type,d.quality);T!==A&&(b.rr_dataURL=T)}}if(C==="img"&&l){zn||(zn=n.createElement("canvas"),rd=zn.getContext("2d"));const T=e,P=T.currentSrc||T.getAttribute("src")||"<unknown-src>",A=T.crossOrigin,L=()=>{T.removeEventListener("load",L);try{zn.width=T.naturalWidth,zn.height=T.naturalHeight,rd.drawImage(T,0,0),b.rr_dataURL=zn.toDataURL(d.type,d.quality)}catch(D){if(T.crossOrigin!=="anonymous"){T.crossOrigin="anonymous",T.complete&&T.naturalWidth!==0?L():T.addEventListener("load",L);return}else console.warn(`Cannot inline img src=${P}! Error: ${D}`)}T.crossOrigin==="anonymous"&&(A?b.crossOrigin=A:T.removeAttribute("crossorigin"))};T.complete&&T.naturalWidth!==0?L():T.addEventListener("load",L)}if((C==="audio"||C==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),S){const{width:T,height:P}=e.getBoundingClientRect();b={class:b.class,rr_width:`${T}px`,rr_height:`${P}px`}}C==="iframe"&&!p(b.src)&&(!S&&!im(e)&&(b.rr_src=b.src),delete b.src);let B;try{customElements.get(C)&&(B=!0)}catch{}return{type:Ie.Element,tagName:C,attributes:b,childNodes:[],isSVG:NR(e)||void 0,needBlock:S,rootId:m,isCustom:B}}function pe(e){return e==null?"":e.toLowerCase()}function HR(e,t){if(t.comment&&e.type===Ie.Comment)return!0;if(e.type===Ie.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&rm(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(pe(e.attributes.name).match(/^msapplication-tile(image|color)$/)||pe(e.attributes.name)==="application-name"||pe(e.attributes.rel)==="icon"||pe(e.attributes.rel)==="apple-touch-icon"||pe(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&pe(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(pe(e.attributes.property).match(/^(og|twitter|fb):/)||pe(e.attributes.name).match(/^(og|twitter):/)||pe(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(pe(e.attributes.name)==="robots"||pe(e.attributes.name)==="googlebot"||pe(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(pe(e.attributes.name)==="author"||pe(e.attributes.name)==="generator"||pe(e.attributes.name)==="framework"||pe(e.attributes.name)==="publisher"||pe(e.attributes.name)==="progid"||pe(e.attributes.property).match(/^article:/)||pe(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(pe(e.attributes.name)==="google-site-verification"||pe(e.attributes.name)==="yandex-verification"||pe(e.attributes.name)==="csrf-token"||pe(e.attributes.name)==="p:domain_verify"||pe(e.attributes.name)==="verify-v1"||pe(e.attributes.name)==="verification"||pe(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Yn(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:E,dataURLOptions:w={},inlineImages:v=!1,recordCanvas:S=!1,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:N=5e3,onBlockedImageLoad:B,onStylesheetLoad:T,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:A=()=>!1,newlyAddedElement:L=!1,ignoreCSSAttributes:D}=t;let{preserveWhiteSpace:ee=!0}=t;const Y=$R(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,dataURLOptions:w,inlineImages:v,recordCanvas:S,keepIframeSrcFn:A,newlyAddedElement:L,ignoreCSSAttributes:D});if(!Y)return console.warn(e,"not serialized"),null;let ne;r.hasNode(e)?ne=r.getId(e):HR(Y,E)||!ee&&Y.type===Ie.Text&&!Y.isStyle&&!Y.textContent.replace(/^\s+|\s+$/gm,"").length?ne=Kr:ne=Yc();const I=Object.assign(Y,{id:ne});if(r.add(e,I),ne===Kr)return null;C&&C(e);let q=!f;if(I.type===Ie.Element){q=q&&!I.needBlock;const R=e.shadowRoot;R&&Hr(R)&&(I.isShadowHost=!0)}if((I.type===Ie.Document||I.type===Ie.Element)&&q){E.headWhitespace&&I.type===Ie.Element&&I.tagName==="head"&&(ee=!1);const R={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:E,dataURLOptions:w,inlineImages:v,recordCanvas:S,preserveWhiteSpace:ee,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:N,onBlockedImageLoad:B,onStylesheetLoad:T,stylesheetLoadTimeout:P,keepIframeSrcFn:A,ignoreCSSAttributes:D},V=e.childNodes?Array.from(e.childNodes):[];for(const ae of V){const re=Yn(ae,R);re&&I.childNodes.push(re)}if(dR(e)&&e.shadowRoot)for(const ae of Array.from(e.shadowRoot.childNodes)){const re=Yn(ae,R);re&&(Hr(e.shadowRoot)&&(re.isShadow=!0),I.childNodes.push(re))}}if(e.parentNode&&Ur(e.parentNode)&&Hr(e.parentNode)&&(I.isShadow=!0),I.type===Ie.Element&&I.tagName==="iframe"&&!I.needBlock&&LR(e,()=>{const R=im(e);if(R&&b){const V=Yn(R,{doc:R,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:E,dataURLOptions:w,inlineImages:v,recordCanvas:S,preserveWhiteSpace:ee,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:N,onStylesheetLoad:T,stylesheetLoadTimeout:P,keepIframeSrcFn:A,ignoreCSSAttributes:D});V&&b(e,V)}},N),I.type===Ie.Element&&I.tagName==="img"&&!e.complete&&I.needBlock){const R=e,V=()=>{if(R.isConnected&&!R.complete&&B)try{const ae=R.getBoundingClientRect();ae.width>0&&ae.height>0&&B(R,I,ae)}catch{}R.removeEventListener("load",V)};R.isConnected&&R.addEventListener("load",V)}return I.type===Ie.Element&&I.tagName==="link"&&typeof I.attributes.rel=="string"&&(I.attributes.rel==="stylesheet"||I.attributes.rel==="preload"&&typeof I.attributes.href=="string"&&rm(I.attributes.href)==="css")&&DR(e,()=>{if(T){const R=Yn(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:E,dataURLOptions:w,inlineImages:v,recordCanvas:S,preserveWhiteSpace:ee,onSerialize:C,onIframeLoad:b,iframeLoadTimeout:N,onStylesheetLoad:T,stylesheetLoadTimeout:P,keepIframeSrcFn:A,ignoreCSSAttributes:D});R&&T(e,R)}},P),I.type===Ie.Element&&delete I.needBlock,I}function WR(e,t){const{mirror:n=new nm,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOM:E=!1,dataURLOptions:w,preserveWhiteSpace:v,onSerialize:S,onIframeLoad:C,iframeLoadTimeout:b,onBlockedImageLoad:N,onStylesheetLoad:B,stylesheetLoadTimeout:T,keepIframeSrcFn:P=()=>!1,ignoreCSSAttributes:A=new Set([])}=t||{};return Yn(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:_,maskInputFn:y,slimDOMOptions:E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:E==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:E===!1?{}:E,dataURLOptions:w,inlineImages:f,recordCanvas:p,preserveWhiteSpace:v,onSerialize:S,onIframeLoad:C,iframeLoadTimeout:b,onBlockedImageLoad:N,onStylesheetLoad:B,stylesheetLoadTimeout:T,keepIframeSrcFn:P,newlyAddedElement:!1,ignoreCSSAttributes:A})}function Fe(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const qn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let sd={map:{},getId(){return console.error(qn),-1},getNode(){return console.error(qn),null},removeNodeFromMap(){console.error(qn)},has(){return console.error(qn),!1},reset(){console.error(qn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(sd=new Proxy(sd,{get(e,t,n){return t==="map"&&console.error(qn),Reflect.get(e,t,n)}}));function Yr(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();!o&&n.leading===!1&&(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(KR(r),r=null),o=i,e.apply(c,s)):!r&&n.trailing!==!1&&(r=pi(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,s)},a))}}function um(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(i){pi(()=>{n.set.call(this,i)},0),s&&s.set&&s.set.call(this,i)}}),()=>um(e,t,s||{},!0)}function Xc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}let xs=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(xs=()=>new Date().getTime());function lm(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function dm(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function fm(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pm(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ke(e,t,n,r,o){if(!e)return!1;const s=pm(e);if(!s)return!1;const i=Kn(t,n);if(!o){const u=r&&s.matches(r);return i(s)&&!u}const a=bn(s,i);let c=-1;return a<0?!1:(r&&(c=bn(s,Kn(null,r))),a>-1&&c<0?!0:a<c)}function jR(e,t){return t.getId(e)!==-1}function Gi(e,t){return t.getId(e)===Kr}function hm(e,t){if(Ur(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?hm(e.parentNode,t):!0:!0}function La(e){return!!e.changedTouches}function zR(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function mm(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function gm(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Da(e){return!!e?.shadowRoot}class qR{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function _m(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function GR(e){let t=e,n;for(;n=_m(t);)t=n;return t}function VR(e){const t=e.ownerDocument;if(!t)return!1;const n=GR(e);return t.contains(n)}function ym(e){const t=e.ownerDocument;return t?t.contains(e)||VR(e):!1}const id={};function Qc(e){const t=id[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch{}return id[e]=r.bind(window)}function JR(...e){return Qc("requestAnimationFrame")(...e)}function pi(...e){return Qc("setTimeout")(...e)}function KR(...e){return Qc("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),W=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(W||{}),$e=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))($e||{}),It=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(It||{}),Gn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Gn||{});function Zc(e){try{return e.contentDocument}catch{}}function YR(e){try{return e.contentWindow}catch{}}function ad(e){return"__ln"in e}class XR{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&ad(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&ad(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const cd=(e,t)=>`${e}@${t}`;class QR{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new XR,o=c=>{let u=c,d=Kr;for(;d===Kr;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},s=c=>{if(!c.parentNode||!ym(c))return;const u=Ur(c.parentNode)?this.mirror.getId(_m(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);const l=Yn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{mm(f,this.mirror)&&!Ke(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),gm(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Da(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ke(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${m}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)ud(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||s(c);for(const c of this.addedSet)!ld(this.droppedSet,c)&&!ud(this.removes,c,this.mirror)||ld(this.movedSet,c)?s(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=o(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),s(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Gi(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ke(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:pr(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,pm(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){const i=Kc(n),a=n.tagName;o=Cs(n,a,i);const c=di({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=pr(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Jr({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ke(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let s=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!Zc(n))r="rr_src";else return;if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!cm(n.tagName,r)&&(s.attributes[r]=am(this.doc,fr(n.tagName),fr(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?s.styleDiff[a]=c:s.styleDiff[a]=[c,u]:s._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(Ke(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),o=Ur(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ke(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Gi(n,this.mirror)||!jR(n,this.mirror)||(this.addedSet.has(n)?($a(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||hm(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[cd(r,o)]?$a(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Ur(t.target)&&Hr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Gi(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[cd(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ke(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),Da(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function $a(e,t){e.delete(t),t.childNodes?.forEach(n=>$a(e,n))}function ud(e,t,n){return e.length===0?!1:ZR(e,t,n)}function ZR(e,t,n){let r=t.parentNode;for(;r;){const o=n.getId(r);if(e.some(s=>s.id===o))return!0;r=r.parentNode}return!1}function ld(e,t){return e.size===0?!1:Sm(e,t)}function Sm(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Sm(e,n):!1}let Wr;function eC(e){Wr=e}function tC(){Wr=void 0}const te=e=>Wr?(...n)=>{try{return e(...n)}catch(r){if(Wr&&Wr(r)===!0)return()=>{};throw r}}:e,Xn=[];function mo(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function bm(e,t){const n=new QR;Xn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);const s=new r(te(i=>{e.onMutation&&e.onMutation(i)===!1||n.processMutations.bind(n)(i)}));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function nC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Yr(te(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),s),u=te(Yr(te(l=>{const f=mo(l),{clientX:p,clientY:h}=La(l)?l.changedTouches[0]:l;a||(a=xs()),i.push({x:p,y:h,id:r.getId(f),timeOffset:xs()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?W.Drag:l instanceof MouseEvent?W.MouseMove:W.TouchMove)}),o,{trailing:!1})),d=[Fe("mousemove",u,n),Fe("touchmove",u,n),Fe("drag",u,n)];return te(()=>{d.forEach(l=>l())})}function rC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=mo(f);if(Ke(p,r,o,s,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=It.Mouse;break;case"touch":h=It.Touch;break;case"pen":h=It.Pen;break}h===It.Touch?$e[l]===$e.MouseDown?m="TouchStart":$e[l]===$e.MouseUp&&(m="TouchEnd"):It.Pen}else La(f)&&(h=It.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===It.Touch||m.startsWith("Mouse")&&h===It.Mouse)&&(h=null)):$e[l]===$e.Click&&(h=u,u=null);const _=La(f)?f.changedTouches[0]:f;if(!_)return;const y=n.getId(p),{clientX:E,clientY:w}=_;te(e)({type:$e[m],id:y,x:E,y:w,...h!==null&&{pointerType:h}})};return Object.keys($e).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=fr(l);const p=d(l);if(window.PointerEvent)switch($e[l]){case $e.MouseDown:case $e.MouseUp:f=f.replace("mouse","pointer");break;case $e.TouchStart:case $e.TouchEnd:return}c.push(Fe(f,p,t))}),te(()=>{c.forEach(l=>l())})}function Em({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){const a=te(Yr(te(c=>{const u=mo(c);if(!u||Ke(u,r,o,s,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=lm(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Fe("scroll",a,t)}function oC({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const o=te(Yr(te(()=>{const s=dm(),i=fm();(n!==s||r!==i)&&(e({width:Number(i),height:Number(s)}),n=s,r=i)}),200));return Fe("resize",o,t)}const sC=["INPUT","TEXTAREA","SELECT"],dd=new WeakMap;function iC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function _(b){let N=mo(b);const B=b.isTrusted,T=N&&Oa(N.tagName);if(T==="OPTION"&&(N=N.parentElement),!N||!T||sC.indexOf(T)<0||Ke(N,r,o,s,!0))return;const P=N;if(P.classList.contains(i)||a&&P.matches(a))return;const A=Kc(N);let L=Cs(P,T,A),D=!1;const ee=di({maskInputOptions:c,tagName:T,type:A}),Y=pr(N,f,h,p,m,ee);(A==="radio"||A==="checkbox")&&(D=N.checked),L=Jr({isMasked:Y,element:N,value:L,maskInputFn:u}),y(N,l?{text:L,isChecked:D,userTriggered:B}:{text:L,isChecked:D});const ne=N.name;A==="radio"&&ne&&D&&t.querySelectorAll(`input[type="radio"][name="${ne}"]`).forEach(I=>{if(I!==N){const q=Jr({isMasked:Y,element:I,value:Cs(I,T,A),maskInputFn:u});y(I,l?{text:q,isChecked:!D,userTriggered:!1}:{text:q,isChecked:!D})}})}function y(b,N){const B=dd.get(b);if(!B||B.text!==N.text||B.isChecked!==N.isChecked){dd.set(b,N);const T=n.getId(b);te(e)({...N,id:T})}}const w=(d.input==="last"?["change"]:["input","change"]).map(b=>Fe(b,te(_),t)),v=t.defaultView;if(!v)return()=>{w.forEach(b=>b())};const S=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),C=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&w.push(...C.map(b=>um(b[0],b[1],{set(){te(_)({target:this,isTrusted:!1})}},!1,v))),te(()=>{w.forEach(b=>b())})}function Ms(e){const t=[];function n(r,o){if(Mo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Mo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Mo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Mo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(i)}return o}return n(e,t)}function Gt(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function aC({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:te((d,l,f)=>{const[p,h]=f,{id:m,styleId:_}=Gt(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:te((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Gt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:te((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Gt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:te((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Gt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};No("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(No("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),No("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),No("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:te((f,p,h)=>{const[m,_]=h,{id:y,styleId:E}=Gt(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||E&&E!==-1)&&e({id:y,styleId:E,adds:[{rule:m,index:[...Ms(p),_||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:te((f,p,h)=>{const[m]=h,{id:_,styleId:y}=Gt(p.parentStyleSheet,t,n.styleMirror);return(_&&_!==-1||y&&y!==-1)&&e({id:_,styleId:y,removes:[{index:[...Ms(p),m]}]}),f.apply(p,h)})})}),te(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function vm({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,s=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return s.get?.call(this)},set(i){const a=s.set?.call(this,i);if(r!==null&&r!==-1)try{t.adoptStyleSheets(i,r)}catch{}return a}}),te(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function cC({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:te((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return s.apply(c,[d,l,f]);const{id:p,styleId:h}=Gt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:Ms(c.parentRule)}),a.apply(c,u)})});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:te((a,c,u)=>{const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=Gt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:Ms(c.parentRule)}),a.apply(c,u)})}),te(()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i})}function uC({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=te(u=>Yr(te(d=>{const l=mo(d);if(!l||Ke(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:o.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),s.media||500)),c=[Fe("play",a(Gn.Play),i),Fe("pause",a(Gn.Pause),i),Fe("seeked",a(Gn.Seeked),i),Fe("volumechange",a(Gn.VolumeChange),i),Fe("ratechange",a(Gn.RateChange),i)];return te(()=>{c.forEach(u=>u())})}function lC({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(c,u,d){const l=new s(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=Xc(t.fonts,"add",function(a){return function(c){return pi(te(()=>{const u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=s}),r.push(i),te(()=>{r.forEach(a=>a())})}function dC(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=te(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:_,endOffset:y}=p;Ke(h,r,o,s,!0)||Ke(_,r,o,s,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(_),endOffset:y})}i({ranges:d})});return c(),Fe("selectionchange",c)}function fC({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Xc(n.customElements,"define",function(o){return function(s,i,a){try{t({define:{name:s}})}catch{}return o.apply(this,[s,i,a])}})}function pC(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=bm(e,e.doc));const o=nC(e),s=rC(e),i=Em(e),a=oC(e,{win:n}),c=iC(e),u=uC(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=aC(e,{win:n}),l=vm(e,e.doc),f=cC(e,{win:n}),e.collectFonts&&(p=lC(e)));const h=dC(e),m=fC(e),_=[];for(const y of e.plugins)_.push(y.observer(y.callback,n,y.options));return te(()=>{Xn.forEach(y=>y.reset()),r?.disconnect(),o(),s(),i(),a(),c(),u(),d(),l(),f(),p(),h(),m(),_.forEach(y=>y())})}function Mo(e){return typeof window[e]<"u"}function No(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Fa{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){const s=r||this.getIdToRemoteIdMap(t),i=o||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,r,o))}getRemoteId(t,n,r){const o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const s=o.get(n);return s||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class hC{constructor(){this.crossOriginIframeMirror=new Fa(Yc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class mC{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Fa(Yc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Fa(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=Zc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const o=this.crossOriginIframeMap.get(t.source);if(!o)return;const s=this.transformCrossOriginEvent(o,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:W.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case W.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.Drag:case W.TouchMove:case W.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case W.ViewportResize:return!1;case W.MediaInteraction:case W.MouseInteraction:case W.Scroll:case W.CanvasMutation:case W.Input:return this.replaceIds(n.data,t,["id"]),n;case W.StyleSheetRule:case W.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case W.Font:return n;case W.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case W.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(const s of o)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(r,n[s]):n[s]=t.getId(r,n[s]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Ie.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class gC{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class _C{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Hr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=bm({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Em({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),pi(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(vm({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Zc(t),r=YR(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Xc(t.prototype,"attachShadow",function(o){return function(s){const i=o.call(this,s);return this.shadowRoot&&ym(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var fd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Oo=0;Oo<fd.length;Oo++)yC[fd.charCodeAt(Oo)]=Oo;class pd{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class SC{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new qR,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},o=[];for(const s of t){let i;this.styleMirror.has(s)?i=this.styleMirror.getId(s):(i=this.styleMirror.add(s),o.push({styleId:i,rules:Array.from(s.rules||CSSRule,(a,c)=>({rule:tm(a),index:c}))})),r.styleIds.push(i)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class bC{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,JR(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let Ee,Ns;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const ot=yR();function Nt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:_,slimDOMOptions:y,maskAttributeFn:E,maskInputFn:w,maskTextFn:v,maxCanvasSize:S=null,packFn:C,sampling:b={},dataURLOptions:N={},mousemoveWait:B,recordDOM:T=!0,recordCanvas:P=!1,recordCrossOriginIframes:A=!1,recordAfter:L=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:D=!1,collectFonts:ee=!1,inlineImages:Y=!1,plugins:ne,keepIframeSrcFn:I=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:R,onMutation:V,getCanvasManager:ae}=e;eC(R);const re=A?window.parent===window:!0;let Te=!1;if(!re)try{window.parent.document&&(Te=!1)}catch{Te=!0}if(re&&!t)throw new Error("emit function is required");if(!re&&!Te)return()=>{};B!==void 0&&b.mousemove===void 0&&(b.mousemove=B),ot.reset();const Le=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:_!==void 0?_:{},Wt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};zR();let De,Ue=0;const ht=X=>{for(const Ge of ne||[])Ge.eventProcessor&&(X=Ge.eventProcessor(X));return C&&!Te&&(X=C(X)),X};Ee=(X,Ge)=>{const Q=X;if(Q.timestamp=xs(),Xn[0]?.isFrozen()&&Q.type!==J.FullSnapshot&&!(Q.type===J.IncrementalSnapshot&&Q.data.source===W.Mutation)&&Xn.forEach(xe=>xe.unfreeze()),re)t?.(ht(Q),Ge);else if(Te){const xe={type:"rrweb",event:ht(Q),origin:window.location.origin,isCheckout:Ge};window.parent.postMessage(xe,"*")}if(Q.type===J.FullSnapshot)De=Q,Ue=0;else if(Q.type===J.IncrementalSnapshot){if(Q.data.source===W.Mutation&&Q.data.isAttachIframe)return;Ue++;const xe=r&&Ue>=r,oe=n&&De&&Q.timestamp-De.timestamp>n;(xe||oe)&&mt(!0)}};const jt=X=>{Ee({type:J.IncrementalSnapshot,data:{source:W.Mutation,...X}})},Cr=X=>Ee({type:J.IncrementalSnapshot,data:{source:W.Scroll,...X}}),So=X=>Ee({type:J.IncrementalSnapshot,data:{source:W.CanvasMutation,...X}}),Ar=X=>Ee({type:J.IncrementalSnapshot,data:{source:W.AdoptedStyleSheet,...X}}),ce=new SC({mutationCb:jt,adoptedStyleSheetCb:Ar}),_e=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new hC:new mC({mirror:ot,mutationCb:jt,stylesheetManager:ce,recordCrossOriginIframes:A,wrappedEmit:Ee});for(const X of ne||[])X.getMirror&&X.getMirror({nodeMirror:ot,crossOriginIframeMirror:_e.crossOriginIframeMirror,crossOriginIframeStyleMirror:_e.crossOriginIframeStyleMirror});const Xe=new bC,Ae=vC(ae,{mirror:ot,win:window,mutationCb:X=>Ee({type:J.IncrementalSnapshot,data:{source:W.CanvasMutation,...X}}),recordCanvas:P,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:b.canvas,dataURLOptions:N,errorHandler:R}),Ne=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new gC:new _C({mutationCb:jt,scrollCb:Cr,bypassOptions:{onMutation:V,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Le,dataURLOptions:N,maskAttributeFn:E,maskTextFn:v,maskInputFn:w,recordCanvas:P,inlineImages:Y,sampling:b,slimDOMOptions:Wt,iframeManager:_e,stylesheetManager:ce,canvasManager:Ae,keepIframeSrcFn:I,processedNodeManager:Xe,ignoreCSSAttributes:q},mirror:ot}),mt=(X=!1)=>{if(!T)return;Ee({type:J.Meta,data:{href:window.location.href,width:fm(),height:dm()}},X),ce.reset(),Ne.init(),Xn.forEach(Q=>Q.lock());const Ge=WR(document,{mirror:ot,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Le,maskAttributeFn:E,maskInputFn:w,maskTextFn:v,slimDOM:Wt,dataURLOptions:N,recordCanvas:P,inlineImages:Y,onSerialize:Q=>{mm(Q,ot)&&_e.addIframe(Q),gm(Q,ot)&&ce.trackLinkElement(Q),Da(Q)&&Ne.addShadowRoot(Q.shadowRoot,document)},onIframeLoad:(Q,xe)=>{_e.attachIframe(Q,xe),Q.contentWindow&&Ae.addWindow(Q.contentWindow),Ne.observeAttachShadow(Q)},onStylesheetLoad:(Q,xe)=>{ce.attachLinkElement(Q,xe)},onBlockedImageLoad:(Q,xe,{width:oe,height:xr})=>{jt({adds:[],removes:[],texts:[],attributes:[{id:xe.id,attributes:{style:{width:`${oe}px`,height:`${xr}px`}}}]})},keepIframeSrcFn:I,ignoreCSSAttributes:q});if(!Ge)return console.warn("Failed to snapshot the document");Ee({type:J.FullSnapshot,data:{node:Ge,initialOffset:lm(window)}}),Xn.forEach(Q=>Q.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ce.adoptStyleSheets(document.adoptedStyleSheets,ot.getId(document))};Ns=mt;try{const X=[],Ge=xe=>te(pC)({onMutation:V,mutationCb:jt,mousemoveCb:(oe,xr)=>Ee({type:J.IncrementalSnapshot,data:{source:xr,positions:oe}}),mouseInteractionCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.MouseInteraction,...oe}}),scrollCb:Cr,viewportResizeCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.ViewportResize,...oe}}),inputCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.Input,...oe}}),mediaInteractionCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.MediaInteraction,...oe}}),styleSheetRuleCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.StyleSheetRule,...oe}}),styleDeclarationCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.StyleDeclaration,...oe}}),canvasMutationCb:So,fontCb:oe=>Ee({type:J.IncrementalSnapshot,data:{source:W.Font,...oe}}),selectionCb:oe=>{Ee({type:J.IncrementalSnapshot,data:{source:W.Selection,...oe}})},customElementCb:oe=>{Ee({type:J.IncrementalSnapshot,data:{source:W.CustomElement,...oe}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Le,inlineStylesheet:h,sampling:b,recordDOM:T,recordCanvas:P,inlineImages:Y,userTriggeredOnInput:D,collectFonts:ee,doc:xe,maskAttributeFn:E,maskInputFn:w,maskTextFn:v,keepIframeSrcFn:I,blockSelector:s,unblockSelector:i,slimDOMOptions:Wt,dataURLOptions:N,mirror:ot,iframeManager:_e,stylesheetManager:ce,shadowDomManager:Ne,processedNodeManager:Xe,canvasManager:Ae,ignoreCSSAttributes:q,plugins:ne?.filter(oe=>oe.observer)?.map(oe=>({observer:oe.observer,options:oe.options,callback:xr=>Ee({type:J.Plugin,data:{plugin:oe.name,payload:xr}})}))||[]},{});_e.addLoadListener(xe=>{try{X.push(Ge(xe.contentDocument))}catch(oe){console.warn(oe)}});const Q=()=>{mt(),X.push(Ge(document))};return document.readyState==="interactive"||document.readyState==="complete"?Q():(X.push(Fe("DOMContentLoaded",()=>{Ee({type:J.DomContentLoaded,data:{}}),L==="DOMContentLoaded"&&Q()})),X.push(Fe("load",()=>{Ee({type:J.Load,data:{}}),L==="load"&&Q()},window))),()=>{X.forEach(xe=>xe()),Xe.destroy(),Ns=void 0,tC()}}catch(X){console.warn(X)}}function EC(e){if(!Ns)throw new Error("please take full snapshot after start recording");Ns(e)}Nt.mirror=ot;Nt.takeFullSnapshot=EC;function vC(e,t){try{return e?e(t):new pd}catch{return console.warn("Unable to initialize CanvasManager"),new pd}}var hd;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(hd||(hd={}));const TC=3,IC=5;function eu(e){return e>9999999999?e:e*1e3}function Vi(e){return e>9999999999?e/1e3:e}function go(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Je(t,10,1e3)}}),t.category==="console")))}const wC="button,a";function Tm(e){return e.closest(wC)||e}function Im(e){const t=wm(e);return!t||!(t instanceof Element)?t:Tm(t)}function wm(e){return kC(e)?e.target:e}function kC(e){return typeof e=="object"&&!!e&&"target"in e}let Vt;function RC(e){return Vt||(Vt=[],CC()),Vt.push(e),()=>{const t=Vt?Vt.indexOf(e):-1;t>-1&&Vt.splice(t,1)}}function CC(){Me(he,"open",function(e){return function(...t){if(Vt)try{Vt.forEach(n=>n())}catch{}return e.apply(he,t)}})}const AC=new Set([W.Mutation,W.StyleSheetRule,W.StyleDeclaration,W.AdoptedStyleSheet,W.CanvasMutation,W.Selection,W.MediaInteraction]);function xC(e,t,n){e.handleClick(t,n)}class MC{constructor(t,n,r=go){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=RC(()=>{this._lastMutation=md()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(OC(n,this._ignoreSelector)||!PC(t))return;const r={timestamp:Vi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Vi(t)}registerScroll(t=Date.now()){this._lastScroll=Vi(t)}registerClick(t){const n=Tm(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=md();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!r&&!o,{clickCount:i,clickBreadcrumb:a}=t;if(s){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:he.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:he.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=ho(()=>this._checkClicks(),1e3)}}const NC=["A","BUTTON","INPUT"];function OC(e,t){return!!(!NC.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function PC(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function md(){return Date.now()/1e3}function LC(e,t){try{if(!DC(t))return;const{source:n}=t.data;if(AC.has(n)&&e.registerMutation(t.timestamp),n===W.Scroll&&e.registerScroll(t.timestamp),$C(t)){const{type:r,id:o}=t.data,s=Nt.mirror.getNode(o);s instanceof HTMLElement&&r===$e.Click&&e.registerClick(s)}}catch{}}function DC(e){return e.type===TC}function $C(e){return e.data.source===W.MouseInteraction}function _t(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var tu=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(tu||{});const FC=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function BC(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(FC.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const UC=e=>t=>{if(!e.isEnabled())return;const n=HC(t);if(!n)return;const r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&xC(e.clickDetector,n,Im(t.event)),go(e,n)};function km(e,t){const n=Nt.mirror.getId(e),r=n&&Nt.mirror.getNode(n),o=r&&Nt.mirror.getMeta(r),s=o&&jC(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(i=>i.type===tu.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:BC(s.attributes)}}:{}}}function HC(e){const{target:t,message:n}=WC(e);return _t({category:`ui.${e.name}`,...km(t,n)})}function WC(e){const t=e.name==="click";let n,r=null;try{r=t?Im(e.event):wm(e.event),n=ze(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function jC(e){return e.type===tu.Element}function zC(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=qC(t);n&&go(e,n)}function qC(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||GC(i)||!s)return null;const a=t||r||o,c=s.length===1;if(!a&&c)return null;const u=ze(i,{maxStringLength:200})||"<unknown>",d=km(i,u);return _t({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}function GC(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const VC={resource:QC,paint:YC,navigation:XC};function Ji(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function JC(e){return e.map(KC).filter(Boolean)}function KC(e){const t=VC[e.entryType];return t?t(e):null}function hr(e){return((Pe()||he.performance.timeOrigin)+e)/1e3}function YC(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=hr(o);return{type:n,name:r,start:s,end:s+t,data:void 0}}function XC(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return o===0?null:{type:`${t}.${m}`,start:hr(p),end:hr(s),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:s,redirectCount:f}}}function QC(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:hr(s),end:hr(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function ZC(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return nu(e,"largest-contentful-paint",n)}function e1(e){return e.sources!==void 0}function t1(e){const t=[],n=[];for(const r of e.entries)if(e1(r)){const o=[];for(const s of r.sources)if(s.node){n.push(s.node);const i=Nt.mirror.getId(s.node);i&&o.push(i)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return nu(e,"cumulative-layout-shift",n,t)}function n1(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return nu(e,"interaction-to-next-paint",n)}function nu(e,t,n,r){const o=e.value,s=e.rating,i=hr(o);return{type:"web-vital",name:t,start:i,end:i,data:{value:o,size:o,rating:s,nodeIds:n?n.map(a=>Nt.mirror.getId(a)):void 0,attributions:r}}}function r1(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Dn(o,n))}),r.push(Uc(Ji(ZC,e)),Bc(Ji(t1,e)),Ih(Ji(n1,e))),()=>{r.forEach(o=>o())}}const U=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,o1='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function s1(){const e=new Blob([o1]);return URL.createObjectURL(e)}const gd=["log","warn","error"],ts="[Replay] ";function Ki(e,t="info"){ft({category:"console",data:{logger:"replay"},level:t,message:`${ts}${e}`},{level:t})}function i1(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return U?(gd.forEach(r=>{n[r]=(...o)=>{g[r](ts,...o),t&&Ki(o.join(""),ms(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),g.error(ts,r),e?ge(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Ki(r,"error")},n.infoTick=(...r)=>{g.log(ts,...r),t&&setTimeout(()=>Ki(r[0]),0)}):gd.forEach(r=>{n[r]=()=>{}}),n}const H=i1();class ru extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Jc}.`)}}class Rm{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Jc)throw new ru;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?eu(t):null}}class a1{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){U&&H.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((o,s)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){U&&H.error("Error in compression worker: ",c.response),s(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class c1{constructor(t){this._worker=new a1(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=eu(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Jc?Promise.reject(new ru):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{U&&H.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class u1{constructor(t){this._fallback=new Rm,this._compression=new c1(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){U&&H.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(const s of t)o.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(s){U&&H.exception(s,"Failed to add events when switching buffers.")}}}function l1({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=d1(t);if(n)return n}return U&&H.log("Using simple buffer"),new Rm}function d1(e){try{const t=e||f1();if(!t)return;U&&H.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new u1(n)}catch(t){U&&H.exception(t,"Failed to create compression worker")}}function f1(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?s1():""}function ou(){try{return"sessionStorage"in he&&!!he.sessionStorage}catch{return!1}}function p1(e){h1(),e.session=void 0}function h1(){if(ou())try{he.sessionStorage.removeItem(Gc)}catch{}}function Cm(e){return e===void 0?!1:Math.random()<e}function hi(e){if(ou())try{he.sessionStorage.setItem(Gc,JSON.stringify(e))}catch{}}function Am(e){const t=Date.now(),n=e.id||Re(),r=e.started||t,o=e.lastActivity||t,s=e.segmentId||0,i=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:s,sampled:i,previousSessionId:a,dirty:c}}function m1(e,t){return Cm(e)?"session":t?"buffer":!1}function _d({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=m1(e,t),s=Am({sampled:o,previousSessionId:r});return n&&hi(s),s}function g1(){if(!ou())return null;try{const e=he.sessionStorage.getItem(Gc);if(!e)return null;const t=JSON.parse(e);return U&&H.infoTick("Loading existing session"),Am(t)}catch{return null}}function Ba(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function xm(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Ba(e.started,t,r)||Ba(e.lastActivity,n,r)}function Mm(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!xm(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Yi({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&g1();return o?Mm(o,{sessionIdleExpire:e,maxReplayDuration:t})?(U&&H.infoTick("Session in sessionStorage is expired, creating new one..."),_d(r,{previousSessionId:o.id})):o:(U&&H.infoTick("Creating new session"),_d(r,{previousSessionId:n}))}function _1(e){return e.type===J.Custom}function su(e,t,n){return Om(e,t)?(Nm(e,t,n),!0):!1}function y1(e,t,n){return Om(e,t)?Nm(e,t,n):Promise.resolve(null)}async function Nm(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=e.getOptions(),i=S1(t,s.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(s){const i=s&&s instanceof ru,a=i?"addEventSizeExceeded":"addEvent",c=M();if(c){const u=i?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(i&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(s),await e.stop({reason:a})}}function Om(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=eu(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(U&&H.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function S1(e,t){try{if(typeof t=="function"&&_1(e))return t(e)}catch(n){return U&&H.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function iu(e){return!e.type}function Ua(e){return e.type==="transaction"}function b1(e){return e.type==="replay_event"}function yd(e){return e.type==="feedback"}function E1(e){return(t,n)=>{if(!e.isEnabled()||!iu(t)&&!Ua(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(Ua(t)){v1(e,t);return}T1(e,t)}}}function v1(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function T1(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||ho(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function I1(e){return t=>{!e.isEnabled()||!iu(t)||w1(e,t)}}function w1(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=_t({category:"replay.hydrate-error",data:{url:Fn()}});go(e,r)}}function k1(e){const t=M();t&&t.on("beforeAddBreadcrumb",n=>R1(e,n))}function R1(e,t){if(!e.isEnabled()||!Pm(t))return;const n=C1(t);n&&go(e,n)}function C1(e){return!Pm(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?A1(e):_t(e)}function A1(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return _t(e);let n=!1;const r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>xo?(n=!0,`${o.slice(0,xo)}`):o;if(typeof o=="object")try{const s=Je(o,7);return JSON.stringify(s).length>xo?(n=!0,`${JSON.stringify(s,null,2).slice(0,xo)}`):s}catch{}return o});return _t({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Pm(e){return!!e.category}function x1(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function Lm(){const e=j().getPropagationContext().dsc;e&&delete e.replay_id;const t=be();if(t){const n=dt(t);delete n.replay_id}}function M1(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function N1(e,t){return e.recordingMode!=="buffer"||t.message===Vc||!t.exception||t.type?!1:Cm(e.getOptions().errorSampleRate)}function O1(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(b1(t))return delete t.breadcrumbs,t;if(!iu(t)&&!Ua(t)&&!yd(t))return t;if(!e.checkAndHandleExpiredSession())return Lm(),t;if(yd(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),M1(e,t),t;if(x1(t,n)&&!e.getOptions()._experiments.captureExceptions)return U&&H.log("Ignoring error from rrweb internals",t),null;const o=N1(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){const i=e.session;i.dirty=!0,e.getOptions().stickySession&&hi(i)}return t},{id:"Replay"})}function mi(e,t){return t.map(({type:n,start:r,end:o,name:s,data:i})=>{const a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:o,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function P1(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function L1(e){return t=>{if(!e.isEnabled())return;const n=P1(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(mi(e,[n]),!1)))}}function D1(e,t){return U&&e.getOptions()._experiments.traceInternals?!1:gp(t,M())}function Dm(e,t){e.isEnabled()&&t!==null&&(D1(e,t.name)||e.addUpdate(()=>(mi(e,[t]),!0)))}function gi(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Mh(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function $m(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Os(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Fm(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:s,statusCode:i,request:a,response:c}}}function Xr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Kt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=$1(n);return r.body=o,s?.length&&(r._meta={warnings:s}),r}function Ha(e,t){return Object.entries(e).reduce((n,[r,o])=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=o),n},{})}function $1(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Ql,n=F1(e);if(t){const r=e.slice(0,Ql);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function F1(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Ps(e,t){const n=B1(e);return ct(n,t)}function B1(e,t=he.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(he.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function U1(e,t,n){try{const r=await W1(e,t,n),o=Fm("resource.fetch",r);Dm(n.replay,o)}catch(r){U&&H.exception(r,"Failed to capture fetch breadcrumb")}}function H1(e,t){const{input:n,response:r}=t,o=n?zc(n):void 0,s=gi(o),i=r?$m(r.headers.get("content-length")):void 0;s!==void 0&&(e.data.request_body_size=s),i!==void 0&&(e.data.response_body_size=i)}async function W1(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=Ps(i,n.networkDetailAllowUrls)&&!Ps(i,n.networkDetailDenyUrls),f=l?j1(n,t.input,u):Xr(u),p=await z1(l,n,t.response,d);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:f,response:p}}function j1({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?V1(n,t):{};if(!e)return Kt(o,r,void 0);const s=zc(n),[i,a]=ks(s,H),c=Kt(o,r,i);return a?Os(c,a):c}async function z1(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Xr(o);const s=r?Bm(r.headers,n):{};if(!r||!t&&o!==void 0)return Kt(s,o,void 0);const[i,a]=await G1(r),c=q1(i,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:s});return a?Os(c,a):c}function q1(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const s=e?.length&&n===void 0?gi(e):n;return r?t?Kt(o,s,e):Kt(o,s,void 0):Xr(s)}catch(s){return U&&H.exception(s,"Failed to serialize response body"),Kt(o,n,void 0)}}async function G1(e){const t=J1(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await K1(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(U&&H.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(U&&H.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Bm(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function V1(e,t){return e.length===1&&typeof e[0]!="string"?Sd(e[0],t):e.length===2?Sd(e[1],t):{}}function Sd(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Bm(n,t):Array.isArray(n)?{}:Ha(n,t):{}}function J1(e){try{return e.clone()}catch(t){U&&H.exception(t,"Failed to clone response body")}}function K1(e){return new Promise((t,n)=>{const r=ho(()=>n(new Error("Timeout while trying to read response body")),500);Y1(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function Y1(e){return await e.text()}async function X1(e,t,n){try{const r=Z1(e,t,n),o=Fm("resource.xhr",r);Dm(n.replay,o)}catch(r){U&&H.exception(r,"Failed to capture xhr breadcrumb")}}function Q1(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=gi(r),s=n.getResponseHeader("content-length")?$m(n.getResponseHeader("content-length")):nA(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),s!==void 0&&(e.data.response_body_size=s)}function Z1(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!Ps(c,n.networkDetailAllowUrls)||Ps(c,n.networkDetailDenyUrls)){const C=Xr(l),b=Xr(f);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:d,request:C,response:b}}const p=a[Rt],h=p?Ha(p.request_headers,n.networkRequestHeaders):{},m=Ha(Nh(a),n.networkResponseHeaders),[_,y]=n.networkCaptureBodies?ks(i,H):[void 0],[E,w]=n.networkCaptureBodies?eA(a):[void 0],v=Kt(h,l,_),S=Kt(m,f,E);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:d,request:y?Os(v,y):v,response:w?Os(S,w):S}}function eA(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return tA(e.response,e.responseType)}catch(n){t.push(n)}return U&&H.warn("Failed to get xhr response body",...t),[void 0]}function tA(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return U&&H.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return U&&H.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function nA(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return gi(n)}catch{return}}function rA(e){const t=M();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>oA(a,c,u))}catch{}}function oA(e,t,n){if(t.data)try{sA(t)&&aA(n)&&(Q1(t,n),X1(t,n,e)),iA(t)&&cA(n)&&(H1(t,n),U1(t,n,e))}catch(r){U&&H.exception(r,"Error when enriching network breadcrumb")}}function sA(e){return e.category==="xhr"}function iA(e){return e.category==="fetch"}function aA(e){return e?.xhr}function cA(e){return e?.response}function uA(e){const t=M();xh(UC(e)),ci(L1(e)),k1(e),rA(e);const n=O1(e);Kf(n),t&&(t.on("beforeSendEvent",I1(e)),t.on("afterSendEvent",E1(e)),t.on("createDsc",r=>{const o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{const s=e.getSessionId();o?.includeReplay&&e.isEnabled()&&s&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=s)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function lA(e){try{return Promise.all(mi(e,[dA(he.performance.memory)]))}catch{return[]}}function dA(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function fA(e,t,n){return FS(e,t,{...n,setTimeoutImpl:ho})}const Po=F.navigator;function pA(){return/iPhone|iPad|iPod/i.test(Po?.userAgent??"")||/Macintosh/i.test(Po?.userAgent??"")&&Po?.maxTouchPoints&&Po?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function hA(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){U&&H.warn("Received replay event after session expired.");return}const o=r||!t;t=!0,e.clickDetector&&LC(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!su(e,n,o))return!0;if(!o)return!1;const s=e.session;if(gA(e,o),e.recordingMode==="buffer"&&s&&e.eventBuffer&&!s.dirty){const i=e.eventBuffer.getEarliestTimestamp();i&&(U&&H.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),s.started=i,e.getOptions().stickySession&&hi(s))}return s?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function mA(e){const t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function gA(e,t){!t||!e.session||e.session.segmentId!==0||su(e,mA(e),!1)}function _A(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function yA(e,t,n,r){return pt(Ff(e,js(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function SA({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+e.length),n.set(s),n.set(e,s.length)}return n}async function bA({client:e,scope:t,replayId:n,event:r}){const o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,s={event_id:n,integrations:o};e.emit("preprocessEvent",r,s);const i=await qf(e.getOptions(),r,s,t,e,we());if(!i)return null;e.emit("postprocessEvent",i,s),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},i}async function EA({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=SA({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=M(),f=j(),p=l?.getTransport(),h=l?.getDsn();if(!l||!p||!h||!s.sampled)return Promise.resolve({});const m={type:Xk,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},_=await bA({scope:f,client:l,replayId:t,event:m});if(!_)return l.recordDroppedEvent("event_processor","replay"),U&&H.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete _.sdkProcessingMetadata;const y=yA(_,i,h,l.getOptions().tunnel);let E;try{E=await p.send(y)}catch(v){const S=new Error(Vc);try{S.cause=v}catch{}throw S}if(typeof E.statusCode=="number"&&(E.statusCode<200||E.statusCode>=300))throw new Um(E.statusCode);const w=sp({},E);if(op(w,"replay"))throw new au(w);return E}class Um extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class au extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function Hm(e,t={count:0,interval:rR}){const{recordingData:n,onError:r}=e;if(n.length)try{return await EA(e),!0}catch(o){if(o instanceof Um||o instanceof au)throw o;if(ac("Replays",{_retryCount:t.count}),r&&r(o),t.count>=oR){const s=new Error(`${Vc} - max retries exceeded`);try{s.cause=o}catch{}throw s}return t.interval*=++t.count,new Promise((s,i)=>{ho(async()=>{try{await Hm(e,t),s(!0)}catch(a){i(a)}},t.interval)})}}const Wm="__THROTTLED",vA="__SKIPPED";function TA(e,t,n){const r=new Map,o=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},s=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(o(c),s()>=t){const d=i;return i=!0,d?vA:Wm}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class IA{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Qk,sessionIdleExpire:Zk},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=fA(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=TA((i,a)=>y1(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),s=r?{threshold:Math.min(sR,r),timeout:r,scrollTimeout:iR,ignoreSelector:o?o.join(","):""}:void 0;if(s&&(this.clickDetector=new MC(this,s)),U){const i=t._experiments;H.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{he.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=_t({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=_t({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{zC(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){U&&H.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){U&&H.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",U&&H.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){U&&H.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){U&&H.log("Buffering is in progress, call `flush()` to save the replay");return}U&&H.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Yi({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){U&&H.log("Buffering is in progress, call `flush()` to save the replay");return}U&&H.infoTick("Starting replay in buffer mode");const t=Yi({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Nt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:nR}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:hA(this),...pA(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{U&&H.log(`Stopping Replay${n?` triggered by ${n}`:""}`),Lm(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,p1(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),U&&H.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),U&&H.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();U&&H.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Ba(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${he.location.pathname}${he.location.hash}${he.location.search}`,n=`${he.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===Wm){const o=_t({category:"replay.throttled"});this.addUpdate(()=>!su(this,{type:IC,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||be(),n=t&&Se(t),o=(n&&$(n).data||{})[ie];if(!(!n||!o||!["route","custom"].includes(o)))return $(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=l1({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Yi({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return Mm(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{he.document.addEventListener("visibilitychange",this._handleVisibilityChange),he.addEventListener("blur",this._handleWindowBlur),he.addEventListener("focus",this._handleWindowFocus),he.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(uA(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=r1(this)}_removeListeners(){try{he.document.removeEventListener("visibilitychange",this._handleVisibilityChange),he.removeEventListener("blur",this._handleWindowBlur),he.removeEventListener("focus",this._handleWindowFocus),he.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||xm(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){U&&H.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=JC(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(mi(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){U&&H.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await lA(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await Hm({replayId:t,recordingData:s,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:i=>this.handleException(i)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=M();if(r){const o=n instanceof au?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){U&&H.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();const s=o<this._options.minReplayDuration,i=o>this._options.maxReplayDuration+5e3;if(s||i){U&&H.log(`Session duration (${Math.floor(o/1e3)}s) is too ${s?"short":"long"}, not sending replay.`),s&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&U&&H.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&hi(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{const c=_A(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=t.length,o=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=o&&r>o;if(r>s||i){const a=_t({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Or(e,t){return[...e,...t].join(",")}function wA({mask:e,unmask:t,block:n,unblock:r,ignore:o}){const s=["base","iframe[srcdoc]:not([src])"],i=Or(e,[".sentry-mask","[data-sentry-mask]"]),a=Or(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:Or(n,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:Or(r,[]),ignoreSelector:Or(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function kA({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const bd='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',RA=["content-length","content-type","accept"],CA=Symbol.for("sentry__originalRequestBody");let Ed=!1,vd=!1;function AA(){if(typeof Request>"u"||vd)return;const e=Request;try{const t=function(n,r){const o=new e(n,r);return r?.body!=null&&(o[CA]=r.body),o};t.prototype=e.prototype,F.Request=t,vd=!0}catch{}}const jm=(e=>new xA(e));class xA{constructor({flushMinDelay:t=eR,flushMaxDelay:n=tR,minReplayDuration:r=aR,maxReplayDuration:o=Zl,stickySession:s=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:y=[],networkCaptureBodies:E=!0,networkRequestHeaders:w=[],networkResponseHeaders:v=[],mask:S=[],maskAttributes:C=["title","placeholder","aria-label"],unmask:b=[],block:N=[],unblock:B=[],ignore:T=[],maskFn:P,beforeAddRecordingEvent:A,beforeErrorSampling:L,onError:D,attachRawBodyFromRequest:ee=!1}={}){this.name="Replay";const Y=wA({mask:S,unmask:b,block:N,unblock:B,ignore:T});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:P,maskInputFn:P,maskAttributeFn:(ne,I,q)=>kA({maskAttributes:C,maskAllText:u,privacyOptions:Y,key:ne,value:I,el:q}),...Y,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ne=>{try{ne.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,cR),maxReplayDuration:Math.min(o,Zl),stickySession:s,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:y,networkCaptureBodies:E,networkRequestHeaders:Td(w),networkResponseHeaders:Td(v),beforeAddRecordingEvent:A,beforeErrorSampling:L,onError:D,attachRawBodyFromRequest:ee,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${bd}`:bd,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&bs())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ed}set _isInitialized(t){Ed=t}afterAllSetup(t){!bs()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&AA(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=MA(this._initialOptions,t);this._replay=new IA({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function MA(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=Rn(n.replaysSessionSampleRate),s=Rn(n.replaysOnErrorSampleRate);return o==null&&s==null&&an(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),s!=null&&(r.errorSampleRate=s),r}function Td(e){return[...RA,...e.map(t=>t.toLowerCase())]}function NA(){return M()?.getIntegrationByName("Replay")}var OA=Object.defineProperty,PA=(e,t,n)=>t in e?OA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Id=(e,t,n)=>PA(e,typeof t!="symbol"?t+"":t,n);class LA{constructor(){Id(this,"idNodeMap",new Map),Id(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function DA(){return new LA}function $A(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Wa(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Wa(e.parentNode,t,n,r+1)}function wd(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if($A(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const Vn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let kd={map:{},getId(){return console.error(Vn),-1},getNode(){return console.error(Vn),null},removeNodeFromMap(){console.error(Vn)},has(){return console.error(Vn),!1},reset(){console.error(Vn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(kd=new Proxy(kd,{get(e,t,n){return t==="map"&&console.error(Vn),Reflect.get(e,t,n)}}));function cu(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(i){qm(()=>{n.set.call(this,i)},0),s&&s.set&&s.set.call(this,i)}}),()=>cu(e,t,s||{},!0)}function uu(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function FA(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function _i(e,t,n,r,o){if(!e)return!1;const s=FA(e);if(!s)return!1;const i=wd(t,n),a=Wa(s,i);let c=-1;return a<0?!1:(r&&(c=Wa(s,wd(null,r))),a>-1&&c<0?!0:a<c)}const Rd={};function zm(e){const t=Rd[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch{}return Rd[e]=r.bind(window)}function mn(...e){return zm("requestAnimationFrame")(...e)}function qm(...e){return zm("setTimeout")(...e)}var mr=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(mr||{});let ns;function BA(e){ns=e}const Xi=e=>ns?(...n)=>{try{return e(...n)}catch(r){if(ns&&ns(r)===!0)return()=>{};throw r}}:e;var Qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UA=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Lo=0;Lo<Qn.length;Lo++)UA[Qn.charCodeAt(Lo)]=Lo;var HA=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Qn[t[n]>>2],o+=Qn[(t[n]&3)<<4|t[n+1]>>4],o+=Qn[(t[n+1]&15)<<2|t[n+2]>>6],o+=Qn[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Cd=new Map;function WA(e,t){let n=Cd.get(e);return n||(n=new Map,Cd.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Gm=(e,t,n)=>{if(!e||!(Jm(e,t)||typeof e=="object"))return;const r=e.constructor.name,o=WA(n,r);let s=o.indexOf(e);return s===-1&&(s=o.length,o.push(e)),s};function rs(e,t,n){if(e instanceof Array)return e.map(r=>rs(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,o=HA(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[rs(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[rs(e.data,t,n),e.width,e.height]};if(Jm(e,t)||typeof e=="object"){const r=e.constructor.name,o=Gm(e,t,n);return{rr_type:r,index:o}}}}return e}const Vm=(e,t,n)=>e.map(r=>rs(r,t,n)),Jm=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function jA(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=uu(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return _i(this.canvas,n,r,o,!0)||qm(()=>{const l=Vm(d,t,this);e(this.canvas,{type:mr["2D"],property:a,args:l})},0),u.apply(this,d)}});s.push(c)}catch{const c=cu(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:mr["2D"],property:a,args:[u],setter:!0})}});s.push(c)}return()=>{s.forEach(a=>a())}}function zA(e){return e==="experimental-webgl"?"webgl":e}function Ad(e,t,n,r,o){const s=[];try{const i=uu(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!_i(this,t,n,r,!0)){const d=zA(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});s.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(i=>i())}}function xd(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=uu(e,d,function(f){return function(...p){const h=f.apply(this,p);if(Gm(h,a,this),"tagName"in this.canvas&&!_i(this.canvas,r,o,s,!0)){const m=Vm(p,a,this),_={type:t,property:d,args:m};n(this.canvas,_)}return h}});c.push(l)}catch{const l=cu(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function qA(e,t,n,r,o,s){const i=[];return i.push(...xd(t.WebGLRenderingContext.prototype,mr.WebGL,e,n,r,o,s,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...xd(t.WebGL2RenderingContext.prototype,mr.WebGL2,e,n,r,o,s,t)),()=>{i.forEach(a=>a())}}const GA='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function VA(){const e=new Blob([GA]);return URL.createObjectURL(e)}class JA{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:s,errorHandler:i}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,i&&BA(i),(s&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&Xi(()=>{s&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),s&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:s,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Xi(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,o,s),i&&typeof n=="number"){const c=Ad(t,r,o,s,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}mn(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(VA());return t.onmessage=n=>{const r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;const{base64:s,type:i,width:a,height:c}=r;this.mutationCb({id:o,type:mr["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:s}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=mn(n)};t=mn(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){const s=Ad(t,n,r,o,!1),i=jA(this.processMutation.bind(this),t,n,r,o),a=qA(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{s(),i(),a()})}getCanvasElements(t,n,r){const o=[],s=i=>{i.querySelectorAll("canvas").forEach(a=>{_i(a,t,n,r)||o.push(a)})};for(const i of this.windows){const a=i.deref();let c;try{c=a&&a.document}catch{}c&&s(c)}for(const i of this.shadowDoms){const a=i.deref();a&&s(a)}return o}takeSnapshot(t,n,r){const{sampling:o,blockClass:s,blockSelector:i,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(s,i,a)).forEach(h=>{const m=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(m))){if(this.snapshotInProgressMap.set(m,!0),!n&&["webgl","webgl2"].includes(h.__context)){const _=h.getContext(h.__context);_?.getContextAttributes()?.preserveDrawingBuffer===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(h).then(_=>{this.worker?.postMessage({id:m,bitmap:_,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[_])}).catch(_=>{Xi(()=>{throw this.snapshotInProgressMap.delete(m),_})()})}}),!0)}startPendingCanvasMutationFlusher(){mn(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,mn(t)};mn(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),mn(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const o=r.map(i=>{const{type:a,...c}=i;return c}),{type:s}=r[0];this.mutationCb({id:n,type:s,commands:o}),this.pendingCanvasMutations.delete(t)}}try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}DA();var Md;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Md||(Md={}));const Nd={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},KA="ReplayCanvas",Do=1280,YA=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Do):Do,n?Math.min(n,Do):Do]};let o;const s=new Promise(i=>o=i);return{name:KA,getOptions(){const{quality:i,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const d=new JA({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return o(d),d},...Nd[i]||Nd.medium}},async snapshot(i,a){(await s).snapshot(i,a)}}}),XA=YA;function QA(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Km(e){try{return new URL(e,O.location.origin).href}catch{return}}function ZA(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Ym(e){try{return new Headers(e)}catch{return}}const Od=new WeakMap,Qi=new Map,lu={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Xm(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...lu,...t},d=typeof s=="function"?s:h=>!0,l=h=>ex(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(m=>{if(m.op==="http.client"){const _=Qi.get(m.span_id);_&&(m.timestamp=_/1e3,Qi.delete(m.span_id))}}),h)),o&&fT(h=>{if(h.response){const m=Od.get(h.response);m&&h.endTimestamp&&Qi.set(m,h.endTimestamp)}}),Cc(h=>{const m=Xb(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Od.set(h.response,h.fetchData.__span),m){const _=Km(h.fetchData.url),y=_?wn(_).host:void 0;m.setAttributes({"http.url":_,"server.address":y}),i&&Pd(m),c?.(m,{headers:h.headers})}})),r&&jc(h=>{const m=tx(h,d,l,f,p,u);m&&(i&&Pd(m),c?.(m,{headers:Ym(h.xhr.__sentry_xhr_v3__?.request_headers)}))})}function Pd(e){const{url:t}=$(e).data;if(!t||typeof t!="string")return;const n=Dn("resource",({entries:r})=>{r.forEach(o=>{ZA(o)&&o.name.endsWith(t)&&(e.setAttributes(Ah(o)),setTimeout(n))})})}function ex(e,t){const n=Fn();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}const s=r.origin===o;return t?ct(r.toString(),t)||s&&ct(r.pathname,t):s}else{const r=!!e.match(/^\/(?!\/)/);return t?ct(e,t):r}}function tx(e,t,n,r,o,s){const i=e.xhr,a=i?.[Rt];if(!i||i.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=et()&&t(c);if(e.endTimestamp&&d){const y=i.__sentry_xhr_span_id__;if(!y)return;const E=r[y];E&&a.status_code!==void 0&&(qr(E,a.status_code),E.end(),s?.(E,{headers:Ym(Nh(i)),error:e.error}),delete r[y]);return}const l=Km(c),f=wn(l||c),p=mp(c),h=!!be(),m=d&&h?tt({name:`${u} ${p}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":f?.host,[z]:"auto.http.browser",[de]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new Dt;i.__sentry_xhr_span_id__=m.spanContext().spanId,r[i.__sentry_xhr_span_id__]=m,n(c)&&nx(i,et()&&h?m:void 0,o);const _=M();return _&&_.emit("beforeOutgoingRequestSpan",m,e),m}function nx(e,t,n){const{"sentry-trace":r,baggage:o,traceparent:s}=_c({span:t,propagateTraceparent:n});r&&rx(e,r,o,s)}function rx(e,t,n,r){const o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){const s=o?.baggage;(!s||!QA(s))&&e.setRequestHeader("baggage",n)}}catch{}}function ox(){O.document?O.document.addEventListener("visibilitychange",()=>{const e=be();if(!e)return;const t=Se(e);if(O.document.hidden&&t){const n="cancelled",{op:r,status:o}=$(t);k&&g.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:Z,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):k&&g.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const sx=3600,Qm="sentry_previous_trace",ix="sentry.previous_trace";function ax(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let o=r?lx():void 0;e.on("spanStart",i=>{if(Se(i)!==i)return;const a=j().getPropagationContext();o=cx(o,i,a),r&&ux(o)});let s=!0;n&&e.on("beforeSampling",i=>{if(!o)return;const a=j(),c=a.getPropagationContext();if(s&&c.parentSpanId){s=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(ja(o.spanContext))},sampleRand:o.sampleRand}),i.parentSampled=ja(o.spanContext),i.parentSampleRate=o.sampleRate,i.spanAttributes={...i.spanAttributes,[mf]:o.sampleRate}})}function cx(e,t,n){const r=$(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Us])}catch{return 0}}const s={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return s;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=sx&&(k&&g.log(`Adding previous_trace \`${JSON.stringify(i)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:i,attributes:{[m_]:"previous_trace"}}),t.setAttribute(ix,`${i.traceId}-${i.spanId}-${ja(i)?1:0}`)),s)}function ux(e){try{O.sessionStorage.setItem(Qm,JSON.stringify(e))}catch(t){k&&g.warn("Could not store previous trace in sessionStorage",t)}}function lx(){try{const e=O.sessionStorage?.getItem(Qm);return JSON.parse(e)}catch{return}}function ja(e){return e.traceFlags===1}const dx="BrowserTracing",fx={...Ho,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...lu},Hn=((e={})=>{const t={name:void 0,source:void 0},n=O.document,{enableInp:r,enableElementTiming:o,enableLongTask:s,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:_,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:E,enableHTTPTimings:w,ignoreResourceSpans:v,ignorePerformanceApiSpans:S,instrumentPageLoad:C,instrumentNavigation:b,detectRedirects:N,linkPreviousTrace:B,consistentTraceSampling:T,enableReportPageLoaded:P,onRequestSpanStart:A,onRequestSpanEnd:L}={...fx,...e};let D,ee,Y;function ne(I,q,R=!0){const V=q.op==="pageload",ae=q.name,re=d?d(q):q,Te=re.attributes||{};if(ae!==re.name&&(Te[ie]="custom",re.attributes=Te),!R){const De=Bn();tt({...re,startTime:De}).end(De);return}t.name=re.name,t.source=Te[ie];const Le=jf(re,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:V,beforeSpanEnd:De=>{D?.(),LI(De,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:v,ignorePerformanceApiSpans:S}),Dd(I,void 0);const Ue=j(),ht=Ue.getPropagationContext();Ue.setPropagationContext({...ht,traceId:Le.spanContext().traceId,sampled:dn(Le),dsc:dt(De)}),V&&(Y=void 0)},trimIdleSpanEndTimestamp:!P});V&&P&&(Y=Le),Dd(I,Le);function Wt(){n&&["interactive","complete"].includes(n.readyState)&&I.emit("idleSpanEnableAutoFinish",Le)}V&&!P&&n&&(n.addEventListener("readystatechange",()=>{Wt()}),Wt())}return{name:dx,setup(I){if(Pf(),D=CI({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:I}),r&&aw(),o&&VI(),i&&F.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?xI():s&&AI(),a&&MI(),N&&n){const R=()=>{ee=me()};addEventListener("click",R,{capture:!0}),addEventListener("keydown",R,{capture:!0,passive:!0})}function q(){const R=Qr(I);R&&!$(R).timestamp&&(k&&g.log(`[Tracing] Finishing current active span with op: ${$(R).op}`),R.setAttribute(zr,"cancelled"),R.end())}I.on("startNavigationSpan",(R,V)=>{if(M()!==I)return;if(V?.isRedirect){k&&g.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ne(I,{op:"navigation.redirect",...R},!1);return}ee=void 0,q(),we().setPropagationContext({traceId:bt(),sampleRand:Math.random(),propagationSpanId:et()?void 0:xt()});const ae=j();ae.setPropagationContext({traceId:bt(),sampleRand:Math.random(),propagationSpanId:et()?void 0:xt()}),ae.setSDKProcessingMetadata({normalizedRequest:void 0}),ne(I,{op:"navigation",...R,parentSpan:null,forceTransaction:!0})}),I.on("startPageLoadSpan",(R,V={})=>{if(M()!==I)return;q();const ae=V.sentryTrace||Ld("sentry-trace"),re=V.baggage||Ld("baggage"),Te=wf(ae,re),Le=j();Le.setPropagationContext(Te),et()||(Le.getPropagationContext().propagationSpanId=xt()),Le.setSDKProcessingMetadata({normalizedRequest:Pc()}),ne(I,{op:"pageload",...R})}),I.on("endPageloadSpan",()=>{P&&Y&&(Y.setAttribute(zr,"reportPageLoaded"),Y.end())})},afterAllSetup(I){let q=Fn();if(B!=="off"&&ax(I,{linkPreviousTrace:B,consistentTraceSampling:T}),O.location){if(C){const R=Pe();kr(I,{name:O.location.pathname,startTime:R?R/1e3:void 0,attributes:{[ie]:"url",[z]:"auto.pageload.browser"}})}b&&ci(({to:R,from:V})=>{if(V===void 0&&q?.indexOf(R)!==-1){q=void 0;return}q=void 0;const ae=gc(R),re=Qr(I),Te=re&&N&&hx(re,ee);Rr(I,{name:ae?.pathname||O.location.pathname,attributes:{[ie]:"url",[z]:"auto.navigation.browser"}},{url:R,isRedirect:Te})})}h&&ox(),a&&px(I,l,f,p,t),r&&lw(),Xm(I,{traceFetch:m,traceXHR:_,trackFetchStreamPerformance:y,tracePropagationTargets:I.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:E,enableHTTPTimings:w,onRequestSpanStart:A,onRequestSpanEnd:L})}}});function kr(e,t,n){e.emit("startPageLoadSpan",t,n),j().setTransactionName(t.name);const r=Qr(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Rr(e,t,n){const{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});const s=j();return s.setTransactionName(t.name),r&&!o&&s.setSDKProcessingMetadata({normalizedRequest:{...Pc(),url:r}}),Qr(e)}function Ld(e){return O.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function px(e,t,n,r,o){const s=O.document;let i;const a=()=>{const c="ui.action.click",u=Qr(e);if(u){const d=$(u).op;if(["navigation","pageload"].includes(d)){k&&g.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(zr,"interactionInterrupted"),i.end(),i=void 0),!o.name){k&&g.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=jf({name:o.name,op:c,attributes:{[ie]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};s&&addEventListener("click",a,{capture:!0})}const Zm="_sentry_idleSpan";function Qr(e){return e[Zm]}function Dd(e,t){Ce(e,Zm,t)}const $d=1.5;function hx(e,t){const n=$(e),r=Bn(),o=n.start_timestamp;return!(r-o>$d||t&&r-t<=$d)}function mx(e=M()){e?.emit("endPageloadSpan")}function gx(e){const t=be();if(t===e)return;const n=j();e.end=new Proxy(e.end,{apply(r,o,s){return Et(n,t),Reflect.apply(r,o,s)}}),Et(n,e)}function gr(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function _x(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=gr(n);return o=>r.then(s=>o(s.transaction(t,"readwrite").objectStore(t)))}function du(e){return gr(e.getAllKeys())}function yx(e,t,n){return e(r=>du(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),gr(r.transaction)}))}function Sx(e,t,n){return e(r=>du(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),gr(r.transaction)}))}function bx(e){return e(t=>du(t).then(n=>{const r=n[0];if(r!=null)return gr(t.get(r)).then(o=>(t.delete(r),gr(t.transaction).then(()=>o)))}))}function Ex(e){let t;function n(){return t==null&&(t=_x(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const o=await ds(r);await yx(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const o=await ds(r);await Sx(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await bx(n());if(r)return K_(r)}catch{}}}}function vx(e){return t=>{const n=e({...t,createStore:Ex});return O.addEventListener("online",async r=>{await n.flush()}),n}}function Tx(e=qc){return vx(kS(e))}const Fd=1e6,Ix="window"in F&&F.window===F&&typeof importScripts>"u",Yt=String(0),Ls=Ix?"main":"worker",Ds=O.navigator;let eg="",tg="",ng="",za=Ds?.userAgent||"",rg="";const wx=Ds?.language||Ds?.languages?.[0]||"";function kx(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const Bd=Ds?.userAgentData;kx(Bd)&&Bd.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(eg=e.platform||"",ng=e.architecture||"",rg=e.model||"",tg=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];za=`${t.brand} ${t.version}`}}).catch(e=>{});function Rx(e){return!("thread_metadata"in e)}function Cx(e){return Rx(e)?Px(e):e}function Ax(e){const t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&k&&g.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function xx(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=Ax(r),s=Cx(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:me()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:me()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ws,runtime:{name:"javascript",version:O.navigator.userAgent},os:{name:eg,version:tg,build_number:za},device:{locale:wx,model:rg,manufacturer:za,architecture:ng,is_emulator:!1},debug_meta:{images:sg(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||Re(),trace_id:o,active_thread_id:Yt,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function Mx(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=Ox(e),o=t.getOptions(),s=t.getSdkMetadata?.()?.sdk;return{chunk_id:Re(),client_sdk:{name:s?.name??"sentry.javascript.browser",version:s?.version??"0.0.0"},profiler_id:n||Re(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:sg(e.resources)},profile:r}}function Nx(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function Ox(e){const t=[];for(let a=0;a<e.frames.length;a++){const c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}const n=[];for(let a=0;a<e.stacks.length;a++){const c=e.stacks[a];if(!c)continue;const u=[];let d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}const r=Pe(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,s=o-(r||o),i=[];for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(!c)continue;const u=(o+(c.timestamp-s))/1e3;i[a]={stack_id:c.stackId??0,thread_id:Yt,timestamp:u}}return{frames:t,stacks:n,samples:i,thread_metadata:{[Yt]:{name:Ls}}}}function og(e){return $(e).op==="pageload"}function Px(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Yt]:{name:Ls}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,i=Pe(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-s)*Fd).toFixed(0),stack_id:t,thread_id:Yt};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-s)*Fd).toFixed(0),stack_id:n,thread_id:Yt};r.stacks[n]=f,r.samples[d]=p,n++}),r}function Lx(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function Dx(e){const t=[];return Cn(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function sg(e){const r=M()?.getOptions()?.stackParser;return r?Ty(r,e):[]}function ig(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(k&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(k&&g.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function $x(e){return e.samples.length<2?(k&&g.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(k&&g.log("[Profiling] Discarding profile because it contains no frames"),!1)}let fu=!1;const ag=3e4;function Fx(e){return typeof e=="function"}function cg(){const e=O.Profiler;if(!Fx(e)){k&&g.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(ag/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{k&&(g.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),g.log("[Profiling] Disabling profiling for current user session.")),fu=!0}}function Ud(e){if(fu)return k&&g.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return k&&g.log("[Profiling] Discarding profile because root span was not sampled."),!1;const n=M()?.getOptions();if(!n)return k&&g.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return ig(r)?r?(r===!0?!0:Math.random()<r)?!0:(k&&g.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(k&&g.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(k&&g.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function Bx(e){if(fu)return k&&g.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return k&&g.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return ig(t)?t?Math.random()<=t:(k&&g.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(k&&g.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function $o(e){return typeof e.profilesSampleRate<"u"}function Ux(e,t,n,r){return $x(n)?xx(e,t,n,r):null}const En=new Map;function Hx(){return En.size}function Wx(e){const t=En.get(e);return t&&En.delete(e),t}function jx(e,t){if(En.set(e,t),En.size>30){const n=En.keys().next().value;n!==void 0&&En.delete(n)}}function zx(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":Yt,"thread.name":Ls}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":Yt,"thread.name":Ls}})),e}function Hd(e){let t;og(e)&&(t=me()*1e3);const n=cg();if(!n)return;k&&g.log(`[Profiling] started profiling span: ${$(e).description}`);const r=Re();let o=null;j().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n){if(o){k&&g.log("[Profiling] profile for:",$(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(i&&(O.clearTimeout(i),i=void 0),k&&g.log(`[Profiling] stopped profiling of span: ${$(e).description}`),!u){k&&g.log(`[Profiling] profiler returned null profile for: ${$(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,jx(r,u)}).catch(u=>{k&&g.log("[Profiling] error while stopping profiler:",u)})}}let i=O.setTimeout(()=>{k&&g.log("[Profiling] max profile duration elapsed, stopping profiling for:",$(e).description),s()},ag);const a=e.end.bind(e);function c(){return e?(s().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const qx=6e4,Gx=3e5;class Vx{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,r=Bx(t.getOptions());k&&g.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||k&&g.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=Re(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){k&&g.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){k&&g.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){k&&g.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){k&&g.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){k&&g.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(k&&g.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,k&&g.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Mt().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){k&&g.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{k&&g.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Mt().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){k&&g.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Se(n))return;if(!n.isRecording()){k&&g.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const o=this._activeRootSpanIds.size;o===1&&(k&&g.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${o}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const o=this._activeRootSpanIds.size;k&&g.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${o}).`),o===0&&(this._collectCurrentChunk().catch(s=>{k&&g.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",s)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Mt().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),Gx);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;const t=cg();if(!t){k&&g.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{k&&g.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},qx))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(k&&g.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=Mx(n,this._client,this._profilerId),o=Nx(r);if("reason"in o){k&&g.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),k&&g.log("[Profiling] Collected browser profile chunk.")}catch(n){k&&g.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){const n=this._client,r=js(n.getSdkMetadata?.()),o=n.getDsn(),s=n.getOptions().tunnel,i=pt({event_id:Re(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!s&&o&&{dsn:Bt(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(i).then(null,a=>{k&&g.error("Error while sending profile chunk envelope:",a)})}}const Jx="BrowserProfiling",Kx=(()=>({name:Jx,setup(e){const t=e.getOptions(),n=new Vx;if(!$o(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),$o(t)&&!t.profilesSampleRate){k&&g.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=be(),o=r&&Se(r);if($o(t)&&t.profileSessionSampleRate!==void 0&&k&&g.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),$o(t))o&&og(o)&&Ud(o)&&Hd(o),e.on("spanStart",s=>{s===Se(s)&&Ud(s)&&Hd(s)}),e.on("beforeEnvelope",s=>{if(!Hx())return;const i=Dx(s);if(!i.length)return;const a=[];for(const c of i){const u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){k&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){k&&g.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;const f=Wx(d);if(!f){k&&g.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}const p=Ux(d,l,f,c);p&&a.push(p)}Lx(s,a)});else{const s=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),s==="manual")n.initialize(e);else if(s==="trace"){if(!et(t)){k&&g.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),o&&n.notifyRootSpanActive(o),O.setTimeout(()=>{const i=be(),a=i&&Se(i);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return zx(e)}})),Yx=Kx,Xx=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Er(e)}});function Qx(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{xn(e,t.value),Mn(e,t.value)}}}const Zx=()=>({name:"OpenFeature",processEvent(e,t,n){return Er(e)}});class eM{after(t,n){xn(n.flagKey,n.value),Mn(n.flagKey,n.value)}error(t,n,r){xn(t.flagKey,t.defaultValue),Mn(t.flagKey,t.defaultValue)}}const tM=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Me(t,"isEnabled",nM)},processEvent(t,n,r){return Er(t)}});function nM(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(xn(n,r),Mn(n,r)):k&&g.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const rM=(({growthbookClass:e})=>Yb({growthbookClass:e})),oM=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{xn(n.gate.name,n.gate.value),Mn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Er(t)}});async function sM(){const e=M();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await Uf(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const iM="WebWorker",aM=({worker:e})=>({name:iM,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>Wd(t))},addWorker:t=>Wd(t)});function Wd(e){e.addEventListener("message",t=>{lM(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(k&&g.log("Sentry debugId web worker message received",t.data),O._sentryDebugIds={...t.data._sentryDebugIds,...O._sentryDebugIds}),t.data._sentryWorkerError&&(k&&g.log("Sentry worker rejection message received",t.data._sentryWorkerError),cM(t.data._sentryWorkerError)))})}function cM(e){const t=M();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,s=tn(o)?jh(o):si(n,o,void 0,r,!0);s.level="error",e.filename&&(s.contexts={...s.contexts,worker:{filename:e.filename}}),br(s,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),k&&g.log("Captured worker unhandled rejection",o)}function uM({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{const r={reason:Wh(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),k&&g.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),k&&g.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function lM(e){if(!yt(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryWorkerError"in e;return!(!t&&!n||t&&!(yt(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!yt(e._sentryWorkerError))}function ug(e){const t={...e};return yp(t,"react"),ac("react",{version:ke.version}),Sk(t)}function dM(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function fM(e,t){const n=new WeakSet;function r(o,s){if(!n.has(o)){if(o.cause)return n.add(o),r(o.cause,s);o.cause=s}}r(e,t)}function pu(e,{componentStack:t},n){if(dM(ke.version)&&At(e)&&t){const r=new Error(e.message);r.name=`React ErrorBoundary ${e.name}`,r.stack=t,fM(e,r)}return qe(r=>(r.setContext("react",{componentStack:t}),ge(e,n)))}function pM(e){return(t,n)=>{const r=!!e,o=pu(t,n,{mechanism:{handled:r,type:"auto.function.react.error_handler"}});r&&e(t,n,o)}}const lg="ui.react.render",hM="ui.react.update",dg="ui.react.mount";var Zi={exports:{}},se={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd;function mM(){if(jd)return se;jd=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,l=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,E=e?Symbol.for("react.scope"):60119;function w(S){if(typeof S=="object"&&S!==null){var C=S.$$typeof;switch(C){case t:switch(S=S.type,S){case c:case u:case r:case s:case o:case l:return S;default:switch(S=S&&S.$$typeof,S){case a:case d:case h:case p:case i:return S;default:return C}}case n:return C}}}function v(S){return w(S)===u}return se.AsyncMode=c,se.ConcurrentMode=u,se.ContextConsumer=a,se.ContextProvider=i,se.Element=t,se.ForwardRef=d,se.Fragment=r,se.Lazy=h,se.Memo=p,se.Portal=n,se.Profiler=s,se.StrictMode=o,se.Suspense=l,se.isAsyncMode=function(S){return v(S)||w(S)===c},se.isConcurrentMode=v,se.isContextConsumer=function(S){return w(S)===a},se.isContextProvider=function(S){return w(S)===i},se.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},se.isForwardRef=function(S){return w(S)===d},se.isFragment=function(S){return w(S)===r},se.isLazy=function(S){return w(S)===h},se.isMemo=function(S){return w(S)===p},se.isPortal=function(S){return w(S)===n},se.isProfiler=function(S){return w(S)===s},se.isStrictMode=function(S){return w(S)===o},se.isSuspense=function(S){return w(S)===l},se.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===r||S===u||S===s||S===o||S===l||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===h||S.$$typeof===p||S.$$typeof===i||S.$$typeof===a||S.$$typeof===d||S.$$typeof===_||S.$$typeof===y||S.$$typeof===E||S.$$typeof===m)},se.typeOf=w,se}var zd;function gM(){return zd||(zd=1,Zi.exports=mM()),Zi.exports}var ea,qd;function _M(){if(qd)return ea;qd=1;var e=gM(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=o;function i(h){return e.isMemo(h)?o:s[h.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,f=Object.prototype;function p(h,m,_){if(typeof m!="string"){if(f){var y=l(m);y&&y!==f&&p(h,y,_)}var E=c(m);u&&(E=E.concat(u(m)));for(var w=i(h),v=i(m),S=0;S<E.length;++S){var C=E[S];if(!n[C]&&!(_&&_[C])&&!(v&&v[C])&&!(w&&w[C])){var b=d(m,C);try{a(h,C,b)}catch{}}}}return h}return ea=p,ea}var fg=_M();const pg=Mg(fg),yM=Ng({__proto__:null,default:pg},[fg]),yi=pg||yM,SM="unknown";class hu extends ke.Component{constructor(t){super(t);const{name:n,disabled:r=!1}=this.props;r||(this._mountSpan=tt({name:`<${n}>`,onlyIfParent:!0,op:dg,attributes:{[z]:"auto.ui.react.profiler","ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:n=!0}){if(n&&this._mountSpan&&t!==this.props.updateProps){const r=Object.keys(t).filter(o=>t[o]!==this.props.updateProps[o]);if(r.length>0){const o=me();this._updateSpan=An(this._mountSpan,()=>tt({name:`<${this.props.name}>`,onlyIfParent:!0,op:hM,startTime:o,attributes:{[z]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=me(),{name:n,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const o=$(this._mountSpan).timestamp;An(this._mountSpan,()=>{const s=tt({onlyIfParent:!0,name:`<${n}>`,op:lg,startTime:o,attributes:{[z]:"auto.ui.react.profiler","ui.component_name":n}});s&&s.end(t)})}}render(){return this.props.children}}Object.assign(hu,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function bM(e,t){const n=t?.name||e.displayName||e.name||SM,r=o=>ke.createElement(hu,{...t,name:n,updateProps:o},ke.createElement(e,{...o}));return r.displayName=`profiler(${n})`,yi(r,e),r}function EM(e,t={disabled:!1,hasRenderSpan:!0}){const[n]=ke.useState(()=>{if(!t?.disabled)return tt({name:`<${e}>`,onlyIfParent:!0,op:dg,attributes:{[z]:"auto.ui.react.profiler","ui.component_name":e}})});ke.useEffect(()=>(n&&n.end(),()=>{if(n&&t.hasRenderSpan){const r=$(n).timestamp,o=me(),s=tt({name:`<${e}>`,onlyIfParent:!0,op:lg,startTime:r,attributes:{[z]:"auto.ui.react.profiler","ui.component_name":e}});s&&s.end(o)}}),[])}const Oe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,vM="unknown",ta={componentStack:null,error:null,eventId:null};class hg extends ke.Component{constructor(t){super(t),this.state=ta,this._openFallbackReportDialog=!0;const n=M();n&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",r=>{!r.type&&this._lastEventId&&r.event_id===this._lastEventId&&Na({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,n){const{componentStack:r}=n,{beforeCapture:o,onError:s,showDialog:i,dialogOptions:a}=this.props;qe(c=>{o&&o(c,t,r);const u=this.props.handled!=null?this.props.handled:!!this.props.fallback,d=pu(t,n,{mechanism:{handled:u,type:"auto.function.react.error_boundary"}});s&&s(t,r,d),i&&(this._lastEventId=d,this._openFallbackReportDialog&&Na({...a,eventId:d})),this.setState({error:t,componentStack:r,eventId:d})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:o}=this.props;o&&(this.state===ta?o(null,null,null):o(t,n,r)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:n,componentStack:r,eventId:o}=this.state;t&&t(n,r,o),this.setState(ta)}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.componentStack===null)return typeof n=="function"?n():n;const o=typeof t=="function"?ke.createElement(t,{error:r.error,componentStack:r.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:r.eventId}):t;return ke.isValidElement(o)?o:(t&&Oe&&g.warn("fallback did not produce a valid ReactElement"),null)}}function TM(e,t){const n=e.displayName||e.name||vM,r=ke.memo(o=>ke.createElement(hg,{...t},ke.createElement(e,{...o})));return r.displayName=`errorBoundary(${n})`,yi(r,e),r}const IM="redux.action",wM="info",kM={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function RM(e){const t={...kM,...e};return n=>(r,o)=>{t.attachReduxState&&Mt().addEventProcessor((a,c)=>{try{a.type===void 0&&a.contexts.state.state.type==="redux"&&(c.attachments=[...c.attachments||[],{filename:"redux_state.json",data:JSON.stringify(a.contexts.state.state.value)}])}catch{}return a});function s(a){return(c,u)=>{const d=a(c,u),l=j(),f=t.actionTransformer(u);typeof f<"u"&&f!==null&&ft({category:IM,data:f,type:wM});const p=t.stateTransformer(d);if(typeof p<"u"&&p!==null){const y=M()?.getOptions()?.normalizeDepth||3,E={state:{type:"redux",value:p}};Ce(E,"__sentry_override_normalization_depth__",3+y),l.setContext("state",E)}else l.setContext("state",null);const{configureScopeWithState:h}=t;return typeof h=="function"&&h(l,d),d}}const i=n(s(r),o);return i.replaceReducer=new Proxy(i.replaceReducer,{apply:function(a,c,u){a.apply(c,[s(u[0])])}}),i}}function CM(e){const t=Hn({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,match:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),s&&O.location&&Gd(r,O.location,o,(c,u="url")=>{kr(a,{name:c,attributes:{[de]:"pageload",[z]:"auto.pageload.react.reactrouter_v3",[ie]:u}})}),i&&n.listen&&n.listen(c=>{(c.action==="PUSH"||c.action==="POP")&&Gd(r,c,o,(u,d="url")=>{Rr(a,{name:u,attributes:{[de]:"navigation",[z]:"auto.navigation.react.reactrouter_v3",[ie]:d}})})})}}}function Gd(e,t,n,r){let o=t.pathname;n({location:t,routes:e},(s,i,a)=>{if(s||!a)return r(o);const c=AM(a.routes||[]);return c.length===0||c==="/*"?r(o):(o=c,r(o,"route"))})}function AM(e){if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(r=>!!r.path);let n=-1;for(let r=t.length-1;r>=0;r--)if(t[r].path?.startsWith("/")){n=r;break}return t.slice(n).reduce((r,{path:o})=>{const s=r==="/"||r===""?o:`/${o}`;return`${r}${s}`},"")}function xM(e,t={}){const n=e,r=Hn({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:o=!0,instrumentNavigation:s=!0}=t;return{...r,afterAllSetup(i){r.afterAllSetup(i);const a=O.location;if(o&&a){const c=n.matchRoutes(a.pathname,n.options.parseSearch(a.search),{preload:!1,throwOnError:!1}),u=c[c.length-1];kr(i,{name:u?u.routeId:a.pathname,attributes:{[de]:"pageload",[z]:"auto.pageload.react.tanstack_router",[ie]:u?"route":"url",...Vd(u)}})}s&&n.subscribe("onBeforeNavigate",c=>{if(!c.fromLocation||c.toLocation.state===c.fromLocation.state)return;const u=n.matchRoutes(c.toLocation.pathname,c.toLocation.search,{preload:!1,throwOnError:!1}),d=u[u.length-1],l=O.location,f=Rr(i,{name:d?d.routeId:l.pathname,attributes:{[de]:"navigation",[z]:"auto.navigation.react.tanstack_router",[ie]:d?"route":"url"}}),p=n.subscribe("onResolved",h=>{if(p(),f){const m=n.matchRoutes(h.toLocation.pathname,h.toLocation.search,{preload:!1,throwOnError:!1}),_=m[m.length-1];_&&(f.updateName(_.routeId),f.setAttribute(ie,"route"),f.setAttributes(Vd(_)))}})})}}}function Vd(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([n,r])=>{t[`url.path.params.${n}`]=r,t[`url.path.parameter.${n}`]=r,t[`params.${n}`]=r}),t}function MM(e){const t=Hn({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),mg(a,s,i,n,"reactrouter_v4",r,o)}}}function NM(e){const t=Hn({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),mg(a,s,i,n,"reactrouter_v5",r,o)}}}function mg(e,t,n,r,o,s=[],i){function a(){if(r.location)return r.location.pathname;if(O.location)return O.location.pathname}function c(u){if(s.length===0||!i)return[u,"url"];const d=gg(s,u,i);for(const l of d)if(l.match.isExact)return[l.match.path,"route"];return[u,"url"]}if(t){const u=a();if(u){const[d,l]=c(u);kr(e,{name:d,attributes:{[de]:"pageload",[z]:`auto.pageload.react.${o}`,[ie]:l}})}}n&&r.listen&&r.listen((u,d)=>{if(d&&(d==="PUSH"||d==="POP")){const[l,f]=c(u.pathname);Rr(e,{name:l,attributes:{[de]:"navigation",[z]:`auto.navigation.react.${o}`,[ie]:f}})}})}function gg(e,t,n,r=[]){return e.some(o=>{const s=o.path?n(t,o):r.length?r[r.length-1].match:OM(t);return s&&(r.push({route:o,match:s}),o.routes&&gg(o.routes,t,n,r)),!!s}),r}function OM(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function PM(e){const t=e.displayName||e.name,n=r=>{if(r?.computedMatch?.isExact){const o=r.computedMatch.path,s=LM();j().setTransactionName(o),s&&(s.updateName(o),s.setAttribute(ie,"route"))}return ke.createElement(e,{...r})};return n.displayName=`sentryRoute(${t})`,yi(n,e),n}function LM(){const e=be(),t=e&&Se(e);if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}let mu,tr=!1;const Xt=[],DM=10;function $M(e,t){const n={};return Xt.length>=DM&&(Oe&&g.warn("[React Router] Navigation context stack overflow - removing oldest context"),Xt.shift()),Xt.push({token:n,targetPath:e,span:t}),n}function FM(e){Xt[Xt.length-1]?.token===e&&Xt.pop()}function _g(){const e=Xt.length;return e>0?Xt[e-1]??null:null}function BM(e,t=!1){mu=e,tr=t}function UM(e){return WM(e.route.path||"")}function HM(e){return e.params["*"]||""}function WM(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function nr(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function yg(e){return e.endsWith("*")}function sn(e){return e.includes("/*")||e.endsWith("*")}function Jd(e,t){return yg(e)&&!!t.route.children?.length||!1}function jM(e){return!!(!e.children&&e.element&&e.path?.endsWith("/*"))}function zM(e,t,n){const r=e&&e.length>0?e:tr?Si(t,n):t;let o=r.slice(-2)==="/*"?r.slice(0,-2):r;return o.length>1&&o[o.length-1]==="/"&&(o=o.slice(0,-1)),[o,"route"]}function Kd(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function Si(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?e:e.slice(n)||"/"}function $s(e){return e[0]==="/"?e:`/${e}`}function Sg(e,t){const n=mu(e,t);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const o=UM(r),s=Si(t.pathname,$s(r.pathnameBase));return t.pathname===s?nr(s):nr(nr(o||"")+$s(Sg(e.filter(i=>i!==r.route),{pathname:s})))}return""}function qM(e,t){const n=mu(t,e);if(n){for(const r of n)if(jM(r.route)&&HM(r))return!0}return!1}function Yd(e,t){return tr?Si(e.pathname,t):e.pathname||""}function GM(e,t,n,r=""){if(!e||e.length===0)return[tr?Si(t.pathname,r):t.pathname,"url"];if(!n)return[Yd(t,r),"url"];let o="";for(const s of n){const i=s.route;if(!i)continue;if(i.index)return zM(o,s.pathname,r);const a=i.path;if(!a||Jd(a,s))continue;const c=a[0]==="/"||o[o.length-1]==="/"?a:`/${a}`;if(o=nr(o)+$s(c),nr(t.pathname)===nr(r+s.pathname))return Kd(o)!==Kd(s.pathname)&&!yg(o)?[(tr?"":r)+c,"route"]:(Jd(o,s)&&(o=o.slice(0,-1)),[(tr?"":r)+o,"route"])}return[Yd(t,r),"url"]}function bi(e,t,n,r,o=""){let s,i="url";const a=qM(e,n);return a&&(s=$s(Sg(n,e)),i="route"),(!a||!s)&&([s,i]=GM(t,e,r,o)),[s||e.pathname,i]}function ut(){const e=be(),t=e?Se(e):void 0;if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}function VM(){const e=_g();if(e?.targetPath)return{pathname:e.targetPath,search:"",hash:"",state:null,key:"default"};if(typeof O<"u")try{const t=O.location;if(t)return{pathname:t.pathname,search:t.search||"",hash:t.hash||"",state:null,key:"default"}}catch{Oe&&g.warn("[React Router] Could not access window.location")}return null}function JM(){const e=_g();return e?e.span:ut()}function KM(e,t,n,r){const o=new Proxy(e,{apply(s,i,a){const c=VM(),u=JM(),d=s.apply(i,a);return YM(d,t,n,r,c,u),d}});return Ce(o,"__sentry_proxied__",!0),o}function YM(e,t,n,r,o,s){$n(e)?e.then(i=>{Array.isArray(i)&&r(i,t,o??void 0,s)}).catch(i=>{Oe&&g.warn(`Error resolving async handler '${n}' for route`,t,i)}):Array.isArray(e)&&r(e,t,o??void 0,s)}function Ei(e,t){if(e.handle&&typeof e.handle=="object")for(const n of Object.keys(e.handle)){const r=e.handle[n];typeof r=="function"&&!r.__sentry_proxied__&&(e.handle[n]=KM(r,e,n,t))}if(Array.isArray(e.children))for(const n of e.children)Ei(n,t)}let Qt,Zt,en,os,rt,vi=!1,vn=3e3;const bg=new WeakSet,yn=new WeakMap,Be=new Set,ss=new WeakMap;function XM(e){return O?.requestAnimationFrame?O.requestAnimationFrame(e):setTimeout(e,0)}function Xd(e){O?.cancelAnimationFrame?O.cancelAnimationFrame(e):clearTimeout(e)}function Eg(e){return`${e.pathname}${e.search||""}${e.hash||""}`}function Qd(e){return e.includes(":")||e.includes("*")}function QM(e,t,n,r){if(!e)return{skip:!1,shouldUpdate:!1};if(e.locationKey===t&&(e.isPlaceholder||!r)){const s=!!e.routeName&&sn(e.routeName),i=sn(n),a=!!e.routeName&&Qd(e.routeName),c=Qd(n),u=s&&!i,d=!a&&c,l=n!==e.routeName&&n.length>(e.routeName?.length||0)&&!i;return{skip:!0,shouldUpdate:!!(e.routeName&&(u||d||l))}}return{skip:!1,shouldUpdate:!1}}function ZM(e,t){const n=t.children||[],r=e.filter(o=>!n.some(s=>s===o||o.path&&s.path===o.path||o.id&&s.id===o.id));r.length>0&&(t.children=[...n,...r])}function eN(e,t){let n=ss.get(e);n||(n=new Set,ss.set(e,n)),n.add(t),t.finally(()=>{const r=ss.get(e);r&&r.delete(t)})}function gu(e,t,n=null,r){e.forEach(s=>{Be.add(s),vi&&Ei(s,gu)}),t&&ZM(e,t);const o=r??ut();if(o){const s=$(o);if(s.timestamp){Oe&&g.warn("[React Router] Lazy handler resolved after span ended - skipping update");return}const i=s.op;let a=n;if(!a&&!r&&typeof O<"u"){const c=O.location;c?.pathname&&(a={pathname:c.pathname})}a&&(i==="pageload"?yo({activeRootSpan:o,location:{pathname:a.pathname},routes:Array.from(Be),allRoutes:Array.from(Be)}):i==="navigation"&&qa(o,a,Array.from(Be),!1,rt))}}function qa(e,t,n,r=!1,o){const s=$(e),i=s.description,a=e?.__sentry_navigation_name_set__,c=i&&sn(i);if((!a||r||c)&&!s.timestamp){const d=o(n,t),[l,f]=bi(t,n,n,d||[],""),p=s.data?.[ie];l&&(!i||!a&&(p!=="route"||f==="route")||p!=="route"&&f==="route"||p==="route"&&f==="route"&&c)&&(e.updateName(l),e.setAttribute(ie,f),!sn(l)&&f==="route"&&Ce(e,"__sentry_navigation_name_set__",!0))}}function vg(e,t,n,r,o){let s=!1,i=!!o&&$(o).op==="pageload",a=!1,c=null,u=null;e.subscribe(d=>{if(!s){const f=ut();f&&$(f).op==="pageload"?i=!0:i&&(d.historyAction==="POP"&&!a?a=!0:s=!0)}if(d.historyAction==="PUSH"||d.historyAction==="POP"&&s){const f=Eg(d.location),p=()=>{u!==f&&(u=f,c=null,_u({location:d.location,routes:t,navigationType:d.historyAction,version:n,basename:r,allRoutes:Array.from(Be)}))};d.navigation.state!=="idle"?(u!==f&&(u=null),c!==null&&Xd(c),c=XM(p)):(c!==null&&(Xd(c),c=null),p())}})}function Tg(e,t){return!Qt||!Zt||!en||!rt?(Oe&&g.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e):function(n,r){if(_o(n),vi)for(const c of n)Ei(c,gu);const o=Rg(r),s=e(n,o),i=r?.basename,a=ut();return s.state.historyAction==="POP"&&a&&yo({activeRootSpan:a,location:s.state.location,routes:n,basename:i,allRoutes:Array.from(Be)}),vg(s,n,t,i,a),s}}function Ig(e,t){return!Qt||!Zt||!en||!rt?(Oe&&g.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e):function(n,r){if(_o(n),vi)for(const h of n)Ei(h,gu);const o=Rg(r,!0),s=e(n,o),i=r?.basename;let a;const c=r?.initialEntries,u=r?.initialIndex,d=c&&c.length===1,l=u!==void 0&&c&&c[u];a=d?c[0]:l?c[u]:void 0;const f=a?typeof a=="string"?{pathname:a}:a:s.state.location,p=ut();return s.state.historyAction==="POP"&&p&&yo({activeRootSpan:p,location:f,routes:n,basename:i,allRoutes:Array.from(Be)}),vg(s,n,t,i,p),s}}function wg(e,t){const n=Hn({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:o,useNavigationType:s,createRoutesFromChildren:i,matchRoutes:a,stripBasename:c,enableAsyncRouteHandlers:u=!1,instrumentPageLoad:d=!0,instrumentNavigation:l=!0,lazyRouteTimeout:f}=e;return{...n,setup(p){n.setup(p);const h=e.finalTimeout??3e4,m=(e.idleTimeout??1e3)*3,_=f??m;_===1/0?(vn=h,Oe&&g.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",h,"ms to prevent indefinite hangs")):Number.isNaN(_)?(Oe&&g.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",m),vn=m):_<0?(Oe&&g.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",_,"falling back to:",m),vn=m):vn=_,Qt=r,Zt=o,en=s,rt=a,os=i,vi=u,BM(a,c||!1)},afterAllSetup(p){n.afterAllSetup(p);const h=O.location?.pathname;d&&h&&kr(p,{name:h,attributes:{[ie]:"url",[de]:"pageload",[z]:`auto.pageload.react.reactrouter_v${t}`}}),l&&bg.add(p)}}}function kg(e,t){if(!Qt||!Zt||!en||!rt)return Oe&&g.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const n=r=>{const o=ke.useRef(!0),{routes:s,locationArg:i}=r,a=e(s,i),c=Zt(),u=en(),d=typeof i=="string"||i?.pathname?i:c;return Qt(()=>{const l=typeof d=="string"?{pathname:d}:d;o.current?(_o(s),yo({activeRootSpan:ut(),location:l,routes:s,allRoutes:Array.from(Be)}),o.current=!1):_u({location:l,routes:s,navigationType:u,version:t,allRoutes:Array.from(Be)})},[u,d]),a};return(r,o)=>ke.createElement(n,{routes:r,locationArg:o})}function Rg(e,t=!1){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const n=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async r=>{const o=r?.path,s=ut();if(!t){const a=r?.patch;a&&(r.patch=(c,u)=>{_o(u);const d=ut();return o&&d&&$(d).op==="navigation"&&qa(d,{pathname:o,search:"",hash:"",state:null,key:"default"},Array.from(Be),!0,rt),a(c,u)})}const i=(async()=>{const a=$M(o,s);let c;try{c=await n(r)}finally{FM(a)}const u=ut();if(u&&$(u).op==="navigation"){const d=t?o:o||O.location?.pathname;d&&qa(u,{pathname:d,search:"",hash:"",state:null,key:"default"},Array.from(Be),!1,rt)}return c})();return s&&eN(s,i),i}}}function _u(e){const{location:t,routes:n,navigationType:r,version:o,matches:s,basename:i,allRoutes:a}=e,c=Array.isArray(s)?s:rt(a||n,t,i),u=M();if(!u||!bg.has(u))return;const d=ut();if(!(d&&$(d).op==="pageload"&&r==="POP")&&(r==="PUSH"||r==="POP")&&c){const[l,f]=bi(t,a||n,a||n,c,i),p=Eg(t),h=yn.get(u),m=h&&!h.isPlaceholder?!!$(h.span).timestamp:!1,{skip:_,shouldUpdate:y}=QM(h,p,l,m);if(_){if(y&&h){const S=h.routeName;h.isPlaceholder?(h.routeName=l,Oe&&g.log(`[Tracing] Updated placeholder navigation name from "${S}" to "${l}" (will apply to real span)`)):(h.span.updateName(l),h.span.setAttribute(ie,f),Ce(h.span,"__sentry_navigation_name_set__",!0),h.routeName=l,Oe&&g.log(`[Tracing] Updated navigation span name from "${S}" to "${l}"`))}else Oe&&g.log(`[Tracing] Skipping duplicate navigation for location: ${p}`);return}const w={span:{end:()=>{}},routeName:l,pathname:t.pathname,locationKey:p,isPlaceholder:!0};yn.set(u,w);let v;try{v=Rr(u,{name:w.routeName,attributes:{[ie]:f,[de]:"navigation",[z]:`auto.navigation.react.reactrouter_v${o}`}})}catch(S){throw yn.delete(u),S}v?(yn.set(u,{span:v,routeName:w.routeName,pathname:t.pathname,locationKey:p}),Ag(v,t,n,i,a,"navigation")):yn.delete(u)}}function _o(e){e.forEach(t=>{Cg(t).forEach(r=>{Be.add(r)})})}function Cg(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(n=>{Cg(n,t).forEach(o=>{t.add(o)})})),t}function yo({activeRootSpan:e,location:t,routes:n,matches:r,basename:o,allRoutes:s}){const i=Array.isArray(r)?r:rt(s||n,t,o);if(i){const[a,c]=bi(t,s||n,s||n,i,o);j().setTransactionName(a||"/"),e&&(e.updateName(a),e.setAttribute(ie,c),Ag(e,t,n,o,s,"pageload"))}}function tN(e,t,n,r,o=!1){return n?!!(!e&&o||e&&sn(e)&&r==="route"&&!sn(n)||t!=="route"&&r==="route"):!1}function na(e,t,n,r,o,s,i,a){try{const c=t.data?.[ie];if(c==="route"&&n&&!sn(n))return;const u=Array.from(a),d=u.length>0?u:o,l=rt(d,r,s);if(!l)return;const[f,p]=bi(r,d,d,l,s),h=tN(n,c,f,p,!0),m=i==="pageload"||!t.timestamp;h&&m&&(e.updateName(f),e.setAttribute(ie,p))}catch(c){Oe&&g.warn(`Error updating span details before ending: ${c}`)}}function Ag(e,t,n,r,o,s){const i=`__sentry_${s}_end_patched__`;if(e?.[i]||!e.end)return;const c=o?new Set(o):Be,u=e.end.bind(e);let d=!1;e.end=function(...f){if(d)return;d=!0;const p=f.length>0?f[0]:Date.now()/1e3,h=$(e),m=h.description,_=h.data?.[ie],y=()=>{const v=M();if(v&&s==="navigation"){const S=yn.get(v);S&&S.span===e&&yn.delete(v)}},E=ss.get(e);if(E&&E.size>0&&m&&(sn(m)||_!=="route")){if(vn===0){na(e,h,m,t,n,r,s,c),y(),u(p);return}const v=Promise.allSettled(E).then(()=>{});(vn===1/0?v:Promise.race([v,new Promise(C=>setTimeout(C,vn))])).then(()=>{const C=$(e);na(e,C,C.description,t,n,r,s,c),y(),u(p)}).catch(()=>{y(),u(p)});return}na(e,h,m,t,n,r,s,c),y(),u(p)},Ce(e,i,!0)}function xg(e,t){if(!Qt||!Zt||!en||!os||!rt)return Oe&&g.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Qt}. useLocation: ${Zt}. useNavigationType: ${en}.
      createRoutesFromChildren: ${os}. matchRoutes: ${rt}.`),e;const n=r=>{const o=ke.useRef(!0),s=Zt(),i=en();return Qt(()=>{const a=os(r.children);o.current?(_o(a),yo({activeRootSpan:ut(),location:s,routes:a,allRoutes:Array.from(Be)}),o.current=!1):_u({location:s,routes:a,navigationType:i,version:t,allRoutes:Array.from(Be)})},[s,i]),ke.createElement(e,{...r})};return yi(n,e),n}function nN(e){return wg(e,"6")}function rN(e){return kg(e,"6")}function oN(e){return Tg(e,"6")}function sN(e){return Ig(e,"6")}function iN(e){return xg(e,"6")}function aN(e){return wg(e,"7")}function cN(e){return xg(e,"7")}function uN(e){return Tg(e,"7")}function lN(e){return Ig(e,"7")}function dN(e){return kg(e,"7")}const fN=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:ph,ErrorBoundary:hg,MULTIPLEXED_TRANSPORT_EXTRA_KEY:jo,OpenFeatureIntegrationHook:eM,Profiler:hu,SDK_VERSION:Ct,SEMANTIC_ATTRIBUTE_SENTRY_OP:de,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:z,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Us,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:ie,Scope:lt,WINDOW:O,addBreadcrumb:ft,addEventProcessor:Kf,addIntegration:pa,breadcrumbsIntegration:Fh,browserApiErrorsIntegration:Bh,browserProfilingIntegration:Yx,browserSessionIntegration:Uh,browserTracingIntegration:Hn,buildLaunchDarklyFlagUsedHandler:Qx,captureConsoleIntegration:ob,captureEvent:br,captureException:ge,captureFeedback:Mp,captureMessage:Gf,captureReactException:pu,captureSession:fa,chromeStackLineParser:Oh,close:Uy,consoleLoggingIntegration:gE,contextLinesIntegration:Wk,continueTrace:uy,createConsolaReporter:vE,createLangChainCallbackHandler:eT,createReduxEnhancer:RM,createTransport:ap,createUserFeedbackEnvelope:$w,dedupeIntegration:wp,defaultRequestInstrumentationOptions:lu,defaultStackLineParsers:Lh,defaultStackParser:Dh,diagnoseSdkConnectivity:sM,endSession:cc,eventFiltersIntegration:bp,eventFromException:dh,eventFromMessage:fh,exceptionFromError:oi,extraErrorDataIntegration:pb,featureFlagsIntegration:Kb,feedbackAsyncIntegration:F0,feedbackIntegration:zl,feedbackSyncIntegration:zl,flush:By,forceLoad:bk,functionToStringIntegration:Sp,geckoStackLineParser:Ph,getActiveSpan:be,getClient:M,getCurrentScope:j,getDefaultIntegrations:Vh,getFeedback:JT,getGlobalScope:Mt,getIsolationScope:we,getReplay:NA,getRootSpan:Se,getSpanDescendants:$r,getSpanStatusFromHttpCode:gf,getTraceData:_c,globalHandlersIntegration:Hh,graphqlClientIntegration:Yk,growthbookIntegration:rM,httpClientIntegration:Ck,httpContextIntegration:qh,inboundFiltersIntegration:Ep,init:ug,instrumentAnthropicAiClient:Ov,instrumentGoogleGenAIClient:Gv,instrumentLangGraph:cT,instrumentOpenAiClient:hv,instrumentOutgoingRequests:Xm,instrumentSupabaseClient:xp,isEnabled:Jf,isInitialized:Hy,lastEventId:Vf,launchDarklyIntegration:Xx,lazyLoadIntegration:uh,linkedErrorsIntegration:Gh,logger:lE,makeBrowserOfflineTransport:Tx,makeFetchTransport:qc,makeMultiplexedTransport:AS,metrics:bE,moduleMetadataIntegration:eb,onLoad:Ek,openFeatureIntegration:Zx,opera10StackLineParser:Ow,opera11StackLineParser:Dw,parameterize:_p,reactErrorHandler:pM,reactRouterV3BrowserTracingIntegration:CM,reactRouterV4BrowserTracingIntegration:MM,reactRouterV5BrowserTracingIntegration:NM,reactRouterV6BrowserTracingIntegration:nN,reactRouterV7BrowserTracingIntegration:aN,registerSpanErrorInstrumentation:Pf,registerWebWorker:uM,replayCanvasIntegration:XA,replayIntegration:jm,reportPageLoaded:mx,reportingObserverIntegration:wk,rewriteFramesIntegration:Eb,sendFeedback:Kp,setActiveSpanInBrowser:gx,setContext:ac,setCurrentClient:pp,setExtra:Ly,setExtras:Py,setHttpStatus:qr,setMeasurement:Bf,setTag:$y,setTags:Dy,setUser:Fy,showReportDialog:Na,spanToBaggageHeader:U_,spanToJSON:$,spanToTraceHeader:xf,spotlightBrowserIntegration:mk,startBrowserTracingNavigationSpan:Rr,startBrowserTracingPageLoadSpan:kr,startInactiveSpan:tt,startNewTrace:Hf,startSession:da,startSpan:Ut,startSpanManual:kt,statsigIntegration:oM,supabaseIntegration:Pb,suppressTracing:Uf,tanstackRouterBrowserTracingIntegration:xM,thirdPartyErrorFilterIntegration:zb,uiProfiler:hw,unleashIntegration:tM,updateSpanName:$_,useProfiler:EM,webWorkerIntegration:aM,winjsStackLineParser:xw,withActiveSpan:An,withErrorBoundary:TM,withIsolationScope:f_,withProfiler:bM,withScope:qe,withSentryReactRouterV6Routing:iN,withSentryReactRouterV7Routing:cN,withSentryRouting:PM,wrapCreateBrowserRouterV6:oN,wrapCreateBrowserRouterV7:uN,wrapCreateMemoryRouterV6:sN,wrapCreateMemoryRouterV7:lN,wrapUseRoutesV6:rN,wrapUseRoutesV7:dN,zodErrorsIntegration:jb},Symbol.toStringTag,{value:"Module"}));function gN(){return ke.useEffect(()=>{pn.sentry?.dsn&&(ug({dsn:pn.sentry.dsn,environment:pn.sentry.environment,tracesSampleRate:pn.sentry.tracesSampleRate,replaysSessionSampleRate:pn.sentry.replaysSessionSampleRate,replaysOnErrorSampleRate:pn.sentry.replaysOnErrorSampleRate,integrations:[Hn(),jm({maskAllText:!0,blockAllMedia:!0})],release:void 0,beforeSend(e,t){if(pn.env==="development")return null;if(e.exception){const n=t.originalException;if(n&&typeof n=="object"&&"message"in n){const r=String(n.message);if(r.includes("chrome-extension://")||r.includes("moz-extension://")||r.includes("safari-extension://")||r.includes("Non-Error promise rejection"))return null}}return e},ignoreErrors:["top.GLOBALS","originalCreateNotification","canvas.contentDocument","MyApp_RemoveAllHighlights","atomicFindClose","fb_xd_fragment","bmi_SafeAddOnload","EBCallBackMessageReceived","conduitPage","NetworkError","Network request failed","Failed to fetch","Load failed","ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications"]}),typeof window<"u"&&(window.Sentry=fN))},[]),null}export{gN as SentryInit};
